import{d as Be}from"./index-3fefaf12.js";import{K as Me,k as d,l as Le,h as we,m as G,T as O,r as u,n as Ze,f as te,a as t,u as m,w as e,F as ge,o as U,Z as $e,b as n,p as i,d as c,t as D,q as be,c as le,i as ye,x as qe,g as He,O as Ye}from"./app-3abe3d3d.js";import{_ as Re}from"./AuthenticatedLayout-16e5494c.js";import{b as J,c as he,f as Ge}from"./common-1f9d3448.js";import"./sortable.esm-0d19b1d3.js";import"./ApplicationLogo-7e725a99.js";const Je=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einstellungen",-1),Ke={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},Qe={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},We=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Rückmeldungszeiträume",-1),Xe={class:"tw-flex tw-items-center tw-justify-end"},et=n("span",{class:"tw-text-h5"},"Neuer Rückmeldezeitraum",-1),tt=["data-id","data-order"],lt={align:"center"},at=n("span",null,"Einstellungen bearbeiten",-1),ot=n("span",null,"Einstellungen löschen",-1),st=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),nt={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},rt=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"E-Mail Einstellungen",-1),dt={class:"tw-flex tw-items-center tw-justify-start"},ut={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},it={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},ct=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Dateien für den Downloadbereich",-1),mt={class:"tw-flex tw-items-center tw-justify-end"},_t=n("span",{class:"tw-text-h5"},"Neue Datei zum Downloadbereich hinzufügen",-1),vt=["data-id","data-order"],pt={align:"center"},ft=["href"],wt=n("span",null,"Datei herunterladen",-1),gt=n("span",null,"Datei bearbeiten",-1),bt=n("span",null,"Datei löschen",-1),yt=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Ft={__name:"Settings",props:{surveyTimePeriods:Array,settings:Object,downloadableFiles:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(ae){const y=ae;Be.Inertia.on("success",s=>{let l=s.detail.page.props;s.detail.page.component==="SurveyTimePeriods/SurveyTimePeriods"&&l&&(oe.value=l.currentPage,S.value=l.perPage,xe.value=l.orderBy,ke.value=l.sort,De.value=l.total,Se.value=l.lastPage,se.value=l.filters.search??null)}),Me().props.auth.user;const oe=d(y.currentPage),S=d(y.perPage),xe=d(y.orderBy),ke=d(y.sort),De=d(y.total),Se=d(y.lastPage),se=d(y.filters.search??null),ne=d(""),_=d(y.errors||{}),j=d(!1),K=d(!1),Q=d(!1),A=d(!1),B=d(!1),M=d(!1),L=d(!1),re=d(null),de=d(null),W=d(null),X=d(null),V=d(),F=d(),Ve=d({send_yearly_evaluation_reminder_ntf_before_days:"Anzahl der Tage vor Ende des Bewertungszeitraums für den Versand der Erinnerungsmails"}),Fe=[{title:"Jahr",key:"year",width:"10%",sortable:!0},{title:"Erhebungsbeginn",key:"survey_start_date",width:"37.5%",sortable:!0},{title:"Erhebungsende",key:"survey_end_date",width:"37.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}],Ee=[{title:"Name",key:"name",width:"42.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"42.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}];Le(()=>{ie()});const Pe=we(()=>ue(y.surveyTimePeriods)),Te=we(()=>ue(y.downloadableFiles));G(A,s=>{s||b()}),G(B,s=>{s||b()});const ue=s=>s.map(l=>{const v={...l};for(const p in v)(v[p]===null||v[p]===void 0)&&(v[p]="-");return v}),ie=()=>{W.value=J(new Date(new Date().getFullYear(),4,1)),X.value=J(new Date(new Date().getFullYear(),5,30)),V.value=new Date(new Date().getFullYear(),4,1),F.value=new Date(new Date().getFullYear(),5,30)},b=()=>{A.value=!1,B.value=!1,M.value=!1,L.value=!1,ee(),_.value={}},ee=()=>{h.reset(),h.clearErrors(),w.reset(),w.clearErrors(),ie()},ce=async({page:s,itemsPerPage:l,sortBy:v})=>{j.value=!0;let p={data:{page:s,per_page:l}};v&&v.length>0&&(p.data.order_by=v[0].key,p.data.sort=v[0].order),p.data.search=se.value,await Ye.reload(p),oe.value=s,S.value=l,j.value=!1};G(V,s=>{W.value=J(s)}),G(F,s=>{X.value=J(s)});const Ue=s=>{C.id=s.id,re.value=s.year,M.value=!0},h=O({year:null,survey_start_date:null,survey_end_date:null}),C=O({id:null}),Ce=async()=>{h.processing=!0,h.survey_start_date=new Date(V.value).toLocaleString(),h.survey_end_date=new Date(F.value).toLocaleString(),h.post(route("survey_time_periods.store"),{onSuccess:s=>{b()},onError:s=>{_.value=s},onFinish:()=>{h.processing=!1}})},Ne=async()=>{C.processing=!0;let s={onSuccess:l=>{b()},onError:l=>{b(),_.value=l},onFinish:()=>{C.processing=!1}};C.delete(route("downloadable_files.destroy",{id:C.id}),s)},N=O({settings:y.settings}),ze=async()=>{N.processing=!0;let s={preserveState:!0,onSuccess:l=>{},onError:l=>{_.value=l},onFinish:()=>{N.processing=!1}};N.post(route("settings.update"),s)},Ie=s=>{E.id=s.id,de.value=s.name,L.value=!0},w=O({name:null,file:null}),E=O({id:null}),Oe=async()=>{var s;E.processing=!0,w.file=(s=w.file)!=null&&s.length?w.file[0]:null,w.post(route("downloadable_files.store"),{forceFormData:!0,onSuccess:l=>{b()},onError:l=>{_.value=l},onFinish:()=>{w.processing=!1}})},je=async()=>{E.processing=!0;let s={onSuccess:l=>{b()},onError:l=>{b(),_.value=l},onFinish:()=>{E.processing=!1}};E.delete(route("downloadable_files.destroy",{id:E.id}),s)};return(s,l)=>{const v=u("v-card-title"),p=u("v-text-field"),x=u("v-col"),me=u("v-date-picker"),_e=u("v-menu"),ve=u("v-locale-provider"),P=u("v-row"),Z=u("v-container"),$=u("v-card-text"),k=u("v-btn-primary"),g=u("v-hover"),q=u("v-spacer"),T=u("v-btn"),H=u("v-card-actions"),Y=u("v-card"),R=u("v-dialog"),z=u("v-icon"),I=u("v-tooltip"),pe=u("v-data-table-server"),Ae=u("v-file-input"),fe=Ze("sortable-data-table");return U(),te(ge,null,[t(m($e),{title:"Einstellungen"}),t(Re,{errors:_.value},{header:e(()=>[Je]),default:e(()=>[n("div",Ke,[n("div",Qe,[We,n("div",Xe,[t(g,null,{default:e(({isHovering:o,props:r})=>[t(T,i(r,{color:o?"accent":"primary",dark:""}),{default:e(()=>[c(" ZEITRAUM HINZUFÜGEN "),t(R,{modelValue:A.value,"onUpdate:modelValue":l[7]||(l[7]=a=>A.value=a),activator:"parent",width:"80vw"},{default:e(()=>[t(Y,{height:"80vh"},{default:e(()=>[t(v,null,{default:e(()=>[et]),_:1}),t($,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(P,null,{default:e(()=>[t(x,{cols:"12",sm:"4"},{default:e(()=>[t(p,{modelValue:m(h).year,"onUpdate:modelValue":l[0]||(l[0]=a=>m(h).year=a),"error-messages":_.value.year,label:"Jahr*",required:""},null,8,["modelValue","error-messages"])]),_:1}),t(x,{cols:"12",sm:"4"},{default:e(()=>[t(ve,{locale:"de"},{default:e(()=>[t(_e,{modelValue:K.value,"onUpdate:modelValue":l[3]||(l[3]=a=>K.value=a),"return-value":V.value,"close-on-content-click":!1},{activator:e(({props:a})=>[t(p,i({label:"Erhebungsbeginn*",class:"tw-cursor-pointer","model-value":W.value,"prepend-icon":"mdi-calendar",readonly:""},a,{"error-messages":_.value.survey_start_date}),null,16,["model-value","error-messages"])]),default:e(()=>[t(me,{"onUpdate:modelValue":[l[1]||(l[1]=a=>K.value=!1),l[2]||(l[2]=a=>V.value=a)],modelValue:V.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024),t(x,{cols:"12",sm:"4"},{default:e(()=>[t(ve,{locale:"de"},{default:e(()=>[t(_e,{modelValue:Q.value,"onUpdate:modelValue":l[6]||(l[6]=a=>Q.value=a),"return-value":F.value,"close-on-content-click":!1},{activator:e(({props:a})=>[t(p,i({label:"Erhebungsende*",class:"tw-cursor-pointer","model-value":X.value,"prepend-icon":"mdi-calendar",readonly:""},a,{"error-messages":_.value.survey_end_date}),null,16,["model-value","error-messages"])]),default:e(()=>[t(me,{"onUpdate:modelValue":[l[4]||(l[4]=a=>Q.value=!1),l[5]||(l[5]=a=>F.value=a)],modelValue:F.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(H,null,{default:e(()=>[t(g,null,{default:e(({isHovering:a,props:f})=>[t(k,i({onClick:ee},f,{color:a?"accent":"primary"}),{default:e(()=>[c("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(q),t(g,null,{default:e(({isHovering:a,props:f})=>[t(T,i({onClick:b},f,{color:a?"accent":"primary"}),{default:e(()=>[c("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(g,null,{default:e(({isHovering:a,props:f})=>[t(k,i({onClick:Ce},f,{color:a?"accent":"primary"}),{default:e(()=>[c("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),t(R,{modelValue:M.value,"onUpdate:modelValue":l[8]||(l[8]=o=>M.value=o),width:"20vw"},{default:e(()=>[t(Y,{height:"30vh"},{default:e(()=>[t($,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(P,null,{default:e(()=>[t(x,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+D(re.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(H,null,{default:e(()=>[t(q),t(g,null,{default:e(({isHovering:o,props:r})=>[t(T,i({onClick:b},r,{color:o?"accent":"primary"}),{default:e(()=>[c("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(g,null,{default:e(({isHovering:o,props:r})=>[t(k,i({onClick:Ne},r,{color:o?"accent":"primary"}),{default:e(()=>[c("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),be((U(),le(pe,{"items-per-page":S.value,"onUpdate:itemsPerPage":l[9]||(l[9]=o=>S.value=o),headers:Fe,items:Pe.value,search:ne.value,loading:j.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":ce},{item:e(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,D(o.selectable.year),1),n("td",null,D(m(he)(o.selectable.survey_start_date,"sv-SE")),1),n("td",null,D(m(he)(o.selectable.survey_end_date,"sv-SE")),1),n("td",lt,[t(I,{location:"top"},{activator:e(({props:r})=>[t(m(ye),{href:s.route("survey_time_periods.show",{id:o.selectable.id})},{default:e(()=>[t(z,i(r,{size:"small",class:"tw-me-2"}),{default:e(()=>[c("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[at]),_:2},1024),t(I,{location:"top"},{activator:e(({props:r})=>[t(z,i(r,{size:"small",class:"tw-me-2",onClick:a=>Ue(o.raw)}),{default:e(()=>[c("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[ot]),_:2},1024)])],8,tt)]),"no-data":e(()=>[st]),bottom:e(()=>[]),_:1},8,["items-per-page","items","search","loading"])),[[fe]])]),n("div",nt,[rt,t(P,null,{default:e(()=>[t(x,{cols:"12",md:"6"},{default:e(()=>[(U(!0),te(ge,null,qe(ae.settings,(o,r)=>{var a;return U(),te("div",dt,[t(p,{modelValue:m(N).settings[r],"onUpdate:modelValue":f=>m(N).settings[r]=f,"error-messages":(a=_.value)!=null&&a.settings?_.value.settings[r]:!1,label:`${Ve.value[r]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"])])}),256))]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(x,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:e(()=>[t(g,null,{default:e(({isHovering:o,props:r})=>[t(k,i({onClick:ze},r,{color:o?"accent":"primary"}),{default:e(()=>[c("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),n("div",ut,[n("div",it,[ct,n("div",mt,[t(g,null,{default:e(({isHovering:o,props:r})=>[t(T,i(r,{color:o?"accent":"primary",dark:""}),{default:e(()=>[c(" DATEI HINZUFÜGEN "),t(R,{modelValue:B.value,"onUpdate:modelValue":l[12]||(l[12]=a=>B.value=a),activator:"parent",width:"80vw"},{default:e(()=>[t(Y,{height:"80vh"},{default:e(()=>[t(v,null,{default:e(()=>[_t]),_:1}),t($,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(P,null,{default:e(()=>[t(x,{cols:"12",sm:"6"},{default:e(()=>[t(p,{class:"required",type:"text",modelValue:m(w).name,"onUpdate:modelValue":l[10]||(l[10]=a=>m(w).name=a),"error-messages":_.value.name,label:"Name",required:"",disabled:m(w).processing},null,8,["modelValue","error-messages","disabled"])]),_:1}),t(x,{cols:"12",sm:"6"},{default:e(()=>[t(Ae,{modelValue:m(w).file,"onUpdate:modelValue":l[11]||(l[11]=a=>m(w).file=a),"error-messages":_.value.file,label:"File",accept:"*/*","prepend-icon":"mdi-upload",disabled:m(w).processing},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),t(H,null,{default:e(()=>[t(g,null,{default:e(({isHovering:a,props:f})=>[t(k,i({onClick:ee},f,{color:a?"accent":"primary"}),{default:e(()=>[c("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(q),t(g,null,{default:e(({isHovering:a,props:f})=>[t(T,i({onClick:b},f,{color:a?"accent":"primary"}),{default:e(()=>[c("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(g,null,{default:e(({isHovering:a,props:f})=>[t(k,i({onClick:Oe},f,{color:a?"accent":"primary"}),{default:e(()=>[c("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),t(R,{modelValue:L.value,"onUpdate:modelValue":l[13]||(l[13]=o=>L.value=o),width:"20vw"},{default:e(()=>[t(Y,{height:"30vh"},{default:e(()=>[t($,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(P,null,{default:e(()=>[t(x,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+D(de.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(H,null,{default:e(()=>[t(q),t(g,null,{default:e(({isHovering:o,props:r})=>[t(T,i({onClick:b},r,{color:o?"accent":"primary"}),{default:e(()=>[c("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(g,null,{default:e(({isHovering:o,props:r})=>[t(k,i({onClick:je},r,{color:o?"accent":"primary"}),{default:e(()=>[c("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),be((U(),le(pe,{"items-per-page":S.value,"onUpdate:itemsPerPage":l[14]||(l[14]=o=>S.value=o),headers:Ee,items:Te.value,search:ne.value,loading:j.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":ce},{item:e(({item:o})=>{var r;return[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,D(o.selectable.name),1),n("td",null,D(m(Ge)(o.selectable.created_at,"sv-SE")),1),n("td",pt,[(r=o.selectable)!=null&&r.path?(U(),le(I,{key:0,location:"top"},{activator:e(({props:a})=>[n("a",{href:o.selectable.path,download:""},[t(z,i(a,{size:"small",class:"tw-me-2"}),{default:e(()=>[c("mdi-download")]),_:2},1040)],8,ft)]),default:e(()=>[wt]),_:2},1024)):He("",!0),t(I,{location:"top"},{activator:e(({props:a})=>[t(m(ye),{href:s.route("downloadable_files.show",{id:o.selectable.id})},{default:e(()=>[t(z,i(a,{size:"small",class:"tw-me-2"}),{default:e(()=>[c("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[gt]),_:2},1024),t(I,{location:"top"},{activator:e(({props:a})=>[t(z,i(a,{size:"small",class:"tw-me-2",onClick:f=>Ie(o.raw)}),{default:e(()=>[c("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[bt]),_:2},1024)])],8,vt)]}),"no-data":e(()=>[yt]),bottom:e(()=>[]),_:1},8,["items-per-page","items","search","loading"])),[[fe]])])]),_:1},8,["errors"])],64)}}};export{Ft as default};
