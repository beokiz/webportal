import{d as oe}from"./index-74e3ab86.js";import{K as ne,j as h,k as P,l as se,s as re,T as D,r as i,o as ie,f as ue,a as e,u,w as t,F as de,Z as ce,b as c,t as C,m as p,d as f,i as K}from"./app-eeb3b4c2.js";import{a as me}from"./common-ea192878.js";import{S as _e}from"./sortable.esm-0d19b1d3.js";import{_ as pe}from"./AuthenticatedLayout-ed5b44ad.js";import"./ApplicationLogo-a20a8c12.js";const fe={class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},ve={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ge=c("h3",null,"Eigenschaften",-1),be=c("h3",null,"Zugeordnete Meilensteine",-1),he={class:"tw-flex tw-items-center tw-justify-end"},we=c("span",{class:"tw-text-h5"},"Neuer Meilenstein",-1),ye=["data-id","data-order"],Ve=c("span",null,"neu anordnen",-1),xe=c("span",null,"Meilenstein bearbeiten",-1),Se=c("span",null,"Meilenstein löschen",-1),ke=c("div",{class:"tw-py-6"},[c("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),De={__name:"ManageSubdomain",props:{subdomain:Object,errors:Object},setup(q){const V=q;oe.Inertia.on("success",a=>{let l=a.detail.page.props;a.detail.page.component==="Domains/Partials/ManageSubdomain"&&l&&(w.value=l.subdomain)}),ne().props.auth.user;const w=h(V.subdomain),_=h(V.errors||{}),G=h(!1),M=h(!1),L=h(null),E=h(!1),A=h(null),H=[{title:"Kürzel",key:"abbreviation",width:"10%",sortable:!1},{title:"Titel",key:"title",width:"20%",sortable:!1},{title:"Beschreibungstext",key:"text",width:"60%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],J=P(()=>V.subdomain.milestones.map(a=>{const l={...a};for(const o in l)(l[o]===null||l[o]===void 0)&&(l[o]="-");return l}));se(E,a=>{a||y()}),P(()=>{if(V.from){const a=V.from.split(";");if(a.length===3){const l=a[0],o={};return o[a[1]]=a[2],route(l,o)}}return route("domains.show",{id:w.domain_id})}),re(()=>{const a={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(l){Q(l)}};_e.create(document.querySelector(".v-data-table tbody"),a)});const y=()=>{E.value=!1,M.value=!1,r.reset(),r.clearErrors(),_.value={}},I=()=>{r.reset(),r.clearErrors(),v.reset(),v.clearErrors(),v.name=null},F=D({items:[]}),Q=a=>{F.processing=!0;let l=[],o=0;[].forEach.call(a.from.querySelectorAll("tr"),function(m,g){m.setAttribute("data-order",o+g),l.push({id:m.getAttribute("data-id"),order:o+g})}),F.items=l,F.post(route("milestones.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:m=>{},onError:m=>{_.value=m},onFinish:()=>{F.processing=!1}})},R=a=>{A.value=a.title,x.id=a.id,M.value=!0},x=D({id:null}),W=async()=>{x.processing=!0;let a={onSuccess:l=>{y()},onError:l=>{_.value=l},onFinish:()=>{x.processing=!1}};x.delete(route("milestones.destroy",{id:x.id}),a)},v=D({id:w.value.id,name:w.value.name}),X=async()=>{v.processing=!0;let a={preserveState:!1,onSuccess:l=>{y()},onError:l=>{_.value=l},onFinish:()=>{v.processing=!1}};v.put(route("subdomains.update",{subdomain:v.id}),a)},r=D({subdomain:w.value.id,abbreviation:null,title:null,text:null,emphasis:null,emphasis_daz:null,age:null}),Y=async()=>{r.processing=!0,r.post(route("milestones.store"),{onSuccess:a=>{y()},onError:a=>{_.value=a},onFinish:()=>{r.processing=!1}})};return(a,l)=>{const o=i("v-col"),m=i("v-row"),g=i("v-container"),S=i("v-text-field"),k=i("v-btn"),b=i("v-hover"),U=i("v-btn-primary"),ee=i("v-card-title"),te=i("v-select"),le=i("v-textarea"),Z=i("v-card-text"),B=i("v-spacer"),O=i("v-card-actions"),$=i("v-card"),j=i("v-dialog"),N=i("v-icon"),T=i("v-tooltip"),ae=i("v-data-table-server");return ie(),ue(de,null,[e(u(ce),{title:`Verwalte Subdomäne ${q.subdomain.name}`},null,8,["title"]),e(pe,{errors:_.value},{header:t(()=>[c("h2",fe,C(`Verwalte Subdomäne ${q.subdomain.name}`),1)]),default:t(()=>[c("div",ve,[e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[ge]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(S,{modelValue:u(v).name,"onUpdate:modelValue":l[0]||(l[0]=n=>u(v).name=n),"error-messages":_.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,{cols:"12",sm:"6"},{default:t(()=>[e(b,null,{default:t(({isHovering:n,props:d})=>[e(k,p({onClick:I},d,{color:n?"primary":"accent"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:1})]),_:1}),e(o,{cols:"12",sm:"6",align:"right"},{default:t(()=>[e(b,null,{default:t(({isHovering:n,props:d})=>[e(u(K),{href:a.route("domains.show",{id:w.value.domain_id})},{default:t(()=>[e(k,p({class:"mr-2",variant:"text"},d,{color:n?"accent":"primary"}),{default:t(()=>[f("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(b,null,{default:t(({isHovering:n,props:d})=>[e(U,p({onClick:X},d,{color:n?"accent":"primary"}),{default:t(()=>[f("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(m,{class:"tw-border-t-8 tw-mt-8 tw-pt-8"},{default:t(()=>[e(o,{cols:"12",sm:"6"},{default:t(()=>[be]),_:1}),e(o,{cols:"12",sm:"6"},{default:t(()=>[c("div",he,[e(b,null,{default:t(({isHovering:n,props:d})=>[e(k,p(d,{color:n?"accent":"primary",dark:""}),{default:t(()=>[f(" Meilenstein hinzufügen "),e(j,{modelValue:E.value,"onUpdate:modelValue":l[7]||(l[7]=s=>E.value=s),activator:"parent",width:"80vw"},{default:t(()=>[e($,{height:"80vh"},{default:t(()=>[e(ee,null,{default:t(()=>[we]),_:1}),e(Z,null,{default:t(()=>[e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(o,{cols:"12",sm:"3"},{default:t(()=>[e(S,{modelValue:u(r).abbreviation,"onUpdate:modelValue":l[1]||(l[1]=s=>u(r).abbreviation=s),"error-messages":_.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",sm:"3"},{default:t(()=>[e(te,{modelValue:u(r).age,"onUpdate:modelValue":l[2]||(l[2]=s=>u(r).age=s),items:u(me),"error-messages":_.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),e(o,{cols:"12",sm:"3"},{default:t(()=>[e(S,{modelValue:u(r).emphasis,"onUpdate:modelValue":l[3]||(l[3]=s=>u(r).emphasis=s),"error-messages":_.value.emphasis,type:"number",label:"Gewichtung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",sm:"3"},{default:t(()=>[e(S,{modelValue:u(r).emphasis_daz,"onUpdate:modelValue":l[4]||(l[4]=s=>u(r).emphasis_daz=s),"error-messages":_.value.emphasis_daz,type:"number",label:"Gewichtung mit Daz*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(S,{modelValue:u(r).title,"onUpdate:modelValue":l[5]||(l[5]=s=>u(r).title=s),"error-messages":_.value.title,label:"Titel*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(le,{modelValue:u(r).text,"onUpdate:modelValue":l[6]||(l[6]=s=>u(r).text=s),"error-messages":_.value.text,label:"Beschreibungstext*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(b,null,{default:t(({isHovering:s,props:z})=>[e(U,p({onClick:I},z,{color:s?"primary":"accent"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(B),e(b,null,{default:t(({isHovering:s,props:z})=>[e(k,p({onClick:y},z,{color:s?"accent":"primary"}),{default:t(()=>[f("Zurück")]),_:2},1040,["color"])]),_:2},1024),e(b,null,{default:t(({isHovering:s,props:z})=>[e(U,p({onClick:Y},z,{color:s?"accent":"primary"}),{default:t(()=>[f("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(j,{modelValue:M.value,"onUpdate:modelValue":l[8]||(l[8]=n=>M.value=n),width:"20vw"},{default:t(()=>[e($,{height:"30vh"},{default:t(()=>[e(Z,null,{default:t(()=>[e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[c("p",null,"Sind Sie sicher, dass Sie den Meilenstein "+C(A.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(B),e(b,null,{default:t(({isHovering:n,props:d})=>[e(k,p({onClick:y},d,{color:n?"accent":"primary"}),{default:t(()=>[f("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(b,null,{default:t(({isHovering:n,props:d})=>[e(U,p({onClick:W},d,{color:n?"accent":"primary"}),{default:t(()=>[f("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(ae,{"items-per-page":-1,headers:H,items:J.value,loading:G.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:t(({item:n})=>[c("tr",{"data-id":n.id,"data-order":n.order},[c("td",null,C(n.abbreviation),1),c("td",null,C(n.title),1),c("td",null,C(n.text),1),c("td",null,[e(T,{location:"top"},{activator:t(({props:d})=>[e(N,p({draggable:"true",onDragstart:s=>L.value=n,color:"primary"},d,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:t(()=>[f("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:t(()=>[Ve]),_:2},1024),e(T,{location:"top"},{activator:t(({props:d})=>[e(u(K),{href:a.route("milestones.show",{id:n.id})},{default:t(()=>[e(N,p(d,{size:"small",class:"tw-me-2"}),{default:t(()=>[f("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[xe]),_:2},1024),e(T,{location:"top"},{activator:t(({props:d})=>[e(N,p(d,{size:"small",class:"tw-me-2",onClick:s=>R(n)}),{default:t(()=>[f("mdi-delete ")]),_:2},1040,["onClick"])]),default:t(()=>[Se]),_:2},1024)])],8,ye)]),"no-data":t(()=>[ke]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{De as default};
