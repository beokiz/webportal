import{d as H}from"./index-84150a89.js";import{K as J,j as i,v as L,T as Q,l as W,r as s,o as d,f as A,a as e,u as l,w as a,F as X,Z as Y,b as p,c as w,h as k,m as y,d as D,t as ee,x as ae}from"./app-24995cfe.js";import{p as V,a as te}from"./common-ea192878.js";import{_ as oe}from"./AuthenticatedLayout-57d37e1c.js";import{_ as C}from"./EvaluationDomainsList-efd790e8.js";import"./ApplicationLogo-3ff1ec4f.js";const se=p("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Ampel-Prüfung",-1),ne={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},le=p("h3",null,"Eigenschaften",-1),re={key:0,class:"tw-flex justify-center items-center tw-bg-white"},ce={class:"tw-text-center"},ue={class:"tw-uppercase text-primary tw-font-black tw-text-xl tw-mb-8"},ge={__name:"MakeEvaluationScreening",props:{domains:Array,dazDependent:{type:Boolean,default:!1},errors:Object},setup(v){const g=v;H.Inertia.on("success",o=>{o.detail.page.props,o.detail.page.component}),J().props.auth.user;const r=i(g.errors||{}),x=i(!1),B=i([]),f=i(!1),E=i(null),R=i(null);L(()=>{F()});const N=o=>{t.ratings=o},U=o=>{B.value=ae(o)?o.value:o},F=()=>{t.ratings=V(g.domains)},S=()=>{r.value={},f.value=!1},j=()=>{t.reset(),t.clearErrors(),r.value={},t.ratings=V(g.domains)},t=Q({age:null,is_daz:!1,ratings:[]});W(()=>t.age,o=>{t.ratings=V(g.domains)});const I=async()=>{t.processing=!0,x.value=!0,t.post(route("screening.make"),{onSuccess:o=>{t.clearErrors(),r.value={},f.value=!0,E.value=o.props.data.evaluation,R.value=o.props.data.domain.name},onError:o=>{r.value=o},onFinish:()=>{t.processing=!1,x.value=!1}})};return(o,u)=>{const c=s("v-col"),m=s("v-row"),h=s("v-container"),P=s("v-select"),K=s("v-checkbox"),M=s("v-progress-circular"),T=s("v-btn"),b=s("v-hover"),z=s("v-btn-primary"),Z=s("v-card-text"),$=s("v-spacer"),O=s("v-card-actions"),q=s("v-card"),G=s("v-dialog");return d(),A(X,null,[e(l(Y),{title:"Ampel-Prüfung"}),e(oe,{errors:r.value},{header:a(()=>[se]),default:a(()=>[p("div",ne,[e(h,null,{default:a(()=>[e(m,null,{default:a(()=>[e(c,{cols:"12"},{default:a(()=>[le]),_:1})]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(m,null,{default:a(()=>[e(c,{cols:"12",sm:"3"},{default:a(()=>[e(P,{modelValue:l(t).age,"onUpdate:modelValue":u[0]||(u[0]=n=>l(t).age=n),items:l(te),"error-messages":r.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),v.dazDependent?(d(),w(c,{key:0,cols:"12",sm:"3"},{default:a(()=>[e(K,{modelValue:l(t).is_daz,"onUpdate:modelValue":u[1]||(u[1]=n=>l(t).is_daz=n),label:"Deutsch ist nicht Erstsprache des Kindes"},null,8,["modelValue"])]),_:1})):k("",!0)]),_:1}),e(m,{class:"manage-evaluation-domains"},{default:a(()=>[l(t).age?(d(),w(C,{key:0,ratings:l(t).ratings,age:l(t).age,domains:v.domains,errors:r.value,onUpdateRatingData:N,onUpdateDomainsData:U},null,8,["ratings","age","domains","errors"])):k("",!0)]),_:1})]),_:1}),e(h,null,{default:a(()=>[x.value?(d(),A("div",re,[e(M,{indeterminate:"",size:40})])):(d(),w(m,{key:1},{default:a(()=>[e(c,{cols:"12",sm:"6"},{default:a(()=>[e(b,null,{default:a(({isHovering:n,props:_})=>[e(T,y({onClick:j},_,{color:n?"primary":"accent"}),{default:a(()=>[D(" Zurücksetzen ")]),_:2},1040,["color"])]),_:1})]),_:1}),e(c,{cols:"12",sm:"6",align:"right"},{default:a(()=>[l(t).age&&B.value.length>0?(d(),w(b,{key:0},{default:a(({isHovering:n,props:_})=>[e(z,y({onClick:I},_,{color:n?"accent":"primary"}),{default:a(()=>[D(" Ampel-Bewertung ")]),_:2},1040,["color"])]),_:1})):k("",!0)]),_:1})]),_:1}))]),_:1})]),e(G,{modelValue:f.value,"onUpdate:modelValue":u[2]||(u[2]=n=>f.value=n),width:"95vw"},{default:a(()=>[e(q,{height:"95vh"},{default:a(()=>[e(Z,null,{default:a(()=>[e(h,null,{default:a(()=>[e(m,{class:"result-evaluation-domains"},{default:a(()=>[e(c,{cols:"8",offset:"2"},{default:a(()=>[p("div",ce,[p("h1",ue," Ampelergebnis im Bereich "+ee(R.value),1)])]),_:1}),e(c,{cols:"12"},{default:a(()=>[e(C,{ratings:E.value,age:l(t).age,domains:v.domains,disabled:!0},null,8,["ratings","age","domains"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:a(()=>[e($),e(b,null,{default:a(({isHovering:n,props:_})=>[e(z,y({onClick:S},_,{color:n?"accent":"primary"}),{default:a(()=>[D("Abbrechen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["errors"])],64)}}};export{ge as default};
