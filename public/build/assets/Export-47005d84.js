import{d as j}from"./index-aa4e2db6.js";import{K as A,k as n,T as P,r as d,o as U,f as F,a,u as B,w as o,F as I,Z as T,b as p,p as k,c as D,g as L,d as M,N as C}from"./app-82762607.js";import{_ as R}from"./AuthenticatedLayout-66275954.js";import{a as S}from"./common-6599ea66.js";import{v as K}from"./v4-4a60fe23.js";import"./ApplicationLogo-e5872ece.js";const Z=p("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Übersicht Screenings",-1),q={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},G={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},H={class:"tw-w-full"},J={class:"tw-ml-6"},ae={__name:"Export",props:{domains:Object,errors:Object},setup(y){const N=y;j.Inertia.on("success",t=>{t.detail.page.props,t.detail.page.component}),A().props.auth.user;const v=n(N.errors||{}),r=n(!1),m=n(),c=n(),b=n("2.5"),_=n(null),g=n(null),w=n(!1),V=n(!1);P({});const O=async()=>{C.start(),r.value=!0;try{const t=await axios.post(route("export.make"),{finished_after:m.value,finished_before:c.value,age:b.value,zip_code:_.value,domains:g.value},{responseType:"blob"}),e=t.headers["content-disposition"],u=e.indexOf("filename=");let i;u!==-1?i=e.slice(u+9).replace(/['"]/g,""):i=K();const f=new Blob([t.data],{type:t.headers["content-type"]}),s=document.createElement("a");s.href=window.URL.createObjectURL(f),s.download=i,s.click()}catch(t){console.error(t)}C.done(),r.value=!1};return(t,e)=>{const u=d("v-text-field"),i=d("v-date-picker"),f=d("v-menu"),s=d("v-col"),x=d("v-row"),h=d("v-select"),z=d("v-btn"),E=d("v-hover");return U(),F(I,null,[a(B(T),{title:"Übersicht Screenings"}),a(R,{errors:v.value},{header:o(()=>[Z]),default:o(()=>[p("div",q,[p("div",G,[p("div",H,[a(x,null,{default:o(()=>[a(s,{cols:"12",sm:"6"},{default:o(()=>[a(f,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=l=>w.value=l),"return-value":m.value,"close-on-content-click":!1},{activator:o(({props:l})=>[a(u,k({label:"Abgegeben ab",class:"tw-cursor-pointer","model-value":m.value,"prepend-icon":"mdi-calendar",readonly:""},l,{disabled:r.value}),null,16,["model-value","disabled"])]),default:o(()=>[a(i,{"onUpdate:modelValue":[e[0]||(e[0]=l=>w.value=!1),e[1]||(e[1]=l=>m.value=l)],modelValue:m.value},null,8,["modelValue"])]),_:1},8,["modelValue","return-value"])]),_:1}),a(s,{cols:"12",sm:"6"},{default:o(()=>[a(f,{modelValue:V.value,"onUpdate:modelValue":e[5]||(e[5]=l=>V.value=l),"return-value":c.value,"close-on-content-click":!1},{activator:o(({props:l})=>[a(u,k({label:"Abgegeben bis",class:"tw-cursor-pointer","model-value":c.value,"prepend-icon":"mdi-calendar",readonly:""},l,{disabled:r.value}),null,16,["model-value","disabled"])]),default:o(()=>[a(i,{"onUpdate:modelValue":[e[3]||(e[3]=l=>V.value=!1),e[4]||(e[4]=l=>c.value=l)],modelValue:c.value},null,8,["modelValue"])]),_:1},8,["modelValue","return-value"])]),_:1})]),_:1}),a(x,null,{default:o(()=>[t.$page.props.auth.user.is_monitor_oe||t.$page.props.auth.user.is_super_admin?(U(),D(s,{key:0,cols:"12",sm:"4"},{default:o(()=>[a(h,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=l=>g.value=l),items:y.domains,"error-messages":v.value.domain,"item-title":"name","item-value":"id",label:"Domanen",disabled:r.value},null,8,["modelValue","items","error-messages","disabled"])]),_:1})):L("",!0),a(s,{cols:"12",sm:"4"},{default:o(()=>[a(h,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=l=>b.value=l),items:B(S),"error-messages":v.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe",disabled:r.value},null,8,["modelValue","items","error-messages","disabled"])]),_:1}),a(s,{cols:"12",sm:"4"},{default:o(()=>[a(u,{modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=l=>_.value=l),type:"number","error-messages":v.value.zipCode,label:"Postleitzahl",disabled:r.value},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),p("div",J,[a(E,null,{default:o(({isHovering:l,props:$})=>[a(z,k({class:"tw-mt-2"},$,{color:l?"accent":"primary",onClick:O,dark:"",disabled:r.value}),{default:o(()=>[M("Exporte")]),_:2},1040,["color","disabled"])]),_:1})])])])]),_:1},8,["errors"])],64)}}};export{ae as default};
