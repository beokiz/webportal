import{d as se}from"./index-fcc78102.js";import{K as ne,k as h,h as re,m as ie,l as de,T as E,r as i,n as ue,o as K,f as ce,a as e,u as d,w as t,F as me,Z as _e,b as c,p,d as f,i as P,t as F,q as pe,c as fe}from"./app-497d87c7.js";import{_ as ve}from"./AuthenticatedLayout-c4259453.js";import{S as be}from"./sortable.esm-0d19b1d3.js";import{a as ge}from"./common-ba477221.js";import"./ApplicationLogo-fbf7ab24.js";const he=c("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Verwalte Subdomäne",-1),we={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ye=c("h3",null,"Eigenschaften",-1),Ve=c("h3",null,"Zugeordnete Meilensteine",-1),xe={class:"tw-flex tw-items-center tw-justify-end"},Se=c("span",{class:"tw-text-h5"},"Neuer Meilenstein",-1),ke=["data-id","data-order"],ze=c("span",null,"neu anordnen",-1),Ce=c("span",null,"Meilenstein bearbeiten",-1),Me=c("span",null,"Meilenstein löschen",-1),De=c("div",{class:"tw-py-6"},[c("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Ae={__name:"ManageSubdomain",props:{subdomain:Object,errors:Object},setup($){const U=$;se.Inertia.on("success",o=>{let l=o.detail.page.props;o.detail.page.component==="Domains/Partials/ManageSubdomain"&&l&&(y.value=l.subdomain)}),ne().props.auth.user;const y=h(U.subdomain),_=h(U.errors||{}),G=h(!1),z=h(!1),L=h(null),C=h(!1),T=h(null),H=[{title:"Kürzel",key:"abbreviation",width:"10%",sortable:!1},{title:"Titel",key:"title",width:"20%",sortable:!1},{title:"Beschreibungstext",key:"text",width:"60%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],J=re(()=>U.subdomain.milestones.map(o=>{const l={...o};for(const s in l)(l[s]===null||l[s]===void 0)&&(l[s]="-");return l}));ie(C,o=>{o||w()}),de(()=>{const o={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(l){Q(l)}};be.create(document.querySelector(".v-data-table tbody"),o)});const w=()=>{C.value=!1,z.value=!1,r.reset(),r.clearErrors(),_.value={}},A=()=>{r.reset(),r.clearErrors(),v.reset(),v.clearErrors(),v.name=null},M=E({items:[]}),Q=o=>{M.processing=!0;let l=[],s=0;[].forEach.call(o.from.querySelectorAll("tr"),function(m,b){m.setAttribute("data-order",s+b),l.push({id:m.getAttribute("data-id"),order:s+b})}),M.items=l,M.post(route("milestones.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:m=>{},onError:m=>{_.value=m},onFinish:()=>{M.processing=!1}})},R=o=>{T.value=o.title,V.id=o.id,z.value=!0},V=E({id:null}),W=async()=>{V.processing=!0;let o={onSuccess:l=>{w()},onError:l=>{_.value=l},onFinish:()=>{V.processing=!1}};V.delete(route("milestones.destroy",{id:V.id}),o)},v=E({id:y.value.id,name:y.value.name}),X=async()=>{v.processing=!0;let o={preserveState:!1,onSuccess:l=>{w()},onError:l=>{_.value=l},onFinish:()=>{v.processing=!1}};v.put(route("subdomains.update",{subdomain:v.id}),o)},r=E({subdomain:y.value.id,abbreviation:null,title:null,text:null,emphasis:null,emphasis_daz:null,age:null}),Y=async()=>{r.processing=!0,r.post(route("milestones.store"),{preserveState:!1,onSuccess:o=>{w()},onError:o=>{_.value=o},onFinish:()=>{r.processing=!1}})};return(o,l)=>{const s=i("v-col"),m=i("v-row"),b=i("v-container"),x=i("v-text-field"),S=i("v-btn"),g=i("v-hover"),D=i("v-btn-primary"),ee=i("v-card-title"),te=i("v-select"),le=i("v-textarea"),B=i("v-card-text"),I=i("v-spacer"),Z=i("v-card-actions"),O=i("v-card"),j=i("v-dialog"),q=i("v-icon"),N=i("v-tooltip"),ae=i("v-data-table-server"),oe=ue("sortable-data-table");return K(),ce(me,null,[e(d(_e),{title:"Verwalte Subdomäne"}),e(ve,{errors:_.value},{header:t(()=>[he]),default:t(()=>[c("div",we,[e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[ye]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(x,{modelValue:d(v).name,"onUpdate:modelValue":l[0]||(l[0]=a=>d(v).name=a),"error-messages":_.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(s,{cols:"12",sm:"6"},{default:t(()=>[e(g,null,{default:t(({isHovering:a,props:u})=>[e(S,p({onClick:A},u,{color:a?"primary":"accent"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:1})]),_:1}),e(s,{cols:"12",sm:"6",align:"right"},{default:t(()=>[e(g,null,{default:t(({isHovering:a,props:u})=>[e(d(P),{href:o.route("domains.show",{id:y.value.domain_id})},{default:t(()=>[e(S,p({class:"mr-2",variant:"text"},u,{color:a?"accent":"primary"}),{default:t(()=>[f("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(g,null,{default:t(({isHovering:a,props:u})=>[e(D,p({onClick:X},u,{color:a?"accent":"primary"}),{default:t(()=>[f("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(m,{class:"tw-border-t-8 tw-mt-8 tw-pt-8"},{default:t(()=>[e(s,{cols:"12",sm:"6"},{default:t(()=>[Ve]),_:1}),e(s,{cols:"12",sm:"6"},{default:t(()=>[c("div",xe,[e(g,null,{default:t(({isHovering:a,props:u})=>[e(S,p(u,{color:a?"accent":"primary",dark:""}),{default:t(()=>[f(" Meilenstein hinzufügen "),e(j,{modelValue:C.value,"onUpdate:modelValue":l[7]||(l[7]=n=>C.value=n),activator:"parent",width:"80vw"},{default:t(()=>[e(O,{height:"80vh"},{default:t(()=>[e(ee,null,{default:t(()=>[Se]),_:1}),e(B,null,{default:t(()=>[e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(s,{cols:"12",sm:"3"},{default:t(()=>[e(x,{modelValue:d(r).abbreviation,"onUpdate:modelValue":l[1]||(l[1]=n=>d(r).abbreviation=n),"error-messages":_.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",sm:"3"},{default:t(()=>[e(te,{modelValue:d(r).age,"onUpdate:modelValue":l[2]||(l[2]=n=>d(r).age=n),items:d(ge),"error-messages":_.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),e(s,{cols:"12",sm:"3"},{default:t(()=>[e(x,{modelValue:d(r).emphasis,"onUpdate:modelValue":l[3]||(l[3]=n=>d(r).emphasis=n),"error-messages":_.value.emphasis,type:"number",label:"Gewichtung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",sm:"3"},{default:t(()=>[e(x,{modelValue:d(r).emphasis_daz,"onUpdate:modelValue":l[4]||(l[4]=n=>d(r).emphasis_daz=n),"error-messages":_.value.emphasis_daz,type:"number",label:"Gewichtung mit Daz*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(x,{modelValue:d(r).title,"onUpdate:modelValue":l[5]||(l[5]=n=>d(r).title=n),"error-messages":_.value.title,label:"Titel*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(le,{modelValue:d(r).text,"onUpdate:modelValue":l[6]||(l[6]=n=>d(r).text=n),"error-messages":_.value.text,label:"Beschreibungstext*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,null,{default:t(()=>[e(g,null,{default:t(({isHovering:n,props:k})=>[e(D,p({onClick:A},k,{color:n?"primary":"accent"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(I),e(g,null,{default:t(({isHovering:n,props:k})=>[e(S,p({onClick:w},k,{color:n?"accent":"primary"}),{default:t(()=>[f("Zurück")]),_:2},1040,["color"])]),_:2},1024),e(g,null,{default:t(({isHovering:n,props:k})=>[e(D,p({onClick:Y},k,{color:n?"accent":"primary"}),{default:t(()=>[f("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(j,{modelValue:z.value,"onUpdate:modelValue":l[8]||(l[8]=a=>z.value=a),width:"20vw"},{default:t(()=>[e(O,{height:"30vh"},{default:t(()=>[e(B,null,{default:t(()=>[e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[c("p",null,"Sind Sie sicher, dass Sie den Meilenstein "+F(T.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,null,{default:t(()=>[e(I),e(g,null,{default:t(({isHovering:a,props:u})=>[e(S,p({onClick:w},u,{color:a?"accent":"primary"}),{default:t(()=>[f("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(g,null,{default:t(({isHovering:a,props:u})=>[e(D,p({onClick:W},u,{color:a?"accent":"primary"}),{default:t(()=>[f("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[pe((K(),fe(ae,{"items-per-page":-1,headers:H,items:J.value,loading:G.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:t(({item:a})=>[c("tr",{"data-id":a.selectable.id,"data-order":a.selectable.order},[c("td",null,F(a.selectable.abbreviation),1),c("td",null,F(a.selectable.title),1),c("td",null,F(a.selectable.text),1),c("td",null,[e(N,{location:"top"},{activator:t(({props:u})=>[e(q,p({draggable:"true",onDragstart:n=>L.value=a.raw,color:"primary"},u,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:t(()=>[f("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:t(()=>[ze]),_:2},1024),e(N,{location:"top"},{activator:t(({props:u})=>[e(d(P),{href:o.route("milestones.show",{id:a.selectable.id})},{default:t(()=>[e(q,p(u,{size:"small",class:"tw-me-2"}),{default:t(()=>[f("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[Ce]),_:2},1024),e(N,{location:"top"},{activator:t(({props:u})=>[e(q,p(u,{size:"small",class:"tw-me-2",onClick:n=>R(a.raw)}),{default:t(()=>[f("mdi-delete ")]),_:2},1040,["onClick"])]),default:t(()=>[Me]),_:2},1024)])],8,ke)]),"no-data":t(()=>[De]),_:1},8,["items","loading"])),[[oe]])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Ae as default};
