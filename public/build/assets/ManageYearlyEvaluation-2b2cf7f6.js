import{d as W}from"./index-82fa8462.js";import{K as G,k as y,h as U,T as Q,r as s,f as w,a as e,u as n,w as a,F as X,o as h,Z as ee,b as p,t as g,c as A,g as v,i as ae,p as K,d as x}from"./app-75f613fc.js";import{_ as le}from"./AuthenticatedLayout-9bf26adc.js";import{W as E}from"./WarningEvaluationTooltip-ccc57cdf.js";import"./ApplicationLogo-8ab043d2.js";const te={class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},re={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ne=p("h3",null,"Rückmeldung betrifft",-1),_e=p("h3",null,"Angaben zur Rückmeldung",-1),oe=p("h5",null,"Kinder bis 2,5 Jahre",-1),ie=p("h5",null,"Kinder bis 4,5 Jahre",-1),se=p("h4",null,"Wir haben eine Abweichung zwischen der Anzahl der von Ihnen gemeldeten Kinder und der Anzahl über die BeoKiz-Ampel erfassten Kindern festgestellt:",-1),ue={class:"tw-flex tw-items-center tw-mt-2"},de={style:{"list-style-type":"disc","margin-left":"25px"}},me={key:0},ce={key:1},he={key:2},ge={key:3},we={__name:"ManageYearlyEvaluation",props:{yearlyEvaluation:Object,errors:Object,kitas:Array,surveyTimePeriods:Array},setup(z){const b=z;W.Inertia.on("success",o=>{let t=o.detail.page.props;o.detail.page.component==="YearlyEvaluations/Partials/ManageYearlyEvaluation"&&t&&(u.value=t.yearlyEvaluation)}),G().props.auth.user;const u=y(b.yearlyEvaluation),d=y(b.errors||{});y(!1);const V=y(!1),B=y(!1),S=y(!1);U(()=>b.yearlyEvaluation.map(o=>{const t={...o};for(const _ in t)(t[_]===null||t[_]===void 0)&&(t[_]="-");return t}));const C=U(()=>T("2.5")),M=U(()=>T("4.5")),l=Q({id:u.value.id,year:u.value.year,kita_id:u.value.kita_id,children_2_born_per_year:u.value.children_2_born_per_year,children_2_with_german_lang:u.value.children_2_with_german_lang,evaluations_with_daz_2_total_per_year:u.value.evaluations_with_daz_2_total_per_year,children_2_with_foreign_lang:u.value.children_2_with_foreign_lang,evaluations_without_daz_2_total_per_year:u.value.evaluations_without_daz_2_total_per_year,children_4_born_per_year:u.value.children_4_born_per_year,children_4_with_german_lang:u.value.children_4_with_german_lang,evaluations_with_daz_4_total_per_year:u.value.evaluations_with_daz_4_total_per_year,children_4_with_foreign_lang:u.value.children_4_with_foreign_lang,evaluations_without_daz_4_total_per_year:u.value.evaluations_without_daz_4_total_per_year}),q=()=>{V.value=!1},P=()=>{B.value=!0,q()},O=async()=>{(c("2_german")||c("2_foreign")||c("4_german")||c("4_foreign"))&&!B.value?V.value=!0:await R()},c=o=>{if(o==="2_german")return parseInt(l.evaluations_with_daz_2_total_per_year)!==parseInt(l.children_2_with_german_lang);if(o==="2_foreign")return parseInt(l.evaluations_without_daz_2_total_per_year)!==parseInt(l.children_2_with_foreign_lang);if(o==="4_german")return parseInt(l.evaluations_with_daz_4_total_per_year)!==parseInt(l.children_4_with_german_lang);if(o==="4_foreign")return parseInt(l.evaluations_without_daz_4_total_per_year)!==parseInt(l.children_4_with_foreign_lang)},R=async()=>{l.processing=!0;let o={preserveState:!1,onSuccess:t=>{},onError:t=>{d.value=t},onFinish:()=>{l.processing=!1}};l.put(route("yearly_evaluations.update",{id:l.id}),o)},T=o=>{if(o==="2.5"||o==="4.5"){let t=b.surveyTimePeriods.find(_=>_.year===parseInt(l.year)&&_.age==="4.5");if(t){let _=new Date(t.survey_start_date),i=new Date(t.survey_end_date),D=_.getFullYear()+"-"+("0"+(_.getMonth()+1)).slice(-2)+"-"+("0"+_.getDate()).slice(-2),m=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);return`Gesamtzahl der im Zeitraum ${D} - ${m} geborenen Kinder`}}return"Gesamtzahl der Kinder"};return(o,t)=>{const _=s("v-col"),i=s("v-text-field"),D=s("v-select"),m=s("v-row"),I=s("v-card"),Y=s("v-btn"),k=s("v-hover"),F=s("v-btn-primary"),J=s("v-container"),H=s("v-icon"),N=s("v-checkbox"),Z=s("v-card-text"),$=s("v-spacer"),j=s("v-card-actions"),L=s("v-dialog");return h(),w(X,null,[e(n(ee),{title:`Verwalte Jährliche Rückmeldung ${z.yearlyEvaluation.year}`},null,8,["title"]),e(le,{errors:d.value},{header:a(()=>[p("h2",te,"Jährliche Rückmeldung "+g(z.yearlyEvaluation.year),1)]),default:a(()=>[p("div",re,[e(J,null,{default:a(()=>[e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"12"},{default:a(()=>[ne]),_:1}),e(_,{cols:"12",sm:"4"},{default:a(()=>[e(i,{modelValue:n(l).year,"onUpdate:modelValue":t[0]||(t[0]=r=>n(l).year=r),"error-messages":d.value.year,label:"Jahr der Rückmeldung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"4"},{default:a(()=>[e(D,{modelValue:n(l).kita_id,"onUpdate:modelValue":t[1]||(t[1]=r=>n(l).kita_id=r),items:z.kitas,"error-messages":d.value.kita_id,"item-title":"name","item-value":"id",label:"Kita*"},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"12"},{default:a(()=>[_e]),_:1}),e(_,{cols:"12",sm:"6"},{default:a(()=>[e(I,{class:"tw-p-6"},{default:a(()=>[oe,e(i,{modelValue:n(l).children_2_born_per_year,"onUpdate:modelValue":t[2]||(t[2]=r=>n(l).children_2_born_per_year=r),"error-messages":d.value.children_2_born_per_year,label:C.value,type:"number",required:""},null,8,["modelValue","error-messages","label"]),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"7"},{default:a(()=>[e(i,{modelValue:n(l).children_2_with_german_lang,"onUpdate:modelValue":t[3]||(t[3]=r=>n(l).children_2_with_german_lang=r),"error-messages":d.value.children_2_with_german_lang,label:"Kinder mit deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"5"},{default:a(()=>[e(m,null,{default:a(()=>[c("2_german")?(h(),A(E,{key:0})):v("",!0),e(_,{cols:"12",sm:"10"},{default:a(()=>[e(i,{modelValue:n(l).evaluations_with_daz_2_total_per_year,"onUpdate:modelValue":t[4]||(t[4]=r=>n(l).evaluations_with_daz_2_total_per_year=r),"error-messages":d.value.evaluations_with_daz_2_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"7"},{default:a(()=>[e(i,{modelValue:n(l).children_2_with_foreign_lang,"onUpdate:modelValue":t[5]||(t[5]=r=>n(l).children_2_with_foreign_lang=r),"error-messages":d.value.children_2_with_foreign_lang,label:"Kinder mit nicht deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"5"},{default:a(()=>[e(m,null,{default:a(()=>[c("2_foreign")?(h(),A(E,{key:0})):v("",!0),e(_,{cols:"12",sm:"10"},{default:a(()=>[e(i,{modelValue:n(l).evaluations_without_daz_2_total_per_year,"onUpdate:modelValue":t[6]||(t[6]=r=>n(l).evaluations_without_daz_2_total_per_year=r),"error-messages":d.value.evaluations_without_daz_2_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{cols:"12",sm:"6"},{default:a(()=>[e(I,{class:"tw-p-6"},{default:a(()=>[ie,e(i,{modelValue:n(l).children_4_born_per_year,"onUpdate:modelValue":t[7]||(t[7]=r=>n(l).children_4_born_per_year=r),"error-messages":d.value.children_4_born_per_year,label:M.value,type:"number",required:""},null,8,["modelValue","error-messages","label"]),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"7"},{default:a(()=>[e(i,{modelValue:n(l).children_4_with_german_lang,"onUpdate:modelValue":t[8]||(t[8]=r=>n(l).children_4_with_german_lang=r),"error-messages":d.value.children_4_with_german_lang,label:"Kinder mit deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"5"},{default:a(()=>[e(m,null,{default:a(()=>[c("4_german")?(h(),A(E,{key:0})):v("",!0),e(_,{cols:"12",sm:"10"},{default:a(()=>[e(i,{modelValue:n(l).evaluations_with_daz_4_total_per_year,"onUpdate:modelValue":t[9]||(t[9]=r=>n(l).evaluations_with_daz_4_total_per_year=r),"error-messages":d.value.evaluations_with_daz_4_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"7"},{default:a(()=>[e(i,{modelValue:n(l).children_4_with_foreign_lang,"onUpdate:modelValue":t[10]||(t[10]=r=>n(l).children_4_with_foreign_lang=r),"error-messages":d.value.children_4_with_foreign_lang,label:"Kinder mit nicht deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"5"},{default:a(()=>[e(m,null,{default:a(()=>[c("4_foreign")?(h(),A(E,{key:0})):v("",!0),e(_,{cols:"12",sm:"10"},{default:a(()=>[e(i,{modelValue:n(l).evaluations_without_daz_4_total_per_year,"onUpdate:modelValue":t[11]||(t[11]=r=>n(l).evaluations_without_daz_4_total_per_year=r),"error-messages":d.value.evaluations_without_daz_4_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"12",align:"right"},{default:a(()=>[e(k,null,{default:a(({isHovering:r,props:f})=>[e(n(ae),{href:o.route("yearly_evaluations.index")},{default:a(()=>[e(Y,K({class:"mr-2",variant:"text"},f,{color:r?"accent":"primary"}),{default:a(()=>[x("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(k,null,{default:a(({isHovering:r,props:f})=>[e(F,K({onClick:O},f,{color:r?"accent":"primary"}),{default:a(()=>[x("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,{modelValue:V.value,"onUpdate:modelValue":t[13]||(t[13]=r=>V.value=r),width:"80vw"},{default:a(()=>[e(I,{height:"50vh"},{default:a(()=>[e(Z,null,{default:a(()=>[e(J,null,{default:a(()=>[e(m,null,{default:a(()=>[e(_,{cols:"12"},{default:a(()=>[se,p("div",ue,[e(H,K(b,{icon:"mdi-alert",color:"orange"}),null,16),p("ul",de,[c("2_german")?(h(),w("li",me," Die Anzahl der Kinder im Alter bis 2,5 Jahre welche Deutsch als Fremdsprache haben Sie mit "+g(n(l).children_2_with_german_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(n(l).evaluations_with_daz_2_total_per_year),1)):v("",!0),c("2_foreign")?(h(),w("li",ce," Die Anzahl der Kinder im Alter bis 2,5 Jahre welche Deutsch als Muttersprache haben Sie mit "+g(n(l).children_2_with_foreign_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(n(l).evaluations_without_daz_2_total_per_year),1)):v("",!0),c("4_german")?(h(),w("li",he," Die Anzahl der Kinder im Alter bis 4,5 Jahre welche Deutsch als Fremdsprache haben Sie mit "+g(n(l).children_4_with_german_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(n(l).evaluations_with_daz_2_total_per_year),1)):v("",!0),c("4_foreign")?(h(),w("li",ge," Die Anzahl der Kinder im Alter bis 4,5 Jahre welche Deutsch als Muttersprache haben Sie mit "+g(n(l).children_4_with_foreign_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(n(l).evaluations_without_daz_4_total_per_year),1)):v("",!0)])]),e(N,{modelValue:S.value,"onUpdate:modelValue":t[12]||(t[12]=r=>S.value=r),label:"Ich habe verstanden, dass es Unstimmigkeiten bei dem Abgelich der gemelden Zahlen gibt, Statusmeldung dennoch absenden."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(j,null,{default:a(()=>[e($),e(k,null,{default:a(({isHovering:r,props:f})=>[e(Y,{onClick:q,color:r?"accent":"primary"},{default:a(()=>[x("Abbrechen")]),_:2},1032,["color"])]),_:1}),e(k,null,{default:a(({isHovering:r,props:f})=>[e(F,K({disabled:!S.value,onClick:P},f,{color:r?"accent":"primary"}),{default:a(()=>[x("Speichern")]),_:2},1040,["disabled","color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["errors"])],64)}}};export{we as default};
