import{d as se}from"./index-3619d72f.js";import{K as ne,k as h,h as re,m as de,l as ue,T as F,r as d,n as ie,o as K,f as ce,a as e,u,w as t,F as me,Z as _e,b as c,p,d as f,i as P,t as M,q as pe,c as fe}from"./app-78d092c9.js";import{_ as ve}from"./AuthenticatedLayout-d6c99f85.js";import{S as be}from"./sortable.esm-0d19b1d3.js";import{a as ge}from"./common-ba477221.js";import"./ApplicationLogo-d782177b.js";const he=c("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Verwalte Subdomäne",-1),we={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ye=c("h3",null,"Eigenschaften",-1),Se=c("h3",null,"Zugeordnete Meilensteine",-1),Ve={class:"tw-flex tw-items-center tw-justify-end"},xe=c("span",{class:"tw-text-h5"},"Neue Subdomäne",-1),ke=["data-id","data-order"],ze=c("span",null,"neu anordnen",-1),Ce=c("span",null,"Subdomäne anzeigen",-1),De=c("span",null,"Subdomäne löschen",-1),Ee=c("div",{class:"tw-py-6"},[c("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Ae={__name:"ManageSubdomain",props:{subdomain:Object,errors:Object},setup($){const U=$;se.Inertia.on("success",o=>{let l=o.detail.page.props;o.detail.page.component==="Domains/Partials/ManageSubdomain"&&l&&(y.value=l.subdomain)}),ne().props.auth.user;const y=h(U.subdomain),_=h(U.errors||{}),G=h(!1),z=h(!1),L=h(null),C=h(!1),T=h(null),H=[{title:"Kürzel",key:"abbreviation",width:"10%",sortable:!1},{title:"Titel",key:"title",width:"20%",sortable:!1},{title:"Subtext",key:"text",width:"60%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],J=re(()=>U.subdomain.milestones.map(o=>{const l={...o};for(const s in l)(l[s]===null||l[s]===void 0)&&(l[s]="-");return l}));de(C,o=>{o||w()}),ue(()=>{const o={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(l){Q(l)}};be.create(document.querySelector(".v-data-table tbody"),o)});const w=()=>{C.value=!1,z.value=!1,r.reset(),r.clearErrors(),_.value={}},A=()=>{r.reset(),r.clearErrors(),v.reset(),v.clearErrors(),v.name=null},D=F({items:[]}),Q=o=>{D.processing=!0;let l=[],s=0;[].forEach.call(o.from.querySelectorAll("tr"),function(m,b){m.setAttribute("data-order",s+b),l.push({id:m.getAttribute("data-id"),order:s+b})}),D.items=l,D.post(route("milestones.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:m=>{},onError:m=>{_.value=m},onFinish:()=>{D.processing=!1}})},R=o=>{T.value=o.title,S.id=o.id,z.value=!0},S=F({id:null}),W=async()=>{S.processing=!0;let o={onSuccess:l=>{w()},onError:l=>{_.value=l},onFinish:()=>{S.processing=!1}};S.delete(route("milestones.destroy",{id:S.id}),o)},v=F({id:y.value.id,name:y.value.name}),X=async()=>{v.processing=!0;let o={preserveState:!1,onSuccess:l=>{w()},onError:l=>{_.value=l},onFinish:()=>{v.processing=!1}};v.put(route("subdomains.update",{subdomain:v.id}),o)},r=F({subdomain:y.value.id,abbreviation:null,title:null,text:null,emphasis:null,emphasis_daz:null,age:null}),Y=async()=>{r.processing=!0,r.post(route("milestones.store"),{preserveState:!1,onSuccess:o=>{w()},onError:o=>{_.value=o},onFinish:()=>{r.processing=!1}})};return(o,l)=>{const s=d("v-col"),m=d("v-row"),b=d("v-container"),V=d("v-text-field"),x=d("v-btn"),g=d("v-hover"),E=d("v-btn-primary"),ee=d("v-card-title"),te=d("v-select"),le=d("v-textarea"),I=d("v-card-text"),Z=d("v-spacer"),O=d("v-card-actions"),B=d("v-card"),j=d("v-dialog"),q=d("v-icon"),N=d("v-tooltip"),ae=d("v-data-table-server"),oe=ie("sortable-data-table");return K(),ce(me,null,[e(u(_e),{title:"Manage Subdomain"}),e(ve,{errors:_.value},{header:t(()=>[he]),default:t(()=>[c("div",we,[e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[ye]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(V,{modelValue:u(v).name,"onUpdate:modelValue":l[0]||(l[0]=a=>u(v).name=a),"error-messages":_.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(s,{cols:"12",sm:"6"},{default:t(()=>[e(g,null,{default:t(({isHovering:a,props:i})=>[e(x,p({onClick:A},i,{color:a?"primary":"accent"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:1})]),_:1}),e(s,{cols:"12",sm:"6",align:"right"},{default:t(()=>[e(g,null,{default:t(({isHovering:a,props:i})=>[e(u(P),{href:o.route("domains.show",{id:y.value.domain_id})},{default:t(()=>[e(x,p({class:"mr-2",variant:"text"},i,{color:a?"accent":"primary"}),{default:t(()=>[f("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(g,null,{default:t(({isHovering:a,props:i})=>[e(E,p({onClick:X},i,{color:a?"accent":"primary"}),{default:t(()=>[f("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(m,{class:"tw-border-t-8 tw-mt-8 tw-pt-8"},{default:t(()=>[e(s,{cols:"12",sm:"6"},{default:t(()=>[Se]),_:1}),e(s,{cols:"12",sm:"6"},{default:t(()=>[c("div",Ve,[e(g,null,{default:t(({isHovering:a,props:i})=>[e(x,p(i,{color:a?"accent":"primary",dark:""}),{default:t(()=>[f(" Meilenstein hinzufügen "),e(j,{modelValue:C.value,"onUpdate:modelValue":l[7]||(l[7]=n=>C.value=n),activator:"parent",width:"80vw"},{default:t(()=>[e(B,{height:"80vh"},{default:t(()=>[e(ee,null,{default:t(()=>[xe]),_:1}),e(I,null,{default:t(()=>[e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(s,{cols:"12",sm:"3"},{default:t(()=>[e(V,{modelValue:u(r).abbreviation,"onUpdate:modelValue":l[1]||(l[1]=n=>u(r).abbreviation=n),"error-messages":_.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",sm:"3"},{default:t(()=>[e(te,{modelValue:u(r).age,"onUpdate:modelValue":l[2]||(l[2]=n=>u(r).age=n),items:u(ge),"error-messages":_.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),e(s,{cols:"12",sm:"3"},{default:t(()=>[e(V,{modelValue:u(r).emphasis,"onUpdate:modelValue":l[3]||(l[3]=n=>u(r).emphasis=n),"error-messages":_.value.emphasis,type:"number",label:"Gewichtung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",sm:"3"},{default:t(()=>[e(V,{modelValue:u(r).emphasis_daz,"onUpdate:modelValue":l[4]||(l[4]=n=>u(r).emphasis_daz=n),"error-messages":_.value.emphasis_daz,type:"number",label:"Gewichtung mit Daz*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(V,{modelValue:u(r).title,"onUpdate:modelValue":l[5]||(l[5]=n=>u(r).title=n),"error-messages":_.value.title,label:"Titel*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(le,{modelValue:u(r).text,"onUpdate:modelValue":l[6]||(l[6]=n=>u(r).text=n),"error-messages":_.value.text,label:"Subtext*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(g,null,{default:t(({isHovering:n,props:k})=>[e(E,p({onClick:A},k,{color:n?"primary":"accent"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(Z),e(g,null,{default:t(({isHovering:n,props:k})=>[e(x,p({onClick:w},k,{color:n?"accent":"primary"}),{default:t(()=>[f("Zurück")]),_:2},1040,["color"])]),_:2},1024),e(g,null,{default:t(({isHovering:n,props:k})=>[e(E,p({onClick:Y},k,{color:n?"accent":"primary"}),{default:t(()=>[f("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(j,{modelValue:z.value,"onUpdate:modelValue":l[8]||(l[8]=a=>z.value=a),width:"20vw"},{default:t(()=>[e(B,{height:"30vh"},{default:t(()=>[e(I,null,{default:t(()=>[e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[c("p",null,"Sind Sie sicher, dass Sie den Meilenstein "+M(T.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(Z),e(g,null,{default:t(({isHovering:a,props:i})=>[e(x,p({onClick:w},i,{color:a?"accent":"primary"}),{default:t(()=>[f("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(g,null,{default:t(({isHovering:a,props:i})=>[e(E,p({onClick:W},i,{color:a?"accent":"primary"}),{default:t(()=>[f("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[pe((K(),fe(ae,{"items-per-page":-1,headers:H,items:J.value,loading:G.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:t(({item:a})=>[c("tr",{"data-id":a.selectable.id,"data-order":a.selectable.order},[c("td",null,M(a.selectable.abbreviation),1),c("td",null,M(a.selectable.title),1),c("td",null,M(a.selectable.text),1),c("td",null,[e(N,{location:"top"},{activator:t(({props:i})=>[e(q,p({draggable:"true",onDragstart:n=>L.value=a.raw,color:"primary"},i,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:t(()=>[f("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:t(()=>[ze]),_:2},1024),e(N,{location:"top"},{activator:t(({props:i})=>[e(u(P),{href:o.route("milestones.show",{id:a.selectable.id})},{default:t(()=>[e(q,p(i,{size:"small",class:"tw-me-2"}),{default:t(()=>[f("mdi-eye")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[Ce]),_:2},1024),e(N,{location:"top"},{activator:t(({props:i})=>[e(q,p(i,{size:"small",class:"tw-me-2",onClick:n=>R(a.raw)}),{default:t(()=>[f("mdi-delete ")]),_:2},1040,["onClick"])]),default:t(()=>[De]),_:2},1024)])],8,ke)]),"no-data":t(()=>[Ee]),_:1},8,["items","loading"])),[[oe]])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Ae as default};
