import{d as K}from"./index-3a5657d8.js";import{K as Z,k as A,l as q,T as H,r as g,o as f,f as k,a as n,u as h,w as o,F as C,Z as L,b as t,s as z,p as B,d as U,t as x,v as M}from"./app-66a29d2f.js";import{_ as O}from"./AuthenticatedLayout-0d7ee5dd.js";import{a as P}from"./common-ba477221.js";import"./ApplicationLogo-3bb30af4.js";let V;const W=new Uint8Array(16);function G(){if(!V&&(V=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!V))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return V(W)}const l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function J(e,a=0){return l[e[a+0]]+l[e[a+1]]+l[e[a+2]]+l[e[a+3]]+"-"+l[e[a+4]]+l[e[a+5]]+"-"+l[e[a+6]]+l[e[a+7]]+"-"+l[e[a+8]]+l[e[a+9]]+"-"+l[e[a+10]]+l[e[a+11]]+l[e[a+12]]+l[e[a+13]]+l[e[a+14]]+l[e[a+15]]}const Q=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),N={randomUUID:Q};function X(e,a,w){if(N.randomUUID&&!a&&!e)return N.randomUUID();e=e||{};const _=e.random||(e.rng||G)();if(_[6]=_[6]&15|64,_[8]=_[8]&63|128,a){w=w||0;for(let p=0;p<16;++p)a[w+p]=_[p];return a}return J(_)}const Y=t("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},x("Create"),-1),ee={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},te=t("h3",null,"Eigenschaften",-1),ne={class:"subdomains-list-head"},ae=t("div",{class:"radio-wrap radio-head"},[t("span",null,"Noch Nicht")],-1),oe=t("div",{class:"radio-wrap radio-head"},[t("span",null,"Ansatzweise")],-1),se=t("div",{class:"radio-wrap radio-head"},[t("span",null,"Weitgehend")],-1),le=t("div",{class:"radio-wrap radio-head"},[t("span",null,"Zuverlassig")],-1),ie={class:"milestone-list-text"},re={class:"radio-wrap radio-content"},de=["name","onClick"],ce={class:"radio-wrap radio-content"},ue=["name","onClick"],me={class:"radio-wrap radio-content"},_e=["name","onClick"],pe={class:"radio-wrap radio-content"},ve=["name","onClick"],xe={__name:"CreateEvaluation",props:{errors:Object,kitas:Array,domains:Array},setup(e){const a=e;K.Inertia.on("success",r=>{r.detail.page.props,r.detail.page.component});const w=Z().props.auth.user??{},_=A(null);A(!1),q(()=>{_.value=X(),i.uuid=_.value;let r=[];a.domains.forEach(function(c,d){r[d]={domain:c.id,milestones:[]},c.subdomains.forEach(function(m,v){m.milestones.forEach(function(b,D){r[d].milestones.push({id:b.id,value:null})})})}),i.ratings=r});const p=(r,c,d)=>{let m=i.ratings.findIndex(function(v){return v.domain===r});if(m!==-1){let v=i.ratings[m].milestones.findIndex(function(b){return b.id===c});v!==-1?i.ratings[m].milestones[v].value=d:i.ratings[m].milestones.push({id:c,value:d})}else i.ratings.push({domain:r,milestones:[{id:c,value:d}]})},i=H({age:null,uuid:null,is_daz:!1,user_id:w.id,kita_id:null,ratings:[]}),R=async()=>{i.processing=!0,i.post(route("evaluations.store"),{onSuccess:r=>{close()},onError:r=>{errors.value=r},onFinish:()=>{i.processing=!1}})};return(r,c)=>{const d=g("v-col"),m=g("v-row"),v=g("v-container"),b=g("v-text-field"),D=g("v-select"),F=g("v-checkbox"),S=g("v-btn"),E=g("v-hover"),T=g("v-btn-primary");return f(),k(C,null,[n(h(L),{title:"Create"}),n(O,{errors:e.errors},{header:o(()=>[Y]),default:o(()=>[t("div",ee,[n(v,null,{default:o(()=>[n(m,null,{default:o(()=>[n(d,{cols:"12"},{default:o(()=>[te]),_:1})]),_:1})]),_:1}),n(v,null,{default:o(()=>[n(m,null,{default:o(()=>[n(d,{cols:"12",sm:"4"},{default:o(()=>[n(b,{modelValue:h(i).uuid,"onUpdate:modelValue":c[0]||(c[0]=s=>h(i).uuid=s),"error-messages":e.errors.uuid,readonly:"",label:"Bezeichner der Einschatzung",required:""},null,8,["modelValue","error-messages"])]),_:1}),n(d,{cols:"12",sm:"3"},{default:o(()=>[n(D,{modelValue:h(i).age,"onUpdate:modelValue":c[1]||(c[1]=s=>h(i).age=s),items:h(P),"error-messages":e.errors.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),n(d,{cols:"12",sm:"3"},{default:o(()=>[n(D,{modelValue:h(i).kita_id,"onUpdate:modelValue":c[2]||(c[2]=s=>h(i).kita_id=s),items:e.kitas,"error-messages":e.errors.kita_id,"item-title":"name","item-value":"id",label:"Kita"},null,8,["modelValue","items","error-messages"])]),_:1}),n(d,{cols:"12",sm:"2"},{default:o(()=>[n(F,{label:"Ist Daz"})]),_:1})]),_:1}),n(m,null,{default:o(()=>[(f(!0),k(C,null,z(e.domains,(s,y)=>(f(),k("div",{class:"domains-list-container",key:s.id},[t("h3",null,x(s.name),1),(f(!0),k(C,null,z(s.subdomains,I=>(f(),k("div",{class:"subdomains-list-container",key:I.id},[t("div",ne,[t("h4",null,x(I.name),1),ae,oe,se,le]),(f(!0),k(C,null,z(I.milestones,(u,j)=>(f(),k("div",{class:"milestone-list-container",key:u.id},[t("h5",null,x(u.abbreviation),1),t("div",ie,[t("span",null,x(u.title),1),t("p",null,x(u.text),1)]),t("fieldset",{class:M({error:e.errors[`ratings.${y}.milestones.${j}.value`]})},[t("div",re,[U(x("")+" "),t("input",{type:"radio",name:u.id+"check-radio",value:"1",onClick:$=>p(s.id,u.id,1)},null,8,de)]),t("div",ce,[t("input",{type:"radio",name:u.id+"check-radio",value:"2",onClick:$=>p(s.id,u.id,2)},null,8,ue)]),t("div",me,[t("input",{type:"radio",name:u.id+"check-radio",value:"3",onClick:$=>p(s.id,u.id,3)},null,8,_e)]),t("div",pe,[t("input",{type:"radio",name:u.id+"check-radio",value:"4",onClick:$=>p(s.id,u.id,4)},null,8,ve)])],2)]))),128))]))),128))]))),128))]),_:1})]),_:1}),n(v,null,{default:o(()=>[n(m,null,{default:o(()=>[n(d,{cols:"12",sm:"6"},{default:o(()=>[n(E,null,{default:o(({isHovering:s,props:y})=>[n(S,B({onClick:r.clear},y,{color:s?"primary":"accent"}),{default:o(()=>[U("Back")]),_:2},1040,["onClick","color"])]),_:1})]),_:1}),n(d,{cols:"12",sm:"6",align:"right"},{default:o(()=>[n(E,null,{default:o(({isHovering:s,props:y})=>[n(S,B({class:"mr-2",variant:"text"},y,{color:s?"accent":"primary"}),{default:o(()=>[U("Save")]),_:2},1040,["color"])]),_:1}),n(E,null,{default:o(({isHovering:s,props:y})=>[n(T,B({onClick:R},y,{color:s?"accent":"primary"}),{default:o(()=>[U("Big save ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{xe as default};
