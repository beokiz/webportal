import{d as Le}from"./index-33f8a7ef.js";import{k as i,m as I,r as u,o as V,f as N,a as t,K as Be,h as Ve,T as U,n as qe,u as d,w as e,F as de,Z as Me,b as n,p as c,d as m,t as F,q as Se,c as H,i as ke,x as De,g as Ze,O as Je}from"./app-d06def85.js";import{_ as Re}from"./AuthenticatedLayout-619658ea.js";import{b as Ee,a as Ge,c as Fe,f as We}from"./common-1f9d3448.js";import"./ApplicationLogo-c96d935c.js";const Ke={class:"vuetify-pro-tiptap-wrap"},Qe={__name:"TiptapEditor",props:{modelValue:{type:String},label:{type:String,default:null},minHeight:{type:Number,default:200},maxHeight:{type:Number,default:465},maxWidth:{type:Number,default:900}},emits:["update:modelValue"],setup(k,{emit:g}){const S=i(k.modelValue);return I(S,L=>{g("update:modelValue",L)}),(L,B)=>{const te=u("VuetifyTiptap");return V(),N("div",Ke,[t(te,{modelValue:S.value,"onUpdate:modelValue":B[0]||(B[0]=le=>S.value=le),label:k.label,"min-height":k.minHeight,"max-height":k.maxHeight,"max-width":k.maxWidth},null,8,["modelValue","label","min-height","max-height","max-width"])])}}},Xe=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einstellungen",-1),Ye={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},et={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},tt=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Rückmeldungszeiträume",-1),lt={class:"tw-flex tw-items-center tw-justify-end"},at=n("span",{class:"tw-text-h5"},"Neuer Rückmeldezeitraum",-1),ot=["data-id","data-order"],nt={align:"center"},st=n("span",null,"Einstellungen bearbeiten",-1),rt=n("span",null,"Einstellungen löschen",-1),it=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),dt={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},ut=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"E-Mail Einstellungen",-1),ct={class:"tw-flex tw-items-center tw-justify-start"},mt={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},_t={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},pt=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Dateien für den Downloadbereich",-1),vt={class:"tw-flex tw-items-center tw-justify-end"},ft=n("span",{class:"tw-text-h5"},"Neue Datei zum Downloadbereich hinzufügen",-1),gt=["data-id","data-order"],wt={align:"center"},bt=["href"],ht=n("span",null,"Datei herunterladen",-1),yt=n("span",null,"Datei bearbeiten",-1),xt=n("span",null,"Datei löschen",-1),Vt=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),St={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},kt=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"Text auf Login Seite",-1),Dt={class:"tw-flex tw-items-center tw-justify-start"},Nt={__name:"Settings",props:{surveyTimePeriods:Array,downloadableFiles:Array,emailSettings:Object,loginSettings:Object,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(k){const g=k;Le.Inertia.on("success",s=>{let l=s.detail.page.props;s.detail.page.component==="SurveyTimePeriods/SurveyTimePeriods"&&l&&(ee.value=l.currentPage,S.value=l.perPage,L.value=l.orderBy,B.value=l.sort,te.value=l.total,le.value=l.lastPage,ue.value=l.filters.search??null)}),Be().props.auth.user;const ee=i(g.currentPage),S=i(g.perPage),L=i(g.orderBy),B=i(g.sort),te=i(g.total),le=i(g.lastPage),ue=i(g.filters.search??null),ce=i(""),f=i(g.errors||{}),q=i(!1),ae=i(!1),oe=i(!1),M=i(!1),Z=i(!1),J=i(!1),R=i(!1),me=i(null),_e=i(null),ne=i(null),se=i(null),C=i(),z=i(),pe=i({send_yearly_evaluation_reminder_ntf_before_days:"Anzahl der Tage vor Ende des Bewertungszeitraums für den Versand der Erinnerungsmails"}),Pe=[{title:"Jahr",key:"year",width:"10%",sortable:!0},{title:"Altersgruppe (Jahre)",key:"age",width:"15%",sortable:!0},{title:"Erhebungsbeginn",key:"survey_start_date",width:"15%",sortable:!0},{title:"Erhebungsende",key:"survey_end_date",width:"50%",sortable:!0},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],Te=[{title:"Name",key:"name",width:"42.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"42.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}],Ue=Ve(()=>ve(g.surveyTimePeriods)),Ne=Ve(()=>ve(g.downloadableFiles));I(M,s=>{s||h()}),I(Z,s=>{s||h()});const ve=s=>s.map(l=>{const v={...l};for(const _ in v)(v[_]===null||v[_]===void 0)&&(v[_]="-");return v}),h=()=>{M.value=!1,Z.value=!1,J.value=!1,R.value=!1,re(),f.value={}},re=()=>{x.reset(),x.clearErrors(),b.reset(),b.clearErrors(),ne.value=null,se.value=null},fe=async({page:s,itemsPerPage:l,sortBy:v})=>{q.value=!0;let _={data:{page:s,per_page:l}};v&&v.length>0&&(_.data.order_by=v[0].key,_.data.sort=v[0].order),_.data.search=ue.value,await Je.reload(_),ee.value=s,S.value=l,q.value=!1};I(C,s=>{ne.value=Ee(s)}),I(z,s=>{se.value=Ee(s)});const Ce=s=>{j.id=s.id,me.value=s.year,J.value=!0},x=U({year:null,age:null,survey_start_date:null,survey_end_date:null}),j=U({id:null}),ze=async()=>{x.processing=!0,x.survey_start_date=new Date(C.value).toLocaleString(),x.survey_end_date=new Date(z.value).toLocaleString(),x.post(route("survey_time_periods.store"),{onSuccess:s=>{h()},onError:s=>{f.value=s},onFinish:()=>{x.processing=!1}})},je=async()=>{j.processing=!0;let s={onSuccess:l=>{h()},onError:l=>{h(),f.value=l},onFinish:()=>{j.processing=!1}};j.delete(route("downloadable_files.destroy",{id:j.id}),s)},ie=U({settings:g.emailSettings}),A=U({settings:g.loginSettings}),ge=async s=>{let l=s==="login"?A:ie;l.processing=!0;let v={preserveScroll:!0,preserveState:!0,onSuccess:_=>{},onError:_=>{f.value=_},onFinish:()=>{l.processing=!1}};l.post(route("settings.update"),v)},Ae=s=>{P.id=s.id,_e.value=s.name,R.value=!0},b=U({name:null,file:null}),P=U({id:null}),Oe=async()=>{var s;P.processing=!0,b.file=(s=b.file)!=null&&s.length?b.file[0]:null,b.post(route("downloadable_files.store"),{forceFormData:!0,onSuccess:l=>{h()},onError:l=>{f.value=l},onFinish:()=>{b.processing=!1}})},$e=async()=>{P.processing=!0;let s={onSuccess:l=>{h()},onError:l=>{h(),f.value=l},onFinish:()=>{P.processing=!1}};P.delete(route("downloadable_files.destroy",{id:P.id}),s)};return(s,l)=>{const v=u("v-card-title"),_=u("v-text-field"),y=u("v-col"),we=u("v-date-picker"),be=u("v-menu"),he=u("v-locale-provider"),D=u("v-row"),He=u("v-select"),G=u("v-container"),W=u("v-card-text"),E=u("v-btn-primary"),w=u("v-hover"),K=u("v-spacer"),T=u("v-btn"),Q=u("v-card-actions"),X=u("v-card"),Y=u("v-dialog"),O=u("v-icon"),$=u("v-tooltip"),ye=u("v-data-table-server"),Ie=u("v-file-input"),xe=qe("sortable-data-table");return V(),N(de,null,[t(d(Me),{title:"Einstellungen"}),t(Re,{errors:f.value},{header:e(()=>[Xe]),default:e(()=>[n("div",Ye,[n("div",et,[tt,n("div",lt,[t(w,null,{default:e(({isHovering:o,props:r})=>[t(T,c(r,{color:o?"accent":"primary",dark:""}),{default:e(()=>[m(" ZEITRAUM HINZUFÜGEN "),t(Y,{modelValue:M.value,"onUpdate:modelValue":l[8]||(l[8]=a=>M.value=a),activator:"parent",width:"80vw"},{default:e(()=>[t(X,{height:"80vh"},{default:e(()=>[t(v,null,{default:e(()=>[at]),_:1}),t(W,null,{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(y,{cols:"12",sm:"6"},{default:e(()=>[t(_,{modelValue:d(x).year,"onUpdate:modelValue":l[0]||(l[0]=a=>d(x).year=a),"error-messages":f.value.year,label:"Jahr*",required:""},null,8,["modelValue","error-messages"])]),_:1}),t(y,{cols:"12",sm:"6"},{default:e(()=>[t(he,{locale:"de"},{default:e(()=>[t(be,{modelValue:ae.value,"onUpdate:modelValue":l[3]||(l[3]=a=>ae.value=a),"return-value":C.value,"close-on-content-click":!1},{activator:e(({props:a})=>[t(_,c({label:"Erhebungsbeginn*",class:"tw-cursor-pointer","model-value":ne.value,"prepend-icon":"mdi-calendar",readonly:""},a),null,16,["model-value"])]),default:e(()=>[t(we,{"onUpdate:modelValue":[l[1]||(l[1]=a=>ae.value=!1),l[2]||(l[2]=a=>C.value=a)],modelValue:C.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(D,null,{default:e(()=>[t(y,{cols:"12",sm:"6"},{default:e(()=>[t(He,{modelValue:d(x).age,"onUpdate:modelValue":l[4]||(l[4]=a=>d(x).age=a),items:d(Ge),"error-messages":f.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe (Jahre)*"},null,8,["modelValue","items","error-messages"])]),_:1}),t(y,{cols:"12",sm:"6"},{default:e(()=>[t(he,{locale:"de"},{default:e(()=>[t(be,{modelValue:oe.value,"onUpdate:modelValue":l[7]||(l[7]=a=>oe.value=a),"return-value":z.value,"close-on-content-click":!1},{activator:e(({props:a})=>[t(_,c({label:"Erhebungsende*",class:"tw-cursor-pointer","model-value":se.value,"prepend-icon":"mdi-calendar",readonly:""},a),null,16,["model-value"])]),default:e(()=>[t(we,{"onUpdate:modelValue":[l[5]||(l[5]=a=>oe.value=!1),l[6]||(l[6]=a=>z.value=a)],modelValue:z.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(Q,null,{default:e(()=>[t(w,null,{default:e(({isHovering:a,props:p})=>[t(E,c({onClick:re},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(K),t(w,null,{default:e(({isHovering:a,props:p})=>[t(T,c({onClick:h},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(w,null,{default:e(({isHovering:a,props:p})=>[t(E,c({onClick:ze},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),t(Y,{modelValue:J.value,"onUpdate:modelValue":l[9]||(l[9]=o=>J.value=o),width:"20vw"},{default:e(()=>[t(X,{height:"30vh"},{default:e(()=>[t(W,null,{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(y,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+F(me.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(Q,null,{default:e(()=>[t(K),t(w,null,{default:e(({isHovering:o,props:r})=>[t(T,c({onClick:h},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(w,null,{default:e(({isHovering:o,props:r})=>[t(E,c({onClick:je},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),Se((V(),H(ye,{"items-per-page":S.value,"onUpdate:itemsPerPage":l[10]||(l[10]=o=>S.value=o),headers:Pe,items:Ue.value,search:ce.value,loading:q.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":fe},{item:e(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,F(o.selectable.year),1),n("td",null,F(o.selectable.age),1),n("td",null,F(d(Fe)(o.selectable.survey_start_date,"sv-SE")),1),n("td",null,F(d(Fe)(o.selectable.survey_end_date,"sv-SE")),1),n("td",nt,[t($,{location:"top"},{activator:e(({props:r})=>[t(d(ke),{href:s.route("survey_time_periods.show",{id:o.selectable.id})},{default:e(()=>[t(O,c(r,{size:"small",class:"tw-me-2"}),{default:e(()=>[m("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[st]),_:2},1024),t($,{location:"top"},{activator:e(({props:r})=>[t(O,c(r,{size:"small",class:"tw-me-2",onClick:a=>Ce(o.raw)}),{default:e(()=>[m("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[rt]),_:2},1024)])],8,ot)]),"no-data":e(()=>[it]),bottom:e(()=>[]),_:1},8,["items-per-page","items","search","loading"])),[[xe]])]),n("div",dt,[ut,t(D,null,{default:e(()=>[t(y,{cols:"12",md:"6"},{default:e(()=>[(V(!0),N(de,null,De(k.emailSettings,(o,r)=>{var a;return V(),N("div",ct,[t(_,{modelValue:d(ie).settings[r],"onUpdate:modelValue":p=>d(ie).settings[r]=p,"error-messages":(a=f.value)!=null&&a.settings?f.value.settings[r]:!1,label:`${pe.value[r]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"])])}),256))]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(y,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:e(()=>[t(w,null,{default:e(({isHovering:o,props:r})=>[t(E,c({onClick:l[11]||(l[11]=a=>ge("email"))},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),n("div",mt,[n("div",_t,[pt,n("div",vt,[t(w,null,{default:e(({isHovering:o,props:r})=>[t(T,c(r,{color:o?"accent":"primary",dark:""}),{default:e(()=>[m(" DATEI HINZUFÜGEN "),t(Y,{modelValue:Z.value,"onUpdate:modelValue":l[14]||(l[14]=a=>Z.value=a),activator:"parent",width:"80vw"},{default:e(()=>[t(X,{height:"80vh"},{default:e(()=>[t(v,null,{default:e(()=>[ft]),_:1}),t(W,null,{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(y,{cols:"12",sm:"6"},{default:e(()=>[t(_,{class:"required",type:"text",modelValue:d(b).name,"onUpdate:modelValue":l[12]||(l[12]=a=>d(b).name=a),"error-messages":f.value.name,label:"Name",required:"",disabled:d(b).processing},null,8,["modelValue","error-messages","disabled"])]),_:1}),t(y,{cols:"12",sm:"6"},{default:e(()=>[t(Ie,{modelValue:d(b).file,"onUpdate:modelValue":l[13]||(l[13]=a=>d(b).file=a),"error-messages":f.value.file,label:"File",accept:"*/*","prepend-icon":"mdi-upload",disabled:d(b).processing},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),t(Q,null,{default:e(()=>[t(w,null,{default:e(({isHovering:a,props:p})=>[t(E,c({onClick:re},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(K),t(w,null,{default:e(({isHovering:a,props:p})=>[t(T,c({onClick:h},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(w,null,{default:e(({isHovering:a,props:p})=>[t(E,c({onClick:Oe},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),t(Y,{modelValue:R.value,"onUpdate:modelValue":l[15]||(l[15]=o=>R.value=o),width:"20vw"},{default:e(()=>[t(X,{height:"30vh"},{default:e(()=>[t(W,null,{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(y,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+F(_e.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(Q,null,{default:e(()=>[t(K),t(w,null,{default:e(({isHovering:o,props:r})=>[t(T,c({onClick:h},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(w,null,{default:e(({isHovering:o,props:r})=>[t(E,c({onClick:$e},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),Se((V(),H(ye,{"items-per-page":S.value,"onUpdate:itemsPerPage":l[16]||(l[16]=o=>S.value=o),headers:Te,items:Ne.value,search:ce.value,loading:q.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":fe},{item:e(({item:o})=>{var r;return[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,F(o.selectable.name),1),n("td",null,F(d(We)(o.selectable.created_at,"sv-SE")),1),n("td",wt,[(r=o.selectable)!=null&&r.path?(V(),H($,{key:0,location:"top"},{activator:e(({props:a})=>[n("a",{href:o.selectable.path,download:""},[t(O,c(a,{size:"small",class:"tw-me-2"}),{default:e(()=>[m("mdi-download")]),_:2},1040)],8,bt)]),default:e(()=>[ht]),_:2},1024)):Ze("",!0),t($,{location:"top"},{activator:e(({props:a})=>[t(d(ke),{href:s.route("downloadable_files.show",{id:o.selectable.id})},{default:e(()=>[t(O,c(a,{size:"small",class:"tw-me-2"}),{default:e(()=>[m("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[yt]),_:2},1024),t($,{location:"top"},{activator:e(({props:a})=>[t(O,c(a,{size:"small",class:"tw-me-2",onClick:p=>Ae(o.raw)}),{default:e(()=>[m("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[xt]),_:2},1024)])],8,gt)]}),"no-data":e(()=>[Vt]),bottom:e(()=>[]),_:1},8,["items-per-page","items","search","loading"])),[[xe]])]),n("div",St,[kt,t(D,null,{default:e(()=>[t(y,{cols:"12"},{default:e(()=>[(V(!0),N(de,null,De(k.loginSettings,(o,r)=>{var a;return V(),N("div",Dt,[r==="login_form_additional_html"?(V(),H(Qe,{key:0,modelValue:d(A).settings[r],"onUpdate:modelValue":p=>d(A).settings[r]=p,minHeight:300},null,8,["modelValue","onUpdate:modelValue"])):(V(),H(_,{key:1,modelValue:d(A).settings[r],"onUpdate:modelValue":p=>d(A).settings[r]=p,"error-messages":(a=f.value)!=null&&a.settings?f.value.settings[r]:!1,label:`${pe.value[r]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"]))])}),256))]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(y,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:e(()=>[t(w,null,{default:e(({isHovering:o,props:r})=>[t(E,c({onClick:l[17]||(l[17]=a=>ge("login"))},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Nt as default};
