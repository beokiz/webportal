import{d as j}from"./index-d9a6f556.js";import{K as A,k as n,T as P,r as d,o as F,f as I,a,u as h,w as t,F as T,Z as $,b as v,p as k,d as D,N as O}from"./app-7577cb50.js";import{_ as L}from"./AuthenticatedLayout-4e01dabf.js";import{a as M}from"./common-6599ea66.js";import{v as R}from"./v4-4a60fe23.js";import"./ApplicationLogo-aa80a862.js";const S=v("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Übersicht Screenings",-1),K={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Z={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},q={class:"tw-w-full"},G={class:"tw-ml-6"},ee={__name:"Export",props:{domains:Object,errors:Object},setup(y){const z=y;j.Inertia.on("success",o=>{o.detail.page.props,o.detail.page.component}),A().props.auth.user;const p=n(z.errors||{}),r=n(!1),m=n(),c=n(),b=n("2.5"),_=n(null),w=n(null),g=n(!1),V=n(!1);P({});const B=async()=>{O.start(),r.value=!0;try{const o=await axios.post(route("export.make"),{finished_after:m.value,finished_before:c.value,age:b.value,zip_code:_.value,domains:w.value},{responseType:"blob"}),e=o.headers["content-disposition"],u=e.indexOf("filename=");let i;u!==-1?i=e.slice(u+9).replace(/['"]/g,""):i=R();const f=new Blob([o.data],{type:o.headers["content-type"]}),s=document.createElement("a");s.href=window.URL.createObjectURL(f),s.download=i,s.click()}catch(o){console.error(o)}O.done(),r.value=!1};return(o,e)=>{const u=d("v-text-field"),i=d("v-date-picker"),f=d("v-menu"),s=d("v-col"),x=d("v-row"),U=d("v-select"),C=d("v-btn"),E=d("v-hover");return F(),I(T,null,[a(h($),{title:"Übersicht Screenings"}),a(L,{errors:p.value},{header:t(()=>[S]),default:t(()=>[v("div",K,[v("div",Z,[v("div",q,[a(x,null,{default:t(()=>[a(s,{cols:"12",sm:"6"},{default:t(()=>[a(f,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=l=>g.value=l),"return-value":m.value,"close-on-content-click":!1},{activator:t(({props:l})=>[a(u,k({label:"Abgegeben ab",class:"tw-cursor-pointer","model-value":m.value,"prepend-icon":"mdi-calendar",readonly:""},l,{disabled:r.value}),null,16,["model-value","disabled"])]),default:t(()=>[a(i,{"onUpdate:modelValue":[e[0]||(e[0]=l=>g.value=!1),e[1]||(e[1]=l=>m.value=l)],modelValue:m.value},null,8,["modelValue"])]),_:1},8,["modelValue","return-value"])]),_:1}),a(s,{cols:"12",sm:"6"},{default:t(()=>[a(f,{modelValue:V.value,"onUpdate:modelValue":e[5]||(e[5]=l=>V.value=l),"return-value":c.value,"close-on-content-click":!1},{activator:t(({props:l})=>[a(u,k({label:"Abgegeben bis",class:"tw-cursor-pointer","model-value":c.value,"prepend-icon":"mdi-calendar",readonly:""},l,{disabled:r.value}),null,16,["model-value","disabled"])]),default:t(()=>[a(i,{"onUpdate:modelValue":[e[3]||(e[3]=l=>V.value=!1),e[4]||(e[4]=l=>c.value=l)],modelValue:c.value},null,8,["modelValue"])]),_:1},8,["modelValue","return-value"])]),_:1})]),_:1}),a(x,null,{default:t(()=>[a(s,{cols:"12",sm:"4"},{default:t(()=>[a(U,{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=l=>w.value=l),items:y.domains,"error-messages":p.value.domain,"item-title":"name","item-value":"id",label:"Domanen",disabled:r.value},null,8,["modelValue","items","error-messages","disabled"])]),_:1}),a(s,{cols:"12",sm:"4"},{default:t(()=>[a(U,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=l=>b.value=l),items:h(M),"error-messages":p.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe",disabled:r.value},null,8,["modelValue","items","error-messages","disabled"])]),_:1}),a(s,{cols:"12",sm:"4"},{default:t(()=>[a(u,{modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=l=>_.value=l),type:"number","error-messages":p.value.zipCode,label:"Postleitzahl",disabled:r.value},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),v("div",G,[a(E,null,{default:t(({isHovering:l,props:N})=>[a(C,k({class:"tw-mt-2"},N,{color:l?"accent":"primary",onClick:B,dark:"",disabled:r.value}),{default:t(()=>[D("Exporte")]),_:2},1040,["color","disabled"])]),_:1})])])])]),_:1},8,["errors"])],64)}}};export{ee as default};
