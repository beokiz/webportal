import{d as ne}from"./index-5dddf9b0.js";import{K as _e,k as z,h as K,m as ue,l as ie,T as N,r as u,n as me,o as S,f as ce,a as e,u as r,w as l,F as he,Z as pe,b as i,t as $,c as U,g as F,p as h,d as p,i as L,q as ge}from"./app-46e3f0f2.js";import{S as fe}from"./sortable.esm-0d19b1d3.js";import{_ as ve}from"./AuthenticatedLayout-b9a282ad.js";import"./ApplicationLogo-502f85a3.js";const be={class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},we={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ye=i("h3",null,"Eigenschaften",-1),ze=i("p",null,"Schwellenwerte für Altersgruppe bis 2,5 Jahre",-1),Ve=i("p",null,"Schwellenwerte für Altersgruppe bis 4,5 Jahre",-1),Se=i("h3",null,"Zugeordnete Subdomänen",-1),ke={class:"tw-flex tw-items-center tw-justify-end"},De=i("span",{class:"tw-text-h5"},"Neue Subdomäne",-1),xe=["data-id","data-order"],Ue=i("span",null,"Neu anordnen",-1),qe=i("span",null,"Subdomäne bearbeiten",-1),Ce=i("span",null,"Subdomäne löschen",-1),Be=i("div",{class:"tw-py-6"},[i("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Ze={__name:"ManageDomain",props:{domain:Object,errors:Object},setup(A){const I=A;ne.Inertia.on("success",s=>{let t=s.detail.page.props;s.detail.page.component==="Domains/Partials/ManageDomain"&&t&&(c.value=t.domain)}),_e().props.auth.user;const c=z(I.domain),n=z(I.errors||{}),H=z(!1),q=z(!1),Q=z(null),C=z(!1),G=z(null),W=[{title:"Name",key:"first_name",width:"90%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],y=K(()=>a.daz_dependent?3:6),X=K(()=>I.domain.subdomains.map(s=>{const t={...s};for(const d in t)(t[d]===null||t[d]===void 0)&&(t[d]="-");return t}));ue(C,s=>{s||V()}),ie(()=>{const s={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(t){Y(t)}};fe.create(document.querySelector(".v-data-table tbody"),s)});const V=()=>{C.value=!1,q.value=!1,v.reset(),v.clearErrors(),n.value={}},R=()=>{v.reset(),v.clearErrors(),a.reset(),a.clearErrors(),a.daz_dependent=!1,a.name=null,a.abbreviation=null,a.age_2_red_threshold=null,a.age_2_red_threshold_daz=null,a.age_2_yellow_threshold=null,a.age_2_yellow_threshold_daz=null,a.age_4_red_threshold=null,a.age_4_red_threshold_daz=null,a.age_4_yellow_threshold=null,a.age_4_yellow_threshold_daz=null},B=N({items:[]}),Y=s=>{B.processing=!0;let t=[],d=0;[].forEach.call(s.from.querySelectorAll("tr"),function(m,b){m.setAttribute("data-order",d+b),t.push({id:m.getAttribute("data-id"),order:d+b})}),B.items=t,B.post(route("subdomains.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:m=>{},onError:m=>{n.value=m},onFinish:()=>{B.processing=!1}})},ee=s=>{G.value=s.name,k.id=s.id,q.value=!0},k=N({id:null}),le=async()=>{k.processing=!0;let s={onSuccess:t=>{V()},onError:t=>{n.value=t},onFinish:()=>{k.processing=!1}};k.delete(route("subdomains.destroy",{id:k.id}),s)},a=N({id:c.value.id,name:c.value.name,abbreviation:c.value.abbreviation,age_2_red_threshold:c.value.age_2_red_threshold,age_2_red_threshold_daz:c.value.age_2_red_threshold_daz,age_2_yellow_threshold:c.value.age_2_yellow_threshold,age_2_yellow_threshold_daz:c.value.age_2_yellow_threshold_daz,age_4_red_threshold:c.value.age_4_red_threshold,age_4_red_threshold_daz:c.value.age_4_red_threshold_daz,age_4_yellow_threshold:c.value.age_4_yellow_threshold,age_4_yellow_threshold_daz:c.value.age_4_yellow_threshold_daz,daz_dependent:c.value.daz_dependent}),ae=async()=>{a.processing=!0,a.daz_dependent||(a.age_2_red_threshold_daz=a.age_2_red_threshold,a.age_2_yellow_threshold_daz=a.age_2_yellow_threshold,a.age_4_red_threshold_daz=a.age_4_red_threshold,a.age_4_yellow_threshold_daz=a.age_4_yellow_threshold);let s={preserveState:!1,onSuccess:t=>{V()},onError:t=>{n.value=t},onFinish:()=>{a.processing=!1}};a.put(route("domains.update",{domain:a.id}),s)},v=N({name:null,domain:c.value.id}),te=async()=>{v.processing=!0,v.post(route("subdomains.store"),{onSuccess:s=>{V()},onError:s=>{n.value=s},onFinish:()=>{v.processing=!1}})};return(s,t)=>{const d=u("v-col"),m=u("v-row"),b=u("v-container"),g=u("v-text-field"),oe=u("v-switch"),Z=u("v-spacer"),D=u("v-btn"),w=u("v-hover"),E=u("v-btn-primary"),re=u("v-card-title"),j=u("v-card-text"),M=u("v-card-actions"),P=u("v-card"),J=u("v-dialog"),O=u("v-icon"),T=u("v-tooltip"),de=u("v-data-table-server"),se=me("sortable-data-table");return S(),ce(he,null,[e(r(pe),{title:`Verwalte Domäne ${A.domain.name}`},null,8,["title"]),e(ve,{errors:n.value},{header:l(()=>[i("h2",be,$(`Verwalte Domäne ${A.domain.name}`),1)]),default:l(()=>[i("div",we,[e(b,null,{default:l(()=>[e(m,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[ye]),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(m,null,{default:l(()=>[e(d,{cols:"12",sm:"3"},{default:l(()=>[e(g,{modelValue:r(a).abbreviation,"onUpdate:modelValue":t[0]||(t[0]=o=>r(a).abbreviation=o),"error-messages":n.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:l(()=>[e(g,{modelValue:r(a).name,"onUpdate:modelValue":t[1]||(t[1]=o=>r(a).name=o),"error-messages":n.value.name,label:"Name der Domäne*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"3"},{default:l(()=>[e(oe,{modelValue:r(a).daz_dependent,"onUpdate:modelValue":t[2]||(t[2]=o=>r(a).daz_dependent=o),"defaults-target":r(a).daz_dependent,"hide-details":"",label:"Einstellen mit Daz"},null,8,["modelValue","defaults-target"])]),_:1})]),_:1}),e(m,{class:"mt-10"},{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[ze]),_:1}),e(d,{cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_red_threshold,"onUpdate:modelValue":t[3]||(t[3]=o=>r(a).age_2_red_threshold=o),"error-messages":n.value.age_2_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(S(),U(d,{key:0,cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_red_threshold_daz,"onUpdate:modelValue":t[4]||(t[4]=o=>r(a).age_2_red_threshold_daz=o),"error-messages":n.value.age_2_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):F("",!0),e(d,{cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_yellow_threshold,"onUpdate:modelValue":t[5]||(t[5]=o=>r(a).age_2_yellow_threshold=o),"error-messages":n.value.age_2_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(S(),U(d,{key:1,cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_yellow_threshold_daz,"onUpdate:modelValue":t[6]||(t[6]=o=>r(a).age_2_yellow_threshold_daz=o),"error-messages":n.value.age_2_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):F("",!0)]),_:1}),e(m,null,{default:l(()=>[e(Z),e(d,{cols:"12"},{default:l(()=>[Ve]),_:1}),e(d,{cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_red_threshold,"onUpdate:modelValue":t[7]||(t[7]=o=>r(a).age_4_red_threshold=o),"error-messages":n.value.age_4_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(S(),U(d,{key:0,cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_red_threshold_daz,"onUpdate:modelValue":t[8]||(t[8]=o=>r(a).age_4_red_threshold_daz=o),"error-messages":n.value.age_4_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):F("",!0),e(d,{cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_yellow_threshold,"onUpdate:modelValue":t[9]||(t[9]=o=>r(a).age_4_yellow_threshold=o),"error-messages":n.value.age_4_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(S(),U(d,{key:1,cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_yellow_threshold_daz,"onUpdate:modelValue":t[10]||(t[10]=o=>r(a).age_4_yellow_threshold_daz=o),"error-messages":n.value.age_4_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):F("",!0)]),_:1}),e(m,null,{default:l(()=>[e(d,{cols:"12",sm:"6"},{default:l(()=>[e(w,null,{default:l(({isHovering:o,props:_})=>[e(D,h({onClick:R},_,{color:o?"primary":"accent"}),{default:l(()=>[p("Zurücksetzen")]),_:2},1040,["color"])]),_:1})]),_:1}),e(d,{cols:"12",sm:"6",align:"right"},{default:l(()=>[e(w,null,{default:l(({isHovering:o,props:_})=>[e(r(L),{href:s.route("domains.index")},{default:l(()=>[e(D,h({class:"mr-2",variant:"text"},_,{color:o?"accent":"primary"}),{default:l(()=>[p("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(w,null,{default:l(({isHovering:o,props:_})=>[e(E,h({onClick:ae},_,{color:o?"accent":"primary"}),{default:l(()=>[p("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(m,{class:"tw-border-t-8 tw-mt-8 tw-pt-8"},{default:l(()=>[e(d,{cols:"12",sm:"6"},{default:l(()=>[Se]),_:1}),e(d,{cols:"12",sm:"6"},{default:l(()=>[i("div",ke,[e(w,null,{default:l(({isHovering:o,props:_})=>[e(D,h(_,{color:o?"accent":"primary",dark:""}),{default:l(()=>[p(" Subdomäne hinzufügen "),e(J,{modelValue:C.value,"onUpdate:modelValue":t[12]||(t[12]=f=>C.value=f),activator:"parent",width:"80vw"},{default:l(()=>[e(P,{height:"80vh"},{default:l(()=>[e(re,null,{default:l(()=>[De]),_:1}),e(j,null,{default:l(()=>[e(b,null,{default:l(()=>[e(m,null,{default:l(()=>[e(d,{cols:"12",sm:"12"},{default:l(()=>[e(g,{modelValue:r(v).name,"onUpdate:modelValue":t[11]||(t[11]=f=>r(v).name=f),"error-messages":n.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(M,null,{default:l(()=>[e(w,null,{default:l(({isHovering:f,props:x})=>[e(E,h({onClick:R},x,{color:f?"primary":"accent"}),{default:l(()=>[p("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(Z),e(w,null,{default:l(({isHovering:f,props:x})=>[e(D,h({onClick:V},x,{color:f?"accent":"primary"}),{default:l(()=>[p("Zurück")]),_:2},1040,["color"])]),_:2},1024),e(w,null,{default:l(({isHovering:f,props:x})=>[e(E,h({onClick:te},x,{color:f?"accent":"primary"}),{default:l(()=>[p("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(J,{modelValue:q.value,"onUpdate:modelValue":t[13]||(t[13]=o=>q.value=o),width:"20vw"},{default:l(()=>[e(P,{height:"30vh"},{default:l(()=>[e(j,null,{default:l(()=>[e(b,null,{default:l(()=>[e(m,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[i("p",null,"Sind Sie sicher, dass Sie die Subdomäne "+$(G.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(M,null,{default:l(()=>[e(Z),e(w,null,{default:l(({isHovering:o,props:_})=>[e(D,h({onClick:V},_,{color:o?"accent":"primary"}),{default:l(()=>[p("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(w,null,{default:l(({isHovering:o,props:_})=>[e(E,h({onClick:le},_,{color:o?"accent":"primary"}),{default:l(()=>[p("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[ge((S(),U(de,{"items-per-page":-1,headers:W,items:X.value,loading:H.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:l(({item:o})=>[i("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[i("td",null,$(o.selectable.name),1),i("td",null,[e(T,{location:"top"},{activator:l(({props:_})=>[e(O,h({draggable:"true",onDragstart:f=>Q.value=o.raw,color:"primary"},_,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:l(()=>[p("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:l(()=>[Ue]),_:2},1024),e(T,{location:"top"},{activator:l(({props:_})=>[e(r(L),{href:s.route("subdomains.show",{id:o.selectable.id})},{default:l(()=>[e(O,h(_,{size:"small",class:"tw-me-2"}),{default:l(()=>[p("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[qe]),_:2},1024),e(T,{location:"top"},{activator:l(({props:_})=>[e(O,h(_,{size:"small",class:"tw-me-2",onClick:f=>ee(o.raw)}),{default:l(()=>[p("mdi-delete ")]),_:2},1040,["onClick"])]),default:l(()=>[Ce]),_:2},1024)])],8,xe)]),"no-data":l(()=>[Be]),_:1},8,["items","loading"])),[[se]])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Ze as default};
