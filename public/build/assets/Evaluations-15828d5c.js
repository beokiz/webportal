import{d as Y}from"./index-5d364f83.js";import{K as ee,k as i,h as te,m as ae,T as le,r as s,n as oe,o as P,f as se,a as l,u as v,w as t,F as ne,Z as re,b as n,i as B,d as f,t as g,p as w,q as ie,c as I,g as ce,O as de}from"./app-6c3fc213.js";import{f as x}from"./common-4ebdec69.js";import{_ as ue}from"./AuthenticatedLayout-9ef0fe14.js";import"./ApplicationLogo-5280591d.js";const ve=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Evaluationen",-1),_e={class:"tw-flex tw-items-center tw-justify-end"},pe={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},me=["data-id","data-order"],fe={align:"center"},ge=n("span",null,"Einrichtung bearbeiten",-1),he=n("span",null,"Einrichtung löschen",-1),be=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Se={__name:"Evaluations",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(O){const c=O;Y.Inertia.on("success",a=>{let e=a.detail.page.props;a.detail.page.component==="Evaluations/Evaluations"&&e&&(u.value=e.currentPage,_.value=e.perPage,S.value=e.orderBy,F.value=e.sort,D.value=e.total,U.value=e.lastPage)}),ee().props.auth.user;const u=i(c.currentPage),_=i(c.perPage),S=i(c.orderBy),F=i(c.sort),D=i(c.total),U=i(c.lastPage),j=i(""),y=i(c.errors||{}),k=i(!1),N=i(!1),h=i(!1),C=i(null),z=[{title:"UUID",key:"uuid",width:"40%",sortable:!1},{title:"Zullet bearbeitet",key:"updated_at",width:"15%",sortable:!1},{title:"Abgegeben am",key:"created_at",width:"15%",sortable:!1},{title:"Bearbetungszeit endet",key:"finished_at",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],$=te(()=>c.items.map(a=>{const e={...a};for(const r in e)(e[r]===null||e[r]===void 0)&&(e[r]="-");return e}));ae(N,a=>{a||b()});const Z=async({page:a,itemsPerPage:e,sortBy:r,clearFilters:E})=>{if(a!==u.value||a===u.value&&E||[a,e,r]!==[u.value,_.value,S.value]){k.value=!0;let m={data:{page:a,per_page:e}};r&&r.length>0&&(m.data.order_by=r[0].key,m.data.sort=r[0].order),await de.reload(m),u.value=a,_.value=e,k.value=!1}},q=a=>{C.value=a.uuid,p.id=a.id,h.value=!0},b=()=>{N.value=!1,h.value=!1,y.value={}},p=le({id:null}),K=async()=>{p.processing=!0;let a={onSuccess:e=>{b()},onError:e=>{b(),y.value=e},onFinish:()=>{p.processing=!1}};p.delete(route("evaluations.destroy",{id:p.id}),a)};return(a,e)=>{const r=s("v-col"),E=s("v-row"),m=s("v-container"),L=s("v-card-text"),G=s("v-spacer"),H=s("v-btn"),T=s("v-hover"),J=s("v-btn-primary"),M=s("v-card-actions"),Q=s("v-card"),R=s("v-dialog"),V=s("v-icon"),A=s("v-tooltip"),W=s("v-data-table-server"),X=oe("sortable-data-table");return P(),se(ne,null,[l(v(re),{title:"Evaluationen"}),l(ue,{errors:y.value},{header:t(()=>[ve,n("div",_e,[l(v(B),{href:a.route("evaluations.create")},{default:t(()=>[f(" Anlegen ")]),_:1},8,["href"])]),l(R,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o),width:"20vw"},{default:t(()=>[l(Q,{height:"30vh"},{default:t(()=>[l(L,null,{default:t(()=>[l(m,null,{default:t(()=>[l(E,null,{default:t(()=>[l(r,{cols:"12"},{default:t(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+g(C.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),l(M,null,{default:t(()=>[l(G),l(T,null,{default:t(({isHovering:o,props:d})=>[l(H,w({onClick:b},d,{color:o?"accent":"primary"}),{default:t(()=>[f("Abbrechen")]),_:2},1040,["color"])]),_:1}),l(T,null,{default:t(({isHovering:o,props:d})=>[l(J,w({onClick:K},d,{color:o?"accent":"primary"}),{default:t(()=>[f("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:t(()=>[n("div",pe,[ie((P(),I(W,{"items-per-page":_.value,"onUpdate:itemsPerPage":e[1]||(e[1]=o=>_.value=o),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:z,page:u.value,"items-length":D.value,items:$.value,search:j.value,loading:k.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":Z},{item:t(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,g(o.selectable.uuid),1),n("td",null,g(v(x)(o.selectable.updated_at,"sv-SE")),1),n("td",null,g(v(x)(o.selectable.created_at,"sv-SE")),1),n("td",null,g(v(x)(o.selectable.finished_at,"sv-SE")),1),n("td",fe,[o.selectable.editable?(P(),I(A,{key:0,location:"top"},{activator:t(({props:d})=>[l(v(B),{href:a.route("evaluations.edit",{id:o.selectable.id})},{default:t(()=>[l(V,w(d,{size:"small",class:"tw-me-2"}),{default:t(()=>[f("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[ge]),_:2},1024)):ce("",!0),l(A,{location:"top"},{activator:t(({props:d})=>[l(V,w(d,{size:"small",class:"tw-me-2",onClick:we=>q(o.raw)}),{default:t(()=>[f("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[he]),_:2},1024)])],8,me)]),"no-data":t(()=>[be]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[X]])])]),_:1},8,["errors"])],64)}}};export{Se as default};
