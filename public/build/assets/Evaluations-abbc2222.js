import{d as ce}from"./index-0cd42e89.js";import{K as de,k as r,h as pe,m as _e,T as N,r as u,n as ve,f as J,a as t,u as w,w as e,F as me,o as S,Z as fe,i as Q,p as v,d as c,g as V,b as n,t as y,q as he,c as A,O as ge}from"./app-f7f1985c.js";import{f as B}from"./common-6599ea66.js";import{_ as be}from"./AuthenticatedLayout-54b86b3d.js";import{_ as we}from"./EvaluationDomainsList-261e4562.js";import"./ApplicationLogo-9f2ef741.js";const ye=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einschätzungen",-1),ke={key:0,class:"tw-flex tw-items-center tw-justify-end"},Ee={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Se=["data-id","data-order"],ze={align:"center"},Pe=n("span",null,"Einschätzung bearbeiten",-1),xe=n("span",null,"Einschätzung ansehen",-1),De=n("span",null,"Einschätzung löschen",-1),$e=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Ce={class:"tw-text-right"},Fe=["href"],Ie={class:"tw-text-center"},Ne=n("h1",{class:"tw-uppercase text-primary tw-font-black tw-text-xl tw-mb-8"}," Screening wurde eingereicht ",-1),Ve=n("p",{class:"tw-mb-8"}," Folgendes Screening wurde eingereicht und kann nur bis 15 Minuten nach Einreichung bearbeitet werden. Danach verschwindet es aus Ihrer Übersicht. Sollten Sie es zurückziehen oder bearbeiten wollen, klicke Sie auf 'Abgabe zurückziehen. Nachfolgend erhalten Sie eine Übersicht des eingereichten Screenings, welches Sie über den Download-Button als PDF herunterladen können. ",-1),Ae=n("span",{class:"tw-font-black"},"Bezeichner des Screenings",-1),Ze={__name:"Evaluations",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(W){const _=W;ce.Inertia.on("success",o=>{let a=o.detail.page.props;o.detail.page.component==="Evaluations/Evaluations"&&a&&(g.value=a.currentPage,k.value=a.perPage,T.value=a.orderBy,X.value=a.sort,O.value=a.total,Y.value=a.lastPage)}),de().props.auth.user;const g=r(_.currentPage),k=r(_.perPage),T=r(_.orderBy),X=r(_.sort),O=r(_.total),Y=r(_.lastPage),ee=r(""),m=r(_.errors||{}),$=r(!1),j=r(!1),z=r(!1),U=r(null),P=r(!1),f=r(null),R=r(null),te=[{title:"ID",key:"id",width:"40%",sortable:!1},{title:"Zuletzt bearbeitet",key:"updated_at",width:"15%",sortable:!1},{title:"Abgegeben am",key:"finished_at",width:"15%",sortable:!1},{title:"Bearbeitungszeit endet",key:"not_editable_at",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],ae=pe(()=>_.items.map(o=>{const a={...o};for(const i in a)(a[i]===null||a[i]===void 0)&&(a[i]="-");return a}));_e(j,o=>{o||h()});const le=async({page:o,itemsPerPage:a,sortBy:i,clearFilters:d})=>{if(o!==g.value||o===g.value&&d||[o,a,i]!==[g.value,k.value,T.value]){$.value=!0;let p={data:{page:o,per_page:a}};i&&i.length>0&&(p.data.order_by=i[0].key,p.data.sort=i[0].order),await ge.reload(p),g.value=o,k.value=a,$.value=!1}},oe=o=>{U.value=o.uuid,E.id=o.id,z.value=!0},b=N({id:null}),ne=async o=>{b.id=o.id,b.processing=!0,b.post(route("evaluations.show_popup",{id:b.id}),{onSuccess:a=>{b.clearErrors(),m.value={},P.value=!0,f.value=a.props.data.item,R.value=a.props.data.domains},onError:a=>{m.value=a},onFinish:()=>{b.processing=!1}})},h=()=>{j.value=!1,z.value=!1,P.value=!1,m.value={}},E=N({id:null}),se=async()=>{E.processing=!0;let o={onSuccess:a=>{h()},onError:a=>{h(),m.value=a},onFinish:()=>{E.processing=!1}};E.delete(route("evaluations.destroy",{id:E.id}),o)},x=N({}),re=async o=>{x.processing=!0,x.post(route("evaluations.unfinished",{id:o}),{preserveState:!1,onSuccess:a=>{x.clearErrors(),m.value={},h()},onError:a=>{m.value=a},onFinish:()=>{x.processing=!1}})};return(o,a)=>{const i=u("v-btn-primary"),d=u("v-hover"),p=u("v-col"),C=u("v-row"),Z=u("v-container"),q=u("v-card-text"),H=u("v-spacer"),F=u("v-btn"),K=u("v-card-actions"),L=u("v-card"),M=u("v-dialog"),D=u("v-icon"),I=u("v-tooltip"),ie=u("v-data-table-server"),ue=ve("sortable-data-table");return S(),J(me,null,[t(w(fe),{title:"Einschätzungen"}),t(be,{errors:m.value},{header:e(()=>[ye,o.$page.props.auth.user.is_manager||o.$page.props.auth.user.is_employer?(S(),J("div",ke,[t(w(Q),{href:o.route("evaluations.create")},{default:e(()=>[t(d,null,{default:e(({isHovering:l,props:s})=>[t(i,v(s,{color:l?"accent":"primary"}),{default:e(()=>[c(" Anlegen ")]),_:2},1040,["color"])]),_:1})]),_:1},8,["href"])])):V("",!0),t(M,{modelValue:z.value,"onUpdate:modelValue":a[0]||(a[0]=l=>z.value=l),width:"20vw"},{default:e(()=>[t(L,{height:"30vh"},{default:e(()=>[t(q,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(C,null,{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+y(U.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(H),t(d,null,{default:e(({isHovering:l,props:s})=>[t(F,v({onClick:h},s,{color:l?"accent":"primary"}),{default:e(()=>[c("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(d,null,{default:e(({isHovering:l,props:s})=>[t(i,v({onClick:se},s,{color:l?"accent":"primary"}),{default:e(()=>[c("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[n("div",Ee,[he((S(),A(ie,{"items-per-page":k.value,"onUpdate:itemsPerPage":a[1]||(a[1]=l=>k.value=l),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:te,page:g.value,"items-length":O.value,items:ae.value,search:ee.value,loading:$.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":le},{item:e(({item:l})=>[n("tr",{"data-id":l.selectable.id,"data-order":l.selectable.order},[n("td",null,y(`${l.selectable.kita.formatted_name}_${l.selectable.uuid}`),1),n("td",null,y(w(B)(l.selectable.updated_at,"sv-SE")),1),n("td",null,y(w(B)(l.selectable.finished_at,"sv-SE")),1),n("td",null,y(w(B)(l.selectable.not_editable_at,"sv-SE")),1),n("td",ze,[l.selectable.editable&&(o.$page.props.auth.user.is_manager||o.$page.props.auth.user.is_employer)?(S(),A(I,{key:0,location:"top"},{activator:e(({props:s})=>[t(w(Q),{href:o.route("evaluations.edit",{id:l.selectable.id})},{default:e(()=>[t(D,v(s,{size:"small",class:"tw-me-2"}),{default:e(()=>[c("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[Pe]),_:2},1024)):V("",!0),l.selectable.finished?(S(),A(I,{key:1,location:"top"},{activator:e(({props:s})=>[t(D,v(s,{size:"small",class:"tw-me-2",onClick:G=>ne(l.raw)}),{default:e(()=>[c("mdi-eye")]),_:2},1040,["onClick"])]),default:e(()=>[xe]),_:2},1024)):V("",!0),t(I,{location:"top"},{activator:e(({props:s})=>[t(D,v(s,{size:"small",class:"tw-me-2",onClick:G=>oe(l.raw)}),{default:e(()=>[c("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[De]),_:2},1024)])],8,Se)]),"no-data":e(()=>[$e]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ue]])]),t(M,{modelValue:P.value,"onUpdate:modelValue":a[4]||(a[4]=l=>P.value=l),width:"95vw"},{default:e(()=>[t(L,{height:"95vh"},{default:e(()=>[t(q,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(C,{class:"result-evaluation-domains"},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(d,null,{default:e(({isHovering:l,props:s})=>[n("div",Ce,[n("a",{href:o.route("evaluations.pdf",{id:f.value.id}),onClick:h,title:"Fenster schließen"},[t(D,v(s,{size:"small",class:"tw-me-2",onClick:a[2]||(a[2]=()=>{})}),{default:e(()=>[c("mdi-close")]),_:2},1040)],8,Fe)])]),_:1})]),_:1})]),_:1}),t(C,{class:"result-evaluation-domains"},{default:e(()=>[t(p,{cols:"8",offset:"2"},{default:e(()=>[n("div",Ie,[Ne,Ve,t(d,null,{default:e(({isHovering:l,props:s})=>[t(F,{href:o.route("evaluations.pdf",{id:f.value.id}),class:"tw-px-2 tw-py-3 tw-mb-4 tw-mr-4 tw-normal-case",color:l?"primary":"accent"},{default:e(()=>[c(" Screening als PDF downloaden ")]),_:2},1032,["href","color"])]),_:1}),t(d,null,{default:e(({isHovering:l,props:s})=>[t(F,{onClick:a[3]||(a[3]=G=>re(f.value.id)),class:"tw-px-2 tw-py-3 tw-mb-4 tw-normal-case",color:l?"accent":"primary"},{default:e(()=>[c(" Abgabe zurückziehen ")]),_:2},1032,["color"])]),_:1})])]),_:1}),t(p,{cols:"12"},{default:e(()=>[n("p",null,[Ae,c(": "+y(`${f.value.kita.formatted_name}_${f.value.uuid}`),1)])]),_:1}),t(p,{cols:"12"},{default:e(()=>[t(we,{ratings:f.value.data,domains:R.value,disabled:!0},null,8,["ratings","domains"])]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(H),t(d,null,{default:e(({isHovering:l,props:s})=>[t(i,v({onClick:h},s,{color:l?"accent":"primary"}),{default:e(()=>[c("Abbrechen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["errors"])],64)}}};export{Ze as default};
