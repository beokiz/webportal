import{d as le}from"./index-16c90d54.js";import{K as ae,k as S,h as oe,m as te,l as re,T as U,r as u,n as se,o as T,f as de,a as e,u as t,w as l,F as ne,Z as ue,b as _,i as j,p as f,d as v,q as _e,c as ie,t as me}from"./app-921b3388.js";import{_ as ce}from"./AuthenticatedLayout-3c49effc.js";import{S as pe}from"./sortable.esm-0d19b1d3.js";import"./ApplicationLogo-4707e5da.js";const he=_("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Manage Domain",-1),ge={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},fe={class:"tw-flex tw-justify-between"},ve=_("p",null,"Schwellenwerte für Altersgruppe bis 2,5 Jahre",-1),be=_("p",null,"Schwellenwerte für Altersgruppe bis 4,5 Jahre",-1),we={class:"tw-flex tw-items-center tw-justify-end"},ye=_("span",{class:"tw-text-h5"},"Neue Subdomäne",-1),Ve=_("p",null,"Sind Sie sicher, dass Sie den aktuellen Subdomain löschen möchten?",-1),ze=["data-id","data-order"],Se=_("span",null,"neu anordnen",-1),De=_("span",null,"Domäne anzeigen",-1),ke=_("span",null,"Benutzer löschen",-1),xe=_("div",{class:"tw-py-6"},[_("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Ae={__name:"ManageDomain",props:{domain:Object,errors:Object},setup(G){const B=G;le.Inertia.on("success",s=>{let a=s.detail.page.props;s.detail.page.component==="Domains/Partials/ManageDomain"&&a&&(c.value=a.domain)}),ae().props.auth.user;const c=S(B.domain),d=S(B.errors||{}),R=S(!1),x=S(!1),P=S(null),q=S(!1),$=[{title:"Name",key:"first_name",width:"90%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],J=oe(()=>B.domain.subdomains.map(s=>{const a={...s};for(const p in a)(a[p]===null||a[p]===void 0)&&(a[p]="-");return a}));te(q,s=>{s||V()}),re(()=>{const s={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(a){Z(a)}};pe.create(document.querySelector(".v-data-table tbody"),s)});const V=()=>{q.value=!1,x.value=!1,b.reset(),b.clearErrors(),d.value={}},K=()=>{b.reset(),b.clearErrors()},C=U({items:[]}),Z=s=>{C.processing=!0;let a=[],p=0;[].forEach.call(s.from.querySelectorAll("tr"),function(m,y){m.setAttribute("data-order",p+y),a.push({id:m.getAttribute("data-id"),order:p+y})}),C.items=a,C.post(route("subdomains.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:m=>{},onError:m=>{d.value=m},onFinish:()=>{C.processing=!1}})},L=s=>{D.id=s.id,x.value=!0},D=U({id:null}),H=async()=>{D.processing=!0;let s={onSuccess:a=>{V()},onError:a=>{d.value=a},onFinish:()=>{D.processing=!1}};D.delete(route("subdomains.destroy",{id:D.id}),s)},r=U({id:c.value.id,name:c.value.name,abbreviation:c.value.abbreviation,age_2_red_threshold:c.value.age_2_red_threshold,age_2_red_threshold_daz:c.value.age_2_red_threshold_daz,age_2_yellow_threshold:c.value.age_2_yellow_threshold,age_2_yellow_threshold_daz:c.value.age_2_yellow_threshold_daz,age_4_red_threshold:c.value.age_4_red_threshold,age_4_red_threshold_daz:c.value.age_4_red_threshold_daz,age_4_yellow_threshold:c.value.age_4_yellow_threshold,age_4_yellow_threshold_daz:c.value.age_4_yellow_threshold_daz}),Q=async()=>{r.processing=!0;let s={preserveState:!1,onSuccess:a=>{V()},onError:a=>{d.value=a},onFinish:()=>{r.processing=!1}};r.put(route("domains.update",{domain:r.id}),s)},b=U({name:null,domain:c.value.id}),W=async()=>{b.processing=!0,b.post(route("subdomains.store"),{preserveState:!1,onSuccess:s=>{V()},onError:s=>{d.value=s},onFinish:()=>{b.processing=!1}})};return(s,a)=>{const p=u("v-btn"),m=u("v-hover"),y=u("v-btn-primary"),n=u("v-col"),w=u("v-row"),z=u("v-container"),h=u("v-text-field"),F=u("v-spacer"),X=u("v-card-title"),N=u("v-card-text"),I=u("v-card-actions"),M=u("v-card"),O=u("v-dialog"),A=u("v-icon"),E=u("v-tooltip"),Y=u("v-data-table-server"),ee=se("sortable-data-table");return T(),de(ne,null,[e(t(ue),{title:"Manage Domain"}),e(ce,{errors:d.value},{header:l(()=>[he]),default:l(()=>[_("div",ge,[e(z,null,{default:l(()=>[e(w,null,{default:l(()=>[e(n,{cols:"12",md:"3",sm:"4"},{default:l(()=>[_("div",fe,[e(m,null,{default:l(({isHovering:o,props:i})=>[e(t(j),{href:s.route("domains.index")},{default:l(()=>[e(p,f(i,{color:o?"primary":"accent"}),{default:l(()=>[v("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(m,null,{default:l(({isHovering:o,props:i})=>[e(y,f({onClick:Q},i,{color:o?"accent":"primary"}),{default:l(()=>[v("Speichern ")]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(z,null,{default:l(()=>[e(w,null,{default:l(()=>[e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).abbreviation,"onUpdate:modelValue":a[0]||(a[0]=o=>t(r).abbreviation=o),"error-messages":d.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"9"},{default:l(()=>[e(h,{modelValue:t(r).name,"onUpdate:modelValue":a[1]||(a[1]=o=>t(r).name=o),"error-messages":d.value.name,label:"Name der Domäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[ve]),_:1}),e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).age_2_red_threshold,"onUpdate:modelValue":a[2]||(a[2]=o=>t(r).age_2_red_threshold=o),"error-messages":d.value.age_2_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).age_2_red_threshold_daz,"onUpdate:modelValue":a[3]||(a[3]=o=>t(r).age_2_red_threshold_daz=o),"error-messages":d.value.age_2_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).age_2_yellow_threshold,"onUpdate:modelValue":a[4]||(a[4]=o=>t(r).age_2_yellow_threshold=o),"error-messages":d.value.age_2_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).age_2_yellow_threshold_daz,"onUpdate:modelValue":a[5]||(a[5]=o=>t(r).age_2_yellow_threshold_daz=o),"error-messages":d.value.age_2_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(F),e(n,{cols:"12"},{default:l(()=>[be]),_:1}),e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).age_4_red_threshold,"onUpdate:modelValue":a[6]||(a[6]=o=>t(r).age_4_red_threshold=o),"error-messages":d.value.age_4_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).age_4_red_threshold_daz,"onUpdate:modelValue":a[7]||(a[7]=o=>t(r).age_4_red_threshold_daz=o),"error-messages":d.value.age_4_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).age_4_yellow_threshold,"onUpdate:modelValue":a[8]||(a[8]=o=>t(r).age_4_yellow_threshold=o),"error-messages":d.value.age_4_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:l(()=>[e(h,{modelValue:t(r).age_4_yellow_threshold_daz,"onUpdate:modelValue":a[9]||(a[9]=o=>t(r).age_4_yellow_threshold_daz=o),"error-messages":d.value.age_4_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),e(z,null,{default:l(()=>[e(w,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[_("div",we,[e(m,null,{default:l(({isHovering:o,props:i})=>[e(p,f(i,{color:o?"accent":"primary",dark:""}),{default:l(()=>[v(" Anlegen "),e(O,{modelValue:q.value,"onUpdate:modelValue":a[11]||(a[11]=g=>q.value=g),activator:"parent",width:"80vw"},{default:l(()=>[e(M,{height:"80vh"},{default:l(()=>[e(X,null,{default:l(()=>[ye]),_:1}),e(N,null,{default:l(()=>[e(z,null,{default:l(()=>[e(w,null,{default:l(()=>[e(n,{cols:"12",sm:"12"},{default:l(()=>[e(h,{modelValue:t(b).name,"onUpdate:modelValue":a[10]||(a[10]=g=>t(b).name=g),"error-messages":d.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(m,null,{default:l(({isHovering:g,props:k})=>[e(y,f({onClick:K},k,{color:g?"accent":"primary"}),{default:l(()=>[v("Clear")]),_:2},1040,["color"])]),_:2},1024),e(F),e(m,null,{default:l(({isHovering:g,props:k})=>[e(p,f({onClick:V},k,{color:g?"accent":"primary"}),{default:l(()=>[v("Cancel")]),_:2},1040,["color"])]),_:2},1024),e(m,null,{default:l(({isHovering:g,props:k})=>[e(y,f({onClick:W},k,{color:g?"accent":"primary"}),{default:l(()=>[v("Save")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(z,null,{default:l(()=>[e(O,{modelValue:x.value,"onUpdate:modelValue":a[12]||(a[12]=o=>x.value=o),width:"20vw"},{default:l(()=>[e(M,{height:"30vh"},{default:l(()=>[e(N,null,{default:l(()=>[e(z,null,{default:l(()=>[e(w,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[Ve]),_:1})]),_:1})]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(F),e(m,null,{default:l(({isHovering:o,props:i})=>[e(p,f({onClick:V},i,{color:o?"accent":"primary"}),{default:l(()=>[v("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(m,null,{default:l(({isHovering:o,props:i})=>[e(y,f({onClick:H},i,{color:o?"accent":"primary"}),{default:l(()=>[v("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(w,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[_e((T(),ie(Y,{"items-per-page":-1,headers:$,items:J.value,loading:R.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:l(({item:o})=>[_("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[_("td",null,me(o.selectable.name),1),_("td",null,[e(E,{location:"top"},{activator:l(({props:i})=>[e(A,f({draggable:"true",onDragstart:g=>P.value=o.raw,color:"primary"},i,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:l(()=>[v("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:l(()=>[Se]),_:2},1024),e(E,{location:"top"},{activator:l(({props:i})=>[e(t(j),{href:s.route("subdomains.show",{id:o.selectable.id})},{default:l(()=>[e(A,f(i,{size:"small",class:"tw-me-2"}),{default:l(()=>[v("mdi-eye")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[De]),_:2},1024),e(E,{location:"top"},{activator:l(({props:i})=>[e(A,f(i,{size:"small",class:"tw-me-2",onClick:g=>L(o.raw)}),{default:l(()=>[v("mdi-delete ")]),_:2},1040,["onClick"])]),default:l(()=>[ke]),_:2},1024)])],8,ze)]),"no-data":l(()=>[xe]),_:1},8,["items","loading"])),[[ee]])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Ae as default};
