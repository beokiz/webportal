import{d as _e}from"./index-233f6ba8.js";import{K as me,k as s,h as D,m as ve,T as M,r,n as fe,f as B,a as t,u as h,w as e,F as Q,o as b,Z as ge,b as n,c as E,p as v,d as m,g as W,t as U,q as he,i as be,O as we}from"./app-482a136d.js";import{_ as ye}from"./AuthenticatedLayout-bfba92b3.js";import"./ApplicationLogo-0f3d5a1e.js";const ke=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Träger",-1),Pe={class:"tw-flex tw-items-center tw-justify-end"},xe=n("span",{class:"tw-text-h5"},"Verwalte Träger",-1),Ve={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Se=["data-id","data-order"],Ne=n("span",null,"Träger bearbeiten",-1),Oe=n("span",null,"Träger löschen",-1),Te={class:"tw-py-6"},Ce={key:0,class:"tw-mb-4"},Fe=n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),$e={__name:"Operators",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(X){const p=X;_e.Inertia.on("success",l=>{let a=l.detail.page.props;l.detail.page.component==="Operators/Operators"&&a&&(V.value=a.currentPage,w.value=a.perPage,Y.value=a.orderBy,ee.value=a.sort,$.value=a.total,te.value=a.lastPage,y.value=a.filters.search??null)}),me().props.auth.user;const V=s(p.currentPage),w=s(p.perPage),Y=s(p.orderBy),ee=s(p.sort),$=s(p.total),te=s(p.lastPage),y=s(p.filters.search??null),ae=s(""),k=s(p.errors||{}),C=s(!1),S=s(!1),N=s(!1),z=s(null),le=[{title:"Name",key:"name",width:"45%",sortable:!0},{title:"Selbschulend",key:"self_training",width:"45%",sortable:!0},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],oe=D(()=>p.items.map(l=>{const a={...l};for(const u in a)(a[u]===null||a[u]===void 0)&&(a[u]="-");return a})),A=D(()=>y.value===null),re=D(()=>y.value!==null);ve(S,l=>{l||f()});const I=async({page:l,itemsPerPage:a,sortBy:u,clearFilters:O})=>{if(O&&(y.value=null),l===V.value&&O||A||re){C.value=!0;let d={data:{page:l,per_page:a}};u&&u.length>0?(d.data.order_by=u[0].key,d.data.sort=u[0].order):(d.data.order_by=null,d.data.sort=null),d.data.search=y.value,await we.reload(d),V.value=l,w.value=a,C.value=!1}},se=l=>{z.value=l.name,P.id=l.id,N.value=!0},P=M({id:null}),ne=async()=>{P.processing=!0;let l={onSuccess:a=>{f()},onError:a=>{f(),k.value=a},onFinish:()=>{P.processing=!1}};P.delete(route("operators.destroy",{id:P.id}),l)},f=()=>{S.value=!1,N.value=!1,c.reset(),c.clearErrors(),k.value={}},ie=()=>{c.reset(),c.clearErrors()},c=M({name:null,self_training:!1}),ce=async()=>{c.processing=!0,c.post(route("operators.store"),{onSuccess:l=>{f()},onError:l=>{k.value=l},onFinish:()=>{c.processing=!1}})};return(l,a)=>{const u=r("v-card-title"),O=r("v-text-field"),d=r("v-col"),ue=r("v-checkbox"),j=r("v-row"),q=r("v-container"),Z=r("v-card-text"),F=r("v-btn-primary"),g=r("v-hover"),J=r("v-spacer"),T=r("v-btn"),K=r("v-card-actions"),L=r("v-card"),R=r("v-dialog"),G=r("v-icon"),H=r("v-tooltip"),de=r("v-data-table-server"),pe=fe("sortable-data-table");return b(),B(Q,null,[t(h(ge),{title:"Träger"}),t(ye,{errors:k.value},{header:e(()=>[ke,n("div",Pe,[l.$page.props.auth.user.is_manager?W("",!0):(b(),E(g,{key:0},{default:e(({isHovering:o,props:_})=>[t(T,v(_,{color:o?"accent":"primary",dark:""}),{default:e(()=>[m(" Anlegen "),t(R,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=i=>S.value=i),activator:"parent",width:"80vw"},{default:e(()=>[t(L,{height:"80vh"},{default:e(()=>[t(u,null,{default:e(()=>[xe]),_:1}),t(Z,null,{default:e(()=>[t(q,null,{default:e(()=>[t(j,null,{default:e(()=>[t(d,{cols:"12",sm:"6"},{default:e(()=>[t(O,{modelValue:h(c).name,"onUpdate:modelValue":a[0]||(a[0]=i=>h(c).name=i),"error-messages":k.value.name,label:"Name",required:""},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",sm:"6"},{default:e(()=>[t(ue,{modelValue:h(c).self_training,"onUpdate:modelValue":a[1]||(a[1]=i=>h(c).self_training=i),label:"Selbschulend",value:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(g,null,{default:e(({isHovering:i,props:x})=>[t(F,v({onClick:ie},x,{color:i?"accent":"primary"}),{default:e(()=>[m("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(J),t(g,null,{default:e(({isHovering:i,props:x})=>[t(T,v({onClick:f},x,{color:i?"accent":"primary"}),{default:e(()=>[m("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(g,null,{default:e(({isHovering:i,props:x})=>[t(F,v({onClick:ce},x,{color:i?"accent":"primary"}),{default:e(()=>[m("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1}))]),t(R,{modelValue:N.value,"onUpdate:modelValue":a[3]||(a[3]=o=>N.value=o),width:"20vw"},{default:e(()=>[t(L,{height:"30vh"},{default:e(()=>[t(Z,null,{default:e(()=>[t(q,null,{default:e(()=>[t(j,null,{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Träger "+U(z.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(J),t(g,null,{default:e(({isHovering:o,props:_})=>[t(T,v({onClick:f},_,{color:o?"accent":"primary"}),{default:e(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(g,null,{default:e(({isHovering:o,props:_})=>[t(F,v({onClick:ne},_,{color:o?"accent":"primary"}),{default:e(()=>[m("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[n("div",Ve,[he((b(),E(de,{"items-per-page":w.value,"onUpdate:itemsPerPage":a[5]||(a[5]=o=>w.value=o),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:le,page:V.value,"items-length":$.value,items:oe.value,search:ae.value,loading:C.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":I},{item:e(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,U(o.selectable.name),1),n("td",null,U(o.selectable.self_training?"Ja":"Nein"),1),n("td",null,[t(H,{location:"top"},{activator:e(({props:_})=>[t(h(be),{href:l.route("operators.show",{id:o.selectable.id})},{default:e(()=>[t(G,v(_,{size:"small",class:"tw-me-2"}),{default:e(()=>[m("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[Ne]),_:2},1024),l.$page.props.auth.user.is_manager?W("",!0):(b(),E(H,{key:0,location:"top"},{activator:e(({props:_})=>[t(G,v(_,{size:"small",class:"tw-me-2",onClick:i=>se(o.raw)}),{default:e(()=>[m("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[Oe]),_:2},1024))])],8,Se)]),"no-data":e(()=>[n("div",Te,[A.value?(b(),B("h3",Ce,"Die Tabelle ist leer.")):(b(),B(Q,{key:1},[Fe,t(T,{color:"primary",onClick:a[4]||(a[4]=o=>I({page:1,itemsPerPage:w.value,clearFilters:!0}))},{default:e(()=>[m("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[pe]])])]),_:1},8,["errors"])],64)}}};export{$e as default};
