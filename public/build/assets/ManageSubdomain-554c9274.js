import{d as oe}from"./index-16c90d54.js";import{K as se,k as S,h as ne,m as re,l as de,T as U,r,n as ie,o as j,f as ue,a as e,u as d,w as t,F as ce,Z as me,b as i,i as K,p as f,d as v,q as _e,c as pe,t as A}from"./app-921b3388.js";import{_ as fe}from"./AuthenticatedLayout-3c49effc.js";import{S as ve}from"./sortable.esm-0d19b1d3.js";import{a as be}from"./common-ba477221.js";import"./ApplicationLogo-4707e5da.js";const ge=i("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Manage Subdomain",-1),he={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},we={class:"tw-flex tw-justify-between"},ye={class:"tw-flex tw-items-center tw-justify-end"},Se=i("span",{class:"tw-text-h5"},"Neue Subdomäne",-1),Ve=i("p",null,"Sind Sie sicher, dass Sie den aktuellen Mielenstein löschen möchten?",-1),xe=["data-id","data-order"],ke=i("span",null,"neu anordnen",-1),Ce=i("span",null,"Domäne anzeigen",-1),ze=i("span",null,"Benutzer löschen",-1),De=i("div",{class:"tw-py-6"},[i("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Te={__name:"ManageSubdomain",props:{subdomain:Object,errors:Object},setup(P){const q=P;oe.Inertia.on("success",a=>{let l=a.detail.page.props;a.detail.page.component==="Domains/Partials/ManageSubdomain"&&l&&(V.value=l.subdomain)}),se().props.auth.user;const V=S(q.subdomain),m=S(q.errors||{}),$=S(!1),z=S(!1),G=S(null),D=S(!1),Z=[{title:"Kürzel",key:"abbreviation",width:"10%",sortable:!1},{title:"Titel",key:"title",width:"20%",sortable:!1},{title:"Subtext",key:"text",width:"60%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],L=ne(()=>q.subdomain.milestones.map(a=>{const l={...a};for(const _ in l)(l[_]===null||l[_]===void 0)&&(l[_]="-");return l}));re(D,a=>{a||h()}),de(()=>{const a={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(l){J(l)}};ve.create(document.querySelector(".v-data-table tbody"),a)});const h=()=>{D.value=!1,z.value=!1,n.reset(),n.clearErrors(),m.value={}},H=()=>{n.reset(),n.clearErrors()},F=U({items:[]}),J=a=>{F.processing=!0;let l=[],_=0;[].forEach.call(a.from.querySelectorAll("tr"),function(c,g){c.setAttribute("data-order",_+g),l.push({id:c.getAttribute("data-id"),order:_+g})}),F.items=l,F.post(route("milestones.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:c=>{},onError:c=>{m.value=c},onFinish:()=>{F.processing=!1}})},Q=a=>{x.id=a.id,z.value=!0},x=U({id:null}),R=async()=>{x.processing=!0;let a={onSuccess:l=>{h()},onError:l=>{m.value=l},onFinish:()=>{x.processing=!1}};x.delete(route("milestones.destroy",{id:x.id}),a)},w=U({id:V.value.id,name:V.value.name}),W=async()=>{w.processing=!0;let a={preserveState:!1,onSuccess:l=>{h()},onError:l=>{m.value=l},onFinish:()=>{w.processing=!1}};w.put(route("subdomains.update",{subdomain:w.id}),a)},n=U({subdomain:V.value.id,abbreviation:null,title:null,text:null,emphasis:null,emphasis_daz:null,age:null}),X=async()=>{n.processing=!0,n.post(route("milestones.store"),{preserveState:!1,onSuccess:a=>{h()},onError:a=>{m.value=a},onFinish:()=>{n.processing=!1}})};return(a,l)=>{const _=r("v-btn"),c=r("v-hover"),g=r("v-btn-primary"),p=r("v-col"),b=r("v-row"),y=r("v-container"),k=r("v-text-field"),Y=r("v-card-title"),ee=r("v-select"),te=r("v-textarea"),T=r("v-card-text"),N=r("v-spacer"),B=r("v-card-actions"),I=r("v-card"),O=r("v-dialog"),M=r("v-icon"),E=r("v-tooltip"),le=r("v-data-table-server"),ae=ie("sortable-data-table");return j(),ue(ce,null,[e(d(me),{title:"Manage Subdomain"}),e(fe,{errors:m.value},{header:t(()=>[ge]),default:t(()=>[i("div",he,[e(y,null,{default:t(()=>[e(b,null,{default:t(()=>[e(p,{cols:"12",md:"3",sm:"4"},{default:t(()=>[i("div",we,[e(c,null,{default:t(({isHovering:o,props:u})=>[e(d(K),{href:a.route("domains.show",{id:V.value.domain_id})},{default:t(()=>[e(_,f(u,{color:o?"primary":"accent"}),{default:t(()=>[v("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(c,null,{default:t(({isHovering:o,props:u})=>[e(g,f({onClick:W},u,{color:o?"accent":"primary"}),{default:t(()=>[v("Speichern ")]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(b,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[e(k,{modelValue:d(w).name,"onUpdate:modelValue":l[0]||(l[0]=o=>d(w).name=o),"error-messages":m.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(b,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[i("div",ye,[e(c,null,{default:t(({isHovering:o,props:u})=>[e(_,f(u,{color:o?"accent":"primary",dark:""}),{default:t(()=>[v(" Anlegen "),e(O,{modelValue:D.value,"onUpdate:modelValue":l[7]||(l[7]=s=>D.value=s),activator:"parent",width:"80vw"},{default:t(()=>[e(I,{height:"80vh"},{default:t(()=>[e(Y,null,{default:t(()=>[Se]),_:1}),e(T,null,{default:t(()=>[e(y,null,{default:t(()=>[e(b,null,{default:t(()=>[e(p,{cols:"12",sm:"3"},{default:t(()=>[e(k,{modelValue:d(n).abbreviation,"onUpdate:modelValue":l[1]||(l[1]=s=>d(n).abbreviation=s),"error-messages":m.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(p,{cols:"12",sm:"3"},{default:t(()=>[e(ee,{modelValue:d(n).age,"onUpdate:modelValue":l[2]||(l[2]=s=>d(n).age=s),items:d(be),"error-messages":m.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),e(p,{cols:"12",sm:"3"},{default:t(()=>[e(k,{modelValue:d(n).emphasis,"onUpdate:modelValue":l[3]||(l[3]=s=>d(n).emphasis=s),"error-messages":m.value.emphasis,type:"number",label:"Gewichtung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(p,{cols:"12",sm:"3"},{default:t(()=>[e(k,{modelValue:d(n).emphasis_daz,"onUpdate:modelValue":l[4]||(l[4]=s=>d(n).emphasis_daz=s),"error-messages":m.value.emphasis_daz,type:"number",label:"Gewichtung mit Daz*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[e(k,{modelValue:d(n).title,"onUpdate:modelValue":l[5]||(l[5]=s=>d(n).title=s),"error-messages":m.value.title,label:"Titel*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[e(te,{modelValue:d(n).text,"onUpdate:modelValue":l[6]||(l[6]=s=>d(n).text=s),"error-messages":m.value.text,label:"Subtext*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(c,null,{default:t(({isHovering:s,props:C})=>[e(g,f({onClick:H},C,{color:s?"accent":"primary"}),{default:t(()=>[v("Clear")]),_:2},1040,["color"])]),_:2},1024),e(N),e(c,null,{default:t(({isHovering:s,props:C})=>[e(_,f({onClick:h},C,{color:s?"accent":"primary"}),{default:t(()=>[v("Cancel")]),_:2},1040,["color"])]),_:2},1024),e(c,null,{default:t(({isHovering:s,props:C})=>[e(g,f({onClick:X},C,{color:s?"accent":"primary"}),{default:t(()=>[v("Save")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(O,{modelValue:z.value,"onUpdate:modelValue":l[8]||(l[8]=o=>z.value=o),width:"20vw"},{default:t(()=>[e(I,{height:"30vh"},{default:t(()=>[e(T,null,{default:t(()=>[e(y,null,{default:t(()=>[e(b,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[Ve]),_:1})]),_:1})]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(N),e(c,null,{default:t(({isHovering:o,props:u})=>[e(_,f({onClick:h},u,{color:o?"accent":"primary"}),{default:t(()=>[v("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(c,null,{default:t(({isHovering:o,props:u})=>[e(g,f({onClick:R},u,{color:o?"accent":"primary"}),{default:t(()=>[v("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(b,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[_e((j(),pe(le,{"items-per-page":-1,headers:Z,items:L.value,loading:$.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:t(({item:o})=>[i("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[i("td",null,A(o.selectable.abbreviation),1),i("td",null,A(o.selectable.title),1),i("td",null,A(o.selectable.text),1),i("td",null,[e(E,{location:"top"},{activator:t(({props:u})=>[e(M,f({draggable:"true",onDragstart:s=>G.value=o.raw,color:"primary"},u,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:t(()=>[v("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:t(()=>[ke]),_:2},1024),e(E,{location:"top"},{activator:t(({props:u})=>[e(d(K),{href:a.route("milestones.show",{id:o.selectable.id})},{default:t(()=>[e(M,f(u,{size:"small",class:"tw-me-2"}),{default:t(()=>[v("mdi-eye")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[Ce]),_:2},1024),e(E,{location:"top"},{activator:t(({props:u})=>[e(M,f(u,{size:"small",class:"tw-me-2",onClick:s=>Q(o.raw)}),{default:t(()=>[v("mdi-delete ")]),_:2},1040,["onClick"])]),default:t(()=>[ze]),_:2},1024)])],8,xe)]),"no-data":t(()=>[De]),_:1},8,["items","loading"])),[[ae]])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Te as default};
