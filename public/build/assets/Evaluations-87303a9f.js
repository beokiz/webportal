import{d as ce}from"./index-bc58436b.js";import{K as de,k as r,h as pe,m as ve,T as N,r as u,n as _e,o as S,f as J,a as t,u as b,w as e,F as me,Z as fe,i as Q,p as m,d as c,g as V,b as n,t as w,q as he,c as $,O as ge}from"./app-51f4afb2.js";import{f as A}from"./common-326e1711.js";import{_ as be}from"./AuthenticatedLayout-edda0b11.js";import{_ as we}from"./EvaluationDomainsList-a9016710.js";import"./ApplicationLogo-baa6cee2.js";const ye=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einschätzungen",-1),ke={key:0,class:"tw-flex tw-items-center tw-justify-end"},Ee={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Se=["data-id","data-order"],Pe={align:"center"},ze=n("span",null,"Einschätzung bearbeiten",-1),xe=n("span",null,"Einschätzung ansehen",-1),De=n("span",null,"Einschätzung löschen",-1),Fe=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Ce={class:"tw-text-center"},Ie=n("h1",{class:"tw-uppercase text-primary tw-font-black tw-text-xl tw-mb-8"}," Screening wurde eingereicht ",-1),Ne=n("p",{class:"tw-mb-8"}," Folgendes Screening wurde eingereicht und kann nur bis 15 Minuten nach Einreichung bearbeitet werden. Danach verschwindet es aus Ihrer Übersicht. Sollten Sie es zurückziehen oder bearbeiten wollen, klicke Sie auf 'Abgabe zurückziehen. Nachfolgend erhalten Sie eine Übersicht des eingereichten Screenings, welches Sie über den Download-Button als PDF herunterladen können. ",-1),Ve=n("span",{class:"tw-font-black"},"Bezeichner des Screenings",-1),je={__name:"Evaluations",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(W){const d=W;ce.Inertia.on("success",l=>{let a=l.detail.page.props;l.detail.page.component==="Evaluations/Evaluations"&&a&&(f.value=a.currentPage,y.value=a.perPage,B.value=a.orderBy,X.value=a.sort,T.value=a.total,Y.value=a.lastPage)}),de().props.auth.user;const f=r(d.currentPage),y=r(d.perPage),B=r(d.orderBy),X=r(d.sort),T=r(d.total),Y=r(d.lastPage),ee=r(""),_=r(d.errors||{}),D=r(!1),O=r(!1),P=r(!1),U=r(null),z=r(!1),k=r(null),j=r(null),te=[{title:"UUID",key:"uuid",width:"40%",sortable:!1},{title:"Zullet bearbeitet",key:"updated_at",width:"15%",sortable:!1},{title:"Abgegeben am",key:"created_at",width:"15%",sortable:!1},{title:"Bearbetungszeit endet",key:"finished_at",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],ae=pe(()=>d.items.map(l=>{const a={...l};for(const i in a)(a[i]===null||a[i]===void 0)&&(a[i]="-");return a}));ve(O,l=>{l||g()});const le=async({page:l,itemsPerPage:a,sortBy:i,clearFilters:p})=>{if(l!==f.value||l===f.value&&p||[l,a,i]!==[f.value,y.value,B.value]){D.value=!0;let v={data:{page:l,per_page:a}};i&&i.length>0&&(v.data.order_by=i[0].key,v.data.sort=i[0].order),await ge.reload(v),f.value=l,y.value=a,D.value=!1}},oe=l=>{U.value=l.uuid,E.id=l.id,P.value=!0},h=N({id:null}),ne=async l=>{h.id=l.id,h.processing=!0,h.post(route("evaluations.show_popup",{id:h.id}),{onSuccess:a=>{h.clearErrors(),_.value={},z.value=!0,k.value=a.props.data.item,j.value=a.props.data.domains},onError:a=>{_.value=a},onFinish:()=>{h.processing=!1}})},g=()=>{O.value=!1,P.value=!1,z.value=!1,_.value={}},E=N({id:null}),se=async()=>{E.processing=!0;let l={onSuccess:a=>{g()},onError:a=>{g(),_.value=a},onFinish:()=>{E.processing=!1}};E.delete(route("evaluations.destroy",{id:E.id}),l)},x=N({}),re=async l=>{x.processing=!0,x.post(route("evaluations.unfinished",{id:l}),{preserveState:!1,onSuccess:a=>{x.clearErrors(),_.value={},g()},onError:a=>{_.value=a},onFinish:()=>{x.processing=!1}})};return(l,a)=>{const i=u("v-btn-primary"),p=u("v-hover"),v=u("v-col"),R=u("v-row"),Z=u("v-container"),q=u("v-card-text"),K=u("v-spacer"),F=u("v-btn"),L=u("v-card-actions"),M=u("v-card"),G=u("v-dialog"),C=u("v-icon"),I=u("v-tooltip"),ie=u("v-data-table-server"),ue=_e("sortable-data-table");return S(),J(me,null,[t(b(fe),{title:"Einschätzungen"}),t(be,{errors:_.value},{header:e(()=>[ye,l.$page.props.auth.user.is_manager||l.$page.props.auth.user.is_employer?(S(),J("div",ke,[t(b(Q),{href:l.route("evaluations.create")},{default:e(()=>[t(p,null,{default:e(({isHovering:o,props:s})=>[t(i,m(s,{color:o?"accent":"primary"}),{default:e(()=>[c(" Anlegen ")]),_:2},1040,["color"])]),_:1})]),_:1},8,["href"])])):V("",!0),t(G,{modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=o=>P.value=o),width:"20vw"},{default:e(()=>[t(M,{height:"30vh"},{default:e(()=>[t(q,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(R,null,{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+w(U.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(L,null,{default:e(()=>[t(K),t(p,null,{default:e(({isHovering:o,props:s})=>[t(F,m({onClick:g},s,{color:o?"accent":"primary"}),{default:e(()=>[c("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(p,null,{default:e(({isHovering:o,props:s})=>[t(i,m({onClick:se},s,{color:o?"accent":"primary"}),{default:e(()=>[c("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[n("div",Ee,[he((S(),$(ie,{"items-per-page":y.value,"onUpdate:itemsPerPage":a[1]||(a[1]=o=>y.value=o),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:te,page:f.value,"items-length":T.value,items:ae.value,search:ee.value,loading:D.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":le},{item:e(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,w(o.selectable.uuid),1),n("td",null,w(b(A)(o.selectable.updated_at,"sv-SE")),1),n("td",null,w(b(A)(o.selectable.created_at,"sv-SE")),1),n("td",null,w(b(A)(o.selectable.finished_at,"sv-SE")),1),n("td",Pe,[o.selectable.editable&&(l.$page.props.auth.user.is_manager||l.$page.props.auth.user.is_employer)?(S(),$(I,{key:0,location:"top"},{activator:e(({props:s})=>[t(b(Q),{href:l.route("evaluations.edit",{id:o.selectable.id})},{default:e(()=>[t(C,m(s,{size:"small",class:"tw-me-2"}),{default:e(()=>[c("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[ze]),_:2},1024)):V("",!0),o.selectable.finished?(S(),$(I,{key:1,location:"top"},{activator:e(({props:s})=>[t(C,m(s,{size:"small",class:"tw-me-2",onClick:H=>ne(o.raw)}),{default:e(()=>[c("mdi-eye")]),_:2},1040,["onClick"])]),default:e(()=>[xe]),_:2},1024)):V("",!0),t(I,{location:"top"},{activator:e(({props:s})=>[t(C,m(s,{size:"small",class:"tw-me-2",onClick:H=>oe(o.raw)}),{default:e(()=>[c("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[De]),_:2},1024)])],8,Se)]),"no-data":e(()=>[Fe]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ue]])]),t(G,{modelValue:z.value,"onUpdate:modelValue":a[3]||(a[3]=o=>z.value=o),width:"95vw"},{default:e(()=>[t(M,{height:"95vh"},{default:e(()=>[t(q,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(R,{class:"result-evaluation-domains"},{default:e(()=>[t(v,{cols:"8",offset:"2"},{default:e(()=>[n("div",Ce,[Ie,Ne,t(p,null,{default:e(({isHovering:o,props:s})=>[t(F,{href:l.route("evaluations.pdf",{id:k.value.id}),class:"tw-px-2 tw-py-3 tw-mb-4 tw-mr-4 tw-normal-case",color:o?"primary":"accent"},{default:e(()=>[c(" Screening als PDF downloaden ")]),_:2},1032,["href","color"])]),_:1}),t(p,null,{default:e(({isHovering:o,props:s})=>[t(F,{onClick:a[2]||(a[2]=H=>re(k.value.id)),class:"tw-px-2 tw-py-3 tw-mb-4 tw-normal-case",color:o?"accent":"primary"},{default:e(()=>[c(" Abgabe zurückziehen ")]),_:2},1032,["color"])]),_:1})])]),_:1}),t(v,{cols:"12"},{default:e(()=>[n("p",null,[Ve,c(": "+w(k.value.uuid),1)])]),_:1}),t(v,{cols:"12"},{default:e(()=>[t(we,{ratings:k.value.data,domains:j.value,disabled:!0},null,8,["ratings","domains"])]),_:1})]),_:1})]),_:1})]),_:1}),t(L,null,{default:e(()=>[t(K),t(p,null,{default:e(({isHovering:o,props:s})=>[t(i,m({onClick:g},s,{color:o?"accent":"primary"}),{default:e(()=>[c("Abbrechen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["errors"])],64)}}};export{je as default};
