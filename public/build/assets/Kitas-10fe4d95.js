import{d as me}from"./index-6b9a2542.js";import{K as _e,k as c,h as q,m as pe,T as Q,r as u,n as ve,f as D,a as e,u as n,w as t,F as W,o as k,Z as fe,b as i,c as K,p as b,d as f,g as X,t as T,q as ge,i as be,O as he}from"./app-1df4a2b0.js";import{_ as we}from"./AuthenticatedLayout-f49f05d9.js";import"./ApplicationLogo-8aa8609b.js";const ye=i("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einrichtungen",-1),Ve={class:"tw-flex tw-items-center tw-justify-end"},ke=i("span",{class:"tw-text-h5"},"Verwalte Einrichtung",-1),Pe={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},xe={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},Se={class:"tw-w-full"},Ee={class:"tw-ml-6"},Ne=["data-id","data-order"],ze=i("span",null,"Einrichtung bearbeiten",-1),Ue=i("span",null,"Einrichtung löschen",-1),Ce={class:"tw-py-6"},Fe={key:0,class:"tw-mb-4"},qe=i("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),$e={__name:"Kitas",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object,roles:Array},setup(Y){const g=Y;me.Inertia.on("success",r=>{let l=r.detail.page.props;r.detail.page.component==="Kitas/Kitas"&&l&&(N.value=l.currentPage,P.value=l.perPage,ee.value=l.orderBy,te.value=l.sort,B.value=l.total,le.value=l.lastPage,h.value=l.filters.search??null)}),_e().props.auth.user;const N=c(g.currentPage),P=c(g.perPage),ee=c(g.orderBy),te=c(g.sort),B=c(g.total),le=c(g.lastPage),h=c(g.filters.search??null),$=c(""),m=c(g.errors||{}),C=c(!1),z=c(!1),U=c(!1),A=c(null),ae=[{title:"Name",key:"name",width:"70%",sortable:!1},{title:"Postleitzahl",key:"zip_code",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],oe=q(()=>g.items.map(r=>{const l={...r};for(const p in l)(l[p]===null||l[p]===void 0)&&(l[p]="-");return l})),O=q(()=>h.value===null),re=q(()=>h.value!==null);pe(z,r=>{r||y()});const j=async({page:r,itemsPerPage:l,sortBy:p,clearFilters:_})=>{if(_&&(h.value=null),r===N.value&&_||O||re){C.value=!0;let d={data:{page:r,per_page:l}};p&&p.length>0&&(d.data.order_by=p[0].key,d.data.sort=p[0].order),d.data.search=h.value,await he.reload(d),N.value=r,P.value=l,C.value=!1}},se=r=>{A.value=r.name,x.id=r.id,U.value=!0},x=Q({id:null}),ne=async()=>{x.processing=!0;let r={onSuccess:l=>{y()},onError:l=>{y(),m.value=l},onFinish:()=>{x.processing=!1}};x.delete(route("kitas.destroy",{id:x.id}),r)},y=()=>{z.value=!1,U.value=!1,o.reset(),o.clearErrors(),m.value={}},ue=()=>{o.reset(),o.clearErrors()},o=Q({name:null,zip_code:null,number:null,provider_of_the_kita:null,street:null,house_number:null,additional_info:null,city:null}),ie=async()=>{o.processing=!0,o.post(route("kitas.store"),{onSuccess:r=>{y()},onError:r=>{m.value=r},onFinish:()=>{o.processing=!1}})};return(r,l)=>{const p=u("v-card-title"),_=u("v-text-field"),d=u("v-col"),V=u("v-row"),I=u("v-container"),Z=u("v-card-text"),F=u("v-btn-primary"),w=u("v-hover"),H=u("v-spacer"),S=u("v-btn"),L=u("v-card-actions"),R=u("v-card"),G=u("v-dialog"),J=u("v-icon"),M=u("v-tooltip"),de=u("v-data-table-server"),ce=ve("sortable-data-table");return k(),D(W,null,[e(n(fe),{title:"Einrichtungen"}),e(we,{errors:m.value},{header:t(()=>[ye,i("div",Ve,[r.$page.props.auth.user.is_manager?X("",!0):(k(),K(w,{key:0},{default:t(({isHovering:s,props:v})=>[e(S,b(v,{color:s?"accent":"primary",dark:""}),{default:t(()=>[f(" Anlegen "),e(G,{modelValue:z.value,"onUpdate:modelValue":l[8]||(l[8]=a=>z.value=a),activator:"parent",width:"80vw"},{default:t(()=>[e(R,{height:"80vh"},{default:t(()=>[e(p,null,{default:t(()=>[ke]),_:1}),e(Z,null,{default:t(()=>[e(I,null,{default:t(()=>[e(V,null,{default:t(()=>[e(d,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:n(o).name,"onUpdate:modelValue":l[0]||(l[0]=a=>n(o).name=a),"error-messages":m.value.name,label:"Name der Einrichtung / Einrichtung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:n(o).number,"onUpdate:modelValue":l[1]||(l[1]=a=>n(o).number=a),"error-messages":m.value.number,label:"Kita Nummer*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(d,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:n(o).provider_of_the_kita,"onUpdate:modelValue":l[2]||(l[2]=a=>n(o).provider_of_the_kita=a),"error-messages":m.value.provider_of_the_kita,label:"Träger der Einrichtung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:n(o).street,"onUpdate:modelValue":l[3]||(l[3]=a=>n(o).street=a),"error-messages":m.value.street,label:"Straße*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(d,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:n(o).house_number,"onUpdate:modelValue":l[4]||(l[4]=a=>n(o).house_number=a),"error-messages":m.value.house_number,label:"Hausnummer*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:n(o).additional_info,"onUpdate:modelValue":l[5]||(l[5]=a=>n(o).additional_info=a),"error-messages":m.value.additional_info,label:"Sonstiges*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(d,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:n(o).zip_code,"onUpdate:modelValue":l[6]||(l[6]=a=>n(o).zip_code=a),"error-messages":m.value.zip_code,label:"Postleitzahl*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:n(o).city,"onUpdate:modelValue":l[7]||(l[7]=a=>n(o).city=a),"error-messages":m.value.city,label:"Stadt*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(w,null,{default:t(({isHovering:a,props:E})=>[e(F,b({onClick:ue},E,{color:a?"accent":"primary"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(H),e(w,null,{default:t(({isHovering:a,props:E})=>[e(S,b({onClick:y},E,{color:a?"accent":"primary"}),{default:t(()=>[f("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(w,null,{default:t(({isHovering:a,props:E})=>[e(F,b({onClick:ie},E,{color:a?"accent":"primary"}),{default:t(()=>[f("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1}))]),e(G,{modelValue:U.value,"onUpdate:modelValue":l[9]||(l[9]=s=>U.value=s),width:"20vw"},{default:t(()=>[e(R,{height:"30vh"},{default:t(()=>[e(Z,null,{default:t(()=>[e(I,null,{default:t(()=>[e(V,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[i("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+T(A.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(H),e(w,null,{default:t(({isHovering:s,props:v})=>[e(S,b({onClick:y},v,{color:s?"accent":"primary"}),{default:t(()=>[f("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(w,null,{default:t(({isHovering:s,props:v})=>[e(F,b({onClick:ne},v,{color:s?"accent":"primary"}),{default:t(()=>[f("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:t(()=>[i("div",Pe,[i("div",xe,[i("div",Se,[e(V,null,{default:t(()=>[e(d,{cols:"12",sm:"5"},{default:t(()=>[e(_,{modelValue:h.value,"onUpdate:modelValue":l[10]||(l[10]=s=>h.value=s),label:"Name"},null,8,["modelValue"])]),_:1})]),_:1})]),i("div",Ee,[e(w,null,{default:t(({isHovering:s,props:v})=>[e(S,b({class:"tw-mt-2"},v,{color:s?"accent":"primary",onClick:l[11]||(l[11]=a=>$.value=String(Date.now())),dark:""}),{default:t(()=>[f("Suche")]),_:2},1040,["color"])]),_:1})])]),ge((k(),K(de,{"items-per-page":P.value,"onUpdate:itemsPerPage":l[13]||(l[13]=s=>P.value=s),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:ae,page:N.value,"items-length":B.value,items:oe.value,search:$.value,loading:C.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":j},{item:t(({item:s})=>[i("tr",{"data-id":s.selectable.id,"data-order":s.selectable.order},[i("td",null,T(s.selectable.name),1),i("td",null,T(s.selectable.zip_code),1),i("td",null,[e(M,{location:"top"},{activator:t(({props:v})=>[e(n(be),{href:r.route("kitas.show",{id:s.selectable.id})},{default:t(()=>[e(J,b(v,{size:"small",class:"tw-me-2"}),{default:t(()=>[f("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[ze]),_:2},1024),r.$page.props.auth.user.is_manager?X("",!0):(k(),K(M,{key:0,location:"top"},{activator:t(({props:v})=>[e(J,b(v,{size:"small",class:"tw-me-2",onClick:a=>se(s.raw)}),{default:t(()=>[f("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[Ue]),_:2},1024))])],8,Ne)]),"no-data":t(()=>[i("div",Ce,[O.value?(k(),D("h3",Fe,"Die Tabelle ist leer.")):(k(),D(W,{key:1},[qe,e(S,{color:"primary",onClick:l[12]||(l[12]=s=>j({page:1,itemsPerPage:P.value,clearFilters:!0}))},{default:t(()=>[f("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ce]])])]),_:1},8,["errors"])],64)}}};export{$e as default};
