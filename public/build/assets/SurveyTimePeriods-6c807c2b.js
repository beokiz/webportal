import{d as Ve}from"./index-3d8425cc.js";import{K as Ee,k as r,h as j,m as J,T as oe,r as n,n as Pe,f as Z,a as e,u as p,w as l,F as ne,o as A,Z as xe,b as u,p as v,d as g,t as S,q as Se,c as De,i as Ne,O as Te}from"./app-cff3aad5.js";import{_ as Ue}from"./AuthenticatedLayout-d9864ee0.js";import{a as Fe,c as se,b as re}from"./common-1f9d3448.js";import"./ApplicationLogo-6c4ba6ee.js";const Ce=u("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einstellungen",-1),Ae={class:"tw-flex tw-items-center tw-justify-end"},Oe=u("span",{class:"tw-text-h5"},"Neuer Rückmeldezeitraum",-1),Be={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Ie=["data-id","data-order"],ze={align:"center"},$e=u("span",null,"Einstellungen bearbeiten",-1),je=u("span",null,"Einstellungen löschen",-1),Je={class:"tw-py-6"},Ze={key:0,class:"tw-mb-4"},Me=u("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),Le={__name:"SurveyTimePeriods",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object,roles:Array},setup(ue){const _=ue;Ve.Inertia.on("success",o=>{let t=o.detail.page.props;o.detail.page.component==="SurveyTimePeriods/SurveyTimePeriods"&&t&&(D.value=t.currentPage,w.value=t.perPage,ie.value=t.orderBy,de.value=t.sort,M.value=t.total,ce.value=t.lastPage,k.value=t.filters.search??null)}),Ee().props.auth.user;const D=r(_.currentPage),w=r(_.perPage),ie=r(_.orderBy),de=r(_.sort),M=r(_.total),ce=r(_.lastPage),k=r(_.filters.search??null),ve=r(""),f=r(_.errors||{}),O=r(!1),N=r(!1),T=r(!1),R=r(null),B=r(!1),I=r(!1),U=r(null),F=r(null),V=r(),E=r(),_e=[{title:"Jahr",key:"year",width:"10%",sortable:!1},{title:"Altersgruppe (Jahre)",key:"age",width:"15%",sortable:!1},{title:"Erhebungsbeginn",key:"survey_start_date",width:"15%",sortable:!1},{title:"Erhebungsende",key:"survey_end_date",width:"50%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],me=j(()=>_.items.map(o=>{const t={...o};for(const d in t)(t[d]===null||t[d]===void 0)&&(t[d]="-");return t})),q=j(()=>k.value===null),pe=j(()=>k.value!==null);J(N,o=>{o||b()}),J(V,o=>{U.value=re(o)}),J(E,o=>{F.value=re(o)});const G=async({page:o,itemsPerPage:t,sortBy:d,clearFilters:y})=>{if(y&&(k.value=null),o===D.value&&y||q||pe){O.value=!0;let c={data:{page:o,per_page:t}};d&&d.length>0&&(c.data.order_by=d[0].key,c.data.sort=d[0].order),c.data.search=k.value,await Te.reload(c),D.value=o,w.value=t,O.value=!1}},ge=o=>{R.value=o.year,P.id=o.id,T.value=!0},P=oe({id:null}),fe=async()=>{P.processing=!0;let o={onSuccess:t=>{b()},onError:t=>{b(),f.value=t},onFinish:()=>{P.processing=!1}};P.delete(route("survey_time_periods.destroy",{id:P.id}),o)},b=()=>{N.value=!1,T.value=!1,i.reset(),i.clearErrors(),U.value=null,F.value=null,f.value={}},be=()=>{i.reset(),i.clearErrors(),U.value=null,F.value=null},i=oe({year:null,age:null,survey_start_date:null,survey_end_date:null}),ye=async()=>{i.processing=!0,i.survey_start_date=new Date(V.value),i.survey_end_date=new Date(E.value),i.post(route("survey_time_periods.store"),{onSuccess:o=>{b()},onError:o=>{f.value=o},onFinish:()=>{i.processing=!1}})};return(o,t)=>{const d=n("v-card-title"),y=n("v-text-field"),c=n("v-col"),H=n("v-date-picker"),K=n("v-menu"),L=n("v-locale-provider"),z=n("v-row"),he=n("v-select"),Q=n("v-container"),W=n("v-card-text"),$=n("v-btn-primary"),h=n("v-hover"),X=n("v-spacer"),C=n("v-btn"),Y=n("v-card-actions"),ee=n("v-card"),le=n("v-dialog"),te=n("v-icon"),ae=n("v-tooltip"),we=n("v-data-table-server"),ke=Pe("sortable-data-table");return A(),Z(ne,null,[e(p(xe),{title:"Einstellungen"}),e(Ue,{errors:f.value},{header:l(()=>[Ce,u("div",Ae,[e(h,null,{default:l(({isHovering:s,props:m})=>[e(C,v(m,{color:s?"accent":"primary",dark:""}),{default:l(()=>[g(" ZEITRAUM HINZUFÜGEN "),e(le,{modelValue:N.value,"onUpdate:modelValue":t[8]||(t[8]=a=>N.value=a),activator:"parent",width:"80vw"},{default:l(()=>[e(ee,{height:"80vh"},{default:l(()=>[e(d,null,{default:l(()=>[Oe]),_:1}),e(W,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(z,null,{default:l(()=>[e(c,{cols:"12",sm:"6"},{default:l(()=>[e(y,{modelValue:p(i).year,"onUpdate:modelValue":t[0]||(t[0]=a=>p(i).year=a),"error-messages":f.value.year,label:"Jahr*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(c,{cols:"12",sm:"6"},{default:l(()=>[e(L,{locale:"de"},{default:l(()=>[e(K,{modelValue:B.value,"onUpdate:modelValue":t[3]||(t[3]=a=>B.value=a),"return-value":V.value,"close-on-content-click":!1},{activator:l(({props:a})=>[e(y,v({label:"Erhebungsbeginn*",class:"tw-cursor-pointer","model-value":U.value,"prepend-icon":"mdi-calendar",readonly:""},a),null,16,["model-value"])]),default:l(()=>[e(H,{"onUpdate:modelValue":[t[1]||(t[1]=a=>B.value=!1),t[2]||(t[2]=a=>V.value=a)],modelValue:V.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(z,null,{default:l(()=>[e(c,{cols:"12",sm:"6"},{default:l(()=>[e(he,{modelValue:p(i).age,"onUpdate:modelValue":t[4]||(t[4]=a=>p(i).age=a),items:p(Fe),"error-messages":f.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe (Jahre)*"},null,8,["modelValue","items","error-messages"])]),_:1}),e(c,{cols:"12",sm:"6"},{default:l(()=>[e(L,{locale:"de"},{default:l(()=>[e(K,{modelValue:I.value,"onUpdate:modelValue":t[7]||(t[7]=a=>I.value=a),"return-value":E.value,"close-on-content-click":!1},{activator:l(({props:a})=>[e(y,v({label:"Erhebungsende*",class:"tw-cursor-pointer","model-value":F.value,"prepend-icon":"mdi-calendar",readonly:""},a),null,16,["model-value"])]),default:l(()=>[e(H,{"onUpdate:modelValue":[t[5]||(t[5]=a=>I.value=!1),t[6]||(t[6]=a=>E.value=a)],modelValue:E.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Y,null,{default:l(()=>[e(h,null,{default:l(({isHovering:a,props:x})=>[e($,v({onClick:be},x,{color:a?"accent":"primary"}),{default:l(()=>[g("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(X),e(h,null,{default:l(({isHovering:a,props:x})=>[e(C,v({onClick:b},x,{color:a?"accent":"primary"}),{default:l(()=>[g("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(h,null,{default:l(({isHovering:a,props:x})=>[e($,v({onClick:ye},x,{color:a?"accent":"primary"}),{default:l(()=>[g("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})]),e(le,{modelValue:T.value,"onUpdate:modelValue":t[9]||(t[9]=s=>T.value=s),width:"20vw"},{default:l(()=>[e(ee,{height:"30vh"},{default:l(()=>[e(W,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(z,null,{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[u("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+S(R.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Y,null,{default:l(()=>[e(X),e(h,null,{default:l(({isHovering:s,props:m})=>[e(C,v({onClick:b},m,{color:s?"accent":"primary"}),{default:l(()=>[g("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(h,null,{default:l(({isHovering:s,props:m})=>[e($,v({onClick:fe},m,{color:s?"accent":"primary"}),{default:l(()=>[g("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:l(()=>[u("div",Be,[Se((A(),De(we,{"items-per-page":w.value,"onUpdate:itemsPerPage":t[11]||(t[11]=s=>w.value=s),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:_e,page:D.value,"items-length":M.value,items:me.value,search:ve.value,loading:O.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":G},{item:l(({item:s})=>[u("tr",{"data-id":s.selectable.id,"data-order":s.selectable.order},[u("td",null,S(s.selectable.year),1),u("td",null,S(s.selectable.age),1),u("td",null,S(p(se)(s.selectable.survey_start_date,"sv-SE")),1),u("td",null,S(p(se)(s.selectable.survey_end_date,"sv-SE")),1),u("td",ze,[e(ae,{location:"top"},{activator:l(({props:m})=>[e(p(Ne),{href:o.route("survey_time_periods.show",{id:s.selectable.id})},{default:l(()=>[e(te,v(m,{size:"small",class:"tw-me-2"}),{default:l(()=>[g("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[$e]),_:2},1024),e(ae,{location:"top"},{activator:l(({props:m})=>[e(te,v(m,{size:"small",class:"tw-me-2",onClick:a=>ge(s.raw)}),{default:l(()=>[g("mdi-delete")]),_:2},1040,["onClick"])]),default:l(()=>[je]),_:2},1024)])],8,Ie)]),"no-data":l(()=>[u("div",Je,[q.value?(A(),Z("h3",Ze,"Die Tabelle ist leer.")):(A(),Z(ne,{key:1},[Me,e(C,{color:"primary",onClick:t[10]||(t[10]=s=>G({page:1,itemsPerPage:w.value,clearFilters:!0}))},{default:l(()=>[g("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ke]])])]),_:1},8,["errors"])],64)}}};export{Le as default};
