import{d as J}from"./index-8ee44c2b.js";import{K as L,j as m,v as Q,T as W,l as X,r as s,o as _,f as F,a as e,u as n,w as t,F as Y,Z as ee,b as p,c as b,h as D,m as y,d as f,t as te,x as ae}from"./app-5ba13249.js";import{p as V,a as oe}from"./common-ea192878.js";import{_ as se}from"./AuthenticatedLayout-47a9b000.js";import{_ as N}from"./EvaluationDomainsList-8f366724.js";import"./ApplicationLogo-74ad45b0.js";const le=p("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Ampel-Prüfung",-1),ne={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},re=p("h3",null,"Eigenschaften",-1),ce={key:0,class:"tw-flex justify-center items-center tw-bg-white"},ie={class:"tw-text-right"},ue={class:"tw-text-center"},de={class:"tw-uppercase text-primary tw-font-black tw-text-xl tw-mb-8"},we={__name:"MakeEvaluationScreening",props:{domains:Array,dazDependent:{type:Boolean,default:!1},errors:Object},setup(g){const w=g;J.Inertia.on("success",o=>{o.detail.page.props,o.detail.page.component}),L().props.auth.user;const i=m(w.errors||{}),k=m(!1),z=m([]),h=m(!1),E=m(null),B=m(null);Q(()=>{S()});const U=o=>{a.ratings=o},P=o=>{z.value=ae(o)?o.value:o},S=()=>{a.ratings=V(w.domains)},R=()=>{i.value={},h.value=!1},j=()=>{a.reset(),a.clearErrors(),i.value={},a.ratings=V(w.domains)},a=W({age:null,is_daz:!1,ratings:[]});X(()=>a.age,o=>{a.ratings=V(w.domains)});const I=async()=>{a.processing=!0,k.value=!0,a.post(route("screening.make"),{onSuccess:o=>{a.clearErrors(),i.value={},h.value=!0,E.value=o.props.data.evaluation,B.value=o.props.data.domain.name},onError:o=>{i.value=o},onFinish:()=>{a.processing=!1,k.value=!1}})};return(o,u)=>{const r=s("v-col"),d=s("v-row"),x=s("v-container"),K=s("v-select"),M=s("v-checkbox"),T=s("v-progress-circular"),A=s("v-btn"),v=s("v-hover"),C=s("v-btn-primary"),Z=s("v-icon"),$=s("v-card-text"),H=s("v-spacer"),O=s("v-card-actions"),q=s("v-card"),G=s("v-dialog");return _(),F(Y,null,[e(n(ee),{title:"Ampel-Prüfung"}),e(se,{errors:i.value},{header:t(()=>[le]),default:t(()=>[p("div",ne,[e(x,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[re]),_:1})]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{cols:"12",sm:"3"},{default:t(()=>[e(K,{modelValue:n(a).age,"onUpdate:modelValue":u[0]||(u[0]=l=>n(a).age=l),items:n(oe),"error-messages":i.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),g.dazDependent?(_(),b(r,{key:0,cols:"12",sm:"3"},{default:t(()=>[e(M,{modelValue:n(a).is_daz,"onUpdate:modelValue":u[1]||(u[1]=l=>n(a).is_daz=l),label:"Deutsch ist nicht Erstsprache des Kindes"},null,8,["modelValue"])]),_:1})):D("",!0)]),_:1}),e(d,{class:"manage-evaluation-domains"},{default:t(()=>[n(a).age?(_(),b(N,{key:0,ratings:n(a).ratings,age:n(a).age,domains:g.domains,errors:i.value,onUpdateRatingData:U,onUpdateDomainsData:P},null,8,["ratings","age","domains","errors"])):D("",!0)]),_:1})]),_:1}),e(x,null,{default:t(()=>[k.value?(_(),F("div",ce,[e(T,{indeterminate:"",size:40})])):(_(),b(d,{key:1},{default:t(()=>[e(r,{cols:"12",sm:"6"},{default:t(()=>[e(v,null,{default:t(({isHovering:l,props:c})=>[e(A,y({onClick:j},c,{color:l?"primary":"accent"}),{default:t(()=>[f(" Zurücksetzen ")]),_:2},1040,["color"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"6",align:"right"},{default:t(()=>[n(a).age&&z.value.length>0?(_(),b(v,{key:0},{default:t(({isHovering:l,props:c})=>[e(C,y({onClick:I},c,{color:l?"accent":"primary"}),{default:t(()=>[f(" Ampel-Bewertung ")]),_:2},1040,["color"])]),_:1})):D("",!0)]),_:1})]),_:1}))]),_:1})]),e(G,{modelValue:h.value,"onUpdate:modelValue":u[2]||(u[2]=l=>h.value=l),width:"95vw"},{default:t(()=>[e(q,{height:"95vh"},{default:t(()=>[e($,null,{default:t(()=>[e(x,null,{default:t(()=>[e(d,{class:"result-evaluation-domains"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(v,null,{default:t(({isHovering:l,props:c})=>[p("div",ie,[e(Z,y(c,{size:"small",class:"tw-me-2",onClick:R,title:"Fenster schließen"}),{default:t(()=>[f("mdi-close")]),_:2},1040)])]),_:1})]),_:1})]),_:1}),e(d,{class:"result-evaluation-domains"},{default:t(()=>[e(r,{cols:"8",offset:"2"},{default:t(()=>[p("div",ue,[p("h1",de," Ampelergebnis im Bereich "+te(B.value),1),e(v,null,{default:t(({isHovering:l,props:c})=>[e(A,{href:o.route("screening.pdf",n(a)),class:"tw-px-2 tw-py-3 tw-mb-4 tw-mr-4 tw-normal-case",color:l?"primary":"accent"},{default:t(()=>[f(" Einschätzung als PDF downloaden ")]),_:2},1032,["href","color"])]),_:1})])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(N,{ratings:E.value,age:n(a).age,domains:g.domains,disabled:!0},null,8,["ratings","age","domains"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(H),e(v,null,{default:t(({isHovering:l,props:c})=>[e(C,y({onClick:R},c,{color:l?"accent":"primary"}),{default:t(()=>[f("Abbrechen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["errors"])],64)}}};export{we as default};
