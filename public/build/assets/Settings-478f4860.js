import{d as Be}from"./index-2c30adb2.js";import{K as Le,k as d,h as pe,m as G,T as I,r as u,n as Me,f as ee,a as t,u as c,w as e,F as fe,o as F,Z as Ze,b as n,p as i,d as m,t as k,q as ge,c as te,i as we,x as $e,g as qe,O as He}from"./app-01a54515.js";import{_ as Je}from"./AuthenticatedLayout-1484760e.js";import{a as Re,c as be,f as Ge,b as ye}from"./common-1f9d3448.js";import"./ApplicationLogo-02bc5262.js";const Ke=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einstellungen",-1),Qe={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},We={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},Xe=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Rückmeldungszeiträume",-1),Ye={class:"tw-flex tw-items-center tw-justify-end"},et=n("span",{class:"tw-text-h5"},"Neuer Rückmeldezeitraum",-1),tt=["data-id","data-order"],lt={align:"center"},at=n("span",null,"Einstellungen bearbeiten",-1),ot=n("span",null,"Einstellungen löschen",-1),st=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),nt={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},rt=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"E-Mail Einstellungen",-1),dt={class:"tw-flex tw-items-center tw-justify-start"},ut={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},it={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},ct=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Dateien für den Downloadbereich",-1),mt={class:"tw-flex tw-items-center tw-justify-end"},_t=n("span",{class:"tw-text-h5"},"Neue Datei zum Downloadbereich hinzufügen",-1),vt=["data-id","data-order"],pt={align:"center"},ft=["href"],gt=n("span",null,"Datei herunterladen",-1),wt=n("span",null,"Datei bearbeiten",-1),bt=n("span",null,"Datei löschen",-1),yt=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Dt={__name:"Settings",props:{surveyTimePeriods:Array,settings:Object,downloadableFiles:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(le){const y=le;Be.Inertia.on("success",s=>{let l=s.detail.page.props;s.detail.page.component==="SurveyTimePeriods/SurveyTimePeriods"&&l&&(ae.value=l.currentPage,D.value=l.perPage,he.value=l.orderBy,xe.value=l.sort,ke.value=l.total,Ve.value=l.lastPage,oe.value=l.filters.search??null)}),Le().props.auth.user;const ae=d(y.currentPage),D=d(y.perPage),he=d(y.orderBy),xe=d(y.sort),ke=d(y.total),Ve=d(y.lastPage),oe=d(y.filters.search??null),se=d(""),f=d(y.errors||{}),O=d(!1),K=d(!1),Q=d(!1),j=d(!1),B=d(!1),L=d(!1),M=d(!1),ne=d(null),re=d(null),W=d(null),X=d(null),T=d(),U=d(),Se=d({send_yearly_evaluation_reminder_ntf_before_days:"Anzahl der Tage vor Ende des Bewertungszeitraums für den Versand der Erinnerungsmails"}),De=[{title:"Jahr",key:"year",width:"10%",sortable:!0},{title:"Altersgruppe (Jahre)",key:"age",width:"15%",sortable:!0},{title:"Erhebungsbeginn",key:"survey_start_date",width:"15%",sortable:!0},{title:"Erhebungsende",key:"survey_end_date",width:"50%",sortable:!0},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],Ee=[{title:"Name",key:"name",width:"42.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"42.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}],Pe=pe(()=>de(y.surveyTimePeriods)),Fe=pe(()=>de(y.downloadableFiles));G(j,s=>{s||b()}),G(B,s=>{s||b()});const de=s=>s.map(l=>{const _={...l};for(const v in _)(_[v]===null||_[v]===void 0)&&(_[v]="-");return _}),b=()=>{j.value=!1,B.value=!1,L.value=!1,M.value=!1,Y(),f.value={}},Y=()=>{h.reset(),h.clearErrors(),g.reset(),g.clearErrors(),W.value=null,X.value=null},ue=async({page:s,itemsPerPage:l,sortBy:_})=>{O.value=!0;let v={data:{page:s,per_page:l}};_&&_.length>0&&(v.data.order_by=_[0].key,v.data.sort=_[0].order),v.data.search=oe.value,await He.reload(v),ae.value=s,D.value=l,O.value=!1};G(T,s=>{W.value=ye(s)}),G(U,s=>{X.value=ye(s)});const Te=s=>{C.id=s.id,ne.value=s.year,L.value=!0},h=I({year:null,age:null,survey_start_date:null,survey_end_date:null}),C=I({id:null}),Ue=async()=>{h.processing=!0,h.survey_start_date=new Date(T.value).toLocaleString(),h.survey_end_date=new Date(U.value).toLocaleString(),h.post(route("survey_time_periods.store"),{onSuccess:s=>{b()},onError:s=>{f.value=s},onFinish:()=>{h.processing=!1}})},Ce=async()=>{C.processing=!0;let s={onSuccess:l=>{b()},onError:l=>{b(),f.value=l},onFinish:()=>{C.processing=!1}};C.delete(route("downloadable_files.destroy",{id:C.id}),s)},N=I({settings:y.settings}),Ne=async()=>{N.processing=!0;let s={preserveState:!0,onSuccess:l=>{},onError:l=>{f.value=l},onFinish:()=>{N.processing=!1}};N.post(route("settings.update"),s)},ze=s=>{E.id=s.id,re.value=s.name,M.value=!0},g=I({name:null,file:null}),E=I({id:null}),Ae=async()=>{var s;E.processing=!0,g.file=(s=g.file)!=null&&s.length?g.file[0]:null,g.post(route("downloadable_files.store"),{forceFormData:!0,onSuccess:l=>{b()},onError:l=>{f.value=l},onFinish:()=>{g.processing=!1}})},Ie=async()=>{E.processing=!0;let s={onSuccess:l=>{b()},onError:l=>{b(),f.value=l},onFinish:()=>{E.processing=!1}};E.delete(route("downloadable_files.destroy",{id:E.id}),s)};return(s,l)=>{const _=u("v-card-title"),v=u("v-text-field"),x=u("v-col"),ie=u("v-date-picker"),ce=u("v-menu"),me=u("v-locale-provider"),V=u("v-row"),Oe=u("v-select"),Z=u("v-container"),$=u("v-card-text"),S=u("v-btn-primary"),w=u("v-hover"),q=u("v-spacer"),P=u("v-btn"),H=u("v-card-actions"),J=u("v-card"),R=u("v-dialog"),z=u("v-icon"),A=u("v-tooltip"),_e=u("v-data-table-server"),je=u("v-file-input"),ve=Me("sortable-data-table");return F(),ee(fe,null,[t(c(Ze),{title:"Einstellungen"}),t(Je,{errors:f.value},{header:e(()=>[Ke]),default:e(()=>[n("div",Qe,[n("div",We,[Xe,n("div",Ye,[t(w,null,{default:e(({isHovering:o,props:r})=>[t(P,i(r,{color:o?"accent":"primary",dark:""}),{default:e(()=>[m(" ZEITRAUM HINZUFÜGEN "),t(R,{modelValue:j.value,"onUpdate:modelValue":l[8]||(l[8]=a=>j.value=a),activator:"parent",width:"80vw"},{default:e(()=>[t(J,{height:"80vh"},{default:e(()=>[t(_,null,{default:e(()=>[et]),_:1}),t($,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(V,null,{default:e(()=>[t(x,{cols:"12",sm:"6"},{default:e(()=>[t(v,{modelValue:c(h).year,"onUpdate:modelValue":l[0]||(l[0]=a=>c(h).year=a),"error-messages":f.value.year,label:"Jahr*",required:""},null,8,["modelValue","error-messages"])]),_:1}),t(x,{cols:"12",sm:"6"},{default:e(()=>[t(me,{locale:"de"},{default:e(()=>[t(ce,{modelValue:K.value,"onUpdate:modelValue":l[3]||(l[3]=a=>K.value=a),"return-value":T.value,"close-on-content-click":!1},{activator:e(({props:a})=>[t(v,i({label:"Erhebungsbeginn*",class:"tw-cursor-pointer","model-value":W.value,"prepend-icon":"mdi-calendar",readonly:""},a),null,16,["model-value"])]),default:e(()=>[t(ie,{"onUpdate:modelValue":[l[1]||(l[1]=a=>K.value=!1),l[2]||(l[2]=a=>T.value=a)],modelValue:T.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(V,null,{default:e(()=>[t(x,{cols:"12",sm:"6"},{default:e(()=>[t(Oe,{modelValue:c(h).age,"onUpdate:modelValue":l[4]||(l[4]=a=>c(h).age=a),items:c(Re),"error-messages":f.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe (Jahre)*"},null,8,["modelValue","items","error-messages"])]),_:1}),t(x,{cols:"12",sm:"6"},{default:e(()=>[t(me,{locale:"de"},{default:e(()=>[t(ce,{modelValue:Q.value,"onUpdate:modelValue":l[7]||(l[7]=a=>Q.value=a),"return-value":U.value,"close-on-content-click":!1},{activator:e(({props:a})=>[t(v,i({label:"Erhebungsende*",class:"tw-cursor-pointer","model-value":X.value,"prepend-icon":"mdi-calendar",readonly:""},a),null,16,["model-value"])]),default:e(()=>[t(ie,{"onUpdate:modelValue":[l[5]||(l[5]=a=>Q.value=!1),l[6]||(l[6]=a=>U.value=a)],modelValue:U.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(H,null,{default:e(()=>[t(w,null,{default:e(({isHovering:a,props:p})=>[t(S,i({onClick:Y},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(q),t(w,null,{default:e(({isHovering:a,props:p})=>[t(P,i({onClick:b},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(w,null,{default:e(({isHovering:a,props:p})=>[t(S,i({onClick:Ue},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),t(R,{modelValue:L.value,"onUpdate:modelValue":l[9]||(l[9]=o=>L.value=o),width:"20vw"},{default:e(()=>[t(J,{height:"30vh"},{default:e(()=>[t($,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(V,null,{default:e(()=>[t(x,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+k(ne.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(H,null,{default:e(()=>[t(q),t(w,null,{default:e(({isHovering:o,props:r})=>[t(P,i({onClick:b},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(w,null,{default:e(({isHovering:o,props:r})=>[t(S,i({onClick:Ce},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),ge((F(),te(_e,{"items-per-page":D.value,"onUpdate:itemsPerPage":l[10]||(l[10]=o=>D.value=o),headers:De,items:Pe.value,search:se.value,loading:O.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":ue},{item:e(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,k(o.selectable.year),1),n("td",null,k(o.selectable.age),1),n("td",null,k(c(be)(o.selectable.survey_start_date,"sv-SE")),1),n("td",null,k(c(be)(o.selectable.survey_end_date,"sv-SE")),1),n("td",lt,[t(A,{location:"top"},{activator:e(({props:r})=>[t(c(we),{href:s.route("survey_time_periods.show",{id:o.selectable.id})},{default:e(()=>[t(z,i(r,{size:"small",class:"tw-me-2"}),{default:e(()=>[m("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[at]),_:2},1024),t(A,{location:"top"},{activator:e(({props:r})=>[t(z,i(r,{size:"small",class:"tw-me-2",onClick:a=>Te(o.raw)}),{default:e(()=>[m("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[ot]),_:2},1024)])],8,tt)]),"no-data":e(()=>[st]),bottom:e(()=>[]),_:1},8,["items-per-page","items","search","loading"])),[[ve]])]),n("div",nt,[rt,t(V,null,{default:e(()=>[t(x,{cols:"12",md:"6"},{default:e(()=>[(F(!0),ee(fe,null,$e(le.settings,(o,r)=>{var a;return F(),ee("div",dt,[t(v,{modelValue:c(N).settings[r],"onUpdate:modelValue":p=>c(N).settings[r]=p,"error-messages":(a=f.value)!=null&&a.settings?f.value.settings[r]:!1,label:`${Se.value[r]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"])])}),256))]),_:1})]),_:1}),t(V,null,{default:e(()=>[t(x,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:e(()=>[t(w,null,{default:e(({isHovering:o,props:r})=>[t(S,i({onClick:Ne},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),n("div",ut,[n("div",it,[ct,n("div",mt,[t(w,null,{default:e(({isHovering:o,props:r})=>[t(P,i(r,{color:o?"accent":"primary",dark:""}),{default:e(()=>[m(" DATEI HINZUFÜGEN "),t(R,{modelValue:B.value,"onUpdate:modelValue":l[13]||(l[13]=a=>B.value=a),activator:"parent",width:"80vw"},{default:e(()=>[t(J,{height:"80vh"},{default:e(()=>[t(_,null,{default:e(()=>[_t]),_:1}),t($,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(V,null,{default:e(()=>[t(x,{cols:"12",sm:"6"},{default:e(()=>[t(v,{class:"required",type:"text",modelValue:c(g).name,"onUpdate:modelValue":l[11]||(l[11]=a=>c(g).name=a),"error-messages":f.value.name,label:"Name",required:"",disabled:c(g).processing},null,8,["modelValue","error-messages","disabled"])]),_:1}),t(x,{cols:"12",sm:"6"},{default:e(()=>[t(je,{modelValue:c(g).file,"onUpdate:modelValue":l[12]||(l[12]=a=>c(g).file=a),"error-messages":f.value.file,label:"File",accept:"*/*","prepend-icon":"mdi-upload",disabled:c(g).processing},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),t(H,null,{default:e(()=>[t(w,null,{default:e(({isHovering:a,props:p})=>[t(S,i({onClick:Y},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(q),t(w,null,{default:e(({isHovering:a,props:p})=>[t(P,i({onClick:b},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(w,null,{default:e(({isHovering:a,props:p})=>[t(S,i({onClick:Ae},p,{color:a?"accent":"primary"}),{default:e(()=>[m("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),t(R,{modelValue:M.value,"onUpdate:modelValue":l[14]||(l[14]=o=>M.value=o),width:"20vw"},{default:e(()=>[t(J,{height:"30vh"},{default:e(()=>[t($,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(V,null,{default:e(()=>[t(x,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+k(re.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(H,null,{default:e(()=>[t(q),t(w,null,{default:e(({isHovering:o,props:r})=>[t(P,i({onClick:b},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(w,null,{default:e(({isHovering:o,props:r})=>[t(S,i({onClick:Ie},r,{color:o?"accent":"primary"}),{default:e(()=>[m("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),ge((F(),te(_e,{"items-per-page":D.value,"onUpdate:itemsPerPage":l[15]||(l[15]=o=>D.value=o),headers:Ee,items:Fe.value,search:se.value,loading:O.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":ue},{item:e(({item:o})=>{var r;return[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,k(o.selectable.name),1),n("td",null,k(c(Ge)(o.selectable.created_at,"sv-SE")),1),n("td",pt,[(r=o.selectable)!=null&&r.path?(F(),te(A,{key:0,location:"top"},{activator:e(({props:a})=>[n("a",{href:o.selectable.path,download:""},[t(z,i(a,{size:"small",class:"tw-me-2"}),{default:e(()=>[m("mdi-download")]),_:2},1040)],8,ft)]),default:e(()=>[gt]),_:2},1024)):qe("",!0),t(A,{location:"top"},{activator:e(({props:a})=>[t(c(we),{href:s.route("downloadable_files.show",{id:o.selectable.id})},{default:e(()=>[t(z,i(a,{size:"small",class:"tw-me-2"}),{default:e(()=>[m("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[wt]),_:2},1024),t(A,{location:"top"},{activator:e(({props:a})=>[t(z,i(a,{size:"small",class:"tw-me-2",onClick:p=>ze(o.raw)}),{default:e(()=>[m("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[bt]),_:2},1024)])],8,vt)]}),"no-data":e(()=>[yt]),bottom:e(()=>[]),_:1},8,["items-per-page","items","search","loading"])),[[ve]])])]),_:1},8,["errors"])],64)}}};export{Dt as default};
