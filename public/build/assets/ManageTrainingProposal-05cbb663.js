import{d as Ml}from"./index-0d7197fb.js";import{j as d,k as oe,l as K,T as ne,K as Al,A as we,r as y,o as g,f as le,a as e,u as f,w as l,F as ae,Z as Nl,b as r,c as P,m as c,h as T,d as m,i as Ve,t as z,g as ol,O as Ol}from"./app-d4e270fa.js";import{_ as Bl}from"./AuthenticatedLayout-70341763.js";import{c as se}from"./common-ea192878.js";import"./VueTimepikcer.esm-ed4ec2a1.js";import"./ApplicationLogo-20741013.js";const Il=r("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Verwalte Terminvorschlag",-1),Zl={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},jl=r("h3",null,"Eigenschaften des Terminvorschlags",-1),Jl=r("span",null,"Akzeptieren für Multiplikator",-1),Rl=r("span",null,"Termin Bestätigung anfragen",-1),ql=r("span",null,"Reservierung aufheben",-1),Yl=r("span",null,"Mail an KiTa(s) schreiben",-1),Hl=r("h3",null,"Teilnehmende Einrichtungen",-1),Ll=r("span",null,"Einrichtung hinzufügen",-1),xl=r("span",null,"Einrichtungen können nur zu offenen oder reservierten Terminvorschlägen hinzugefügt werden.",-1),Wl=r("span",null,"Schreibe E-Mail an Auswahl",-1),Gl=["data-id","data-order"],Ql={class:"text-center"},Xl=r("span",null,"Gesendeten Terminvorschlag für diese Einrichtung bestätigen",-1),ea=["href"],la=r("span",null,"Schreibe E-Mail",-1),aa=r("span",null,"Einrichtung bearbeiten",-1),ta=r("span",null,"Einrichtung zeigen",-1),oa=r("span",null,"Einrichtung löschen",-1),na=r("div",{class:"tw-py-6"},[r("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),sa=r("span",{class:"tw-text-h5"},"Schulung gegenüber den KiTas bestätigen?",-1),ra={class:"tw-font-bold tw-font-italic"},ua=r("p",null,"Sind Sie sicher, dass Sie den Schulungstermin mit der/den Einrichtung(en) bestätigen wollen? Eine E-Mail wird an die verantwortliche(n) Person(en) der Einrichtung(en) versendet, um den Termin zu bestätigen.",-1),ia=r("p",null,"Möchten Sie die ausgewählten Terminvorschläge wirklich akzeptieren?",-1),da=r("p",null,"Sind Sie sicher, dass Sie die ausgewählten Terminvorschläge widerrufen möchten?",-1),ca=r("span",{class:"tw-text-h5"},"Multiplikator hinzufügen",-1),pa=r("p",null,"Wählen Sie den Multiplikator aus, den Sie diesem Trainingsvorschlag hinzufügen möchten",-1),ma=r("span",{class:"tw-text-h5"},"Einrichtungen hinzufügen",-1),_a=r("p",null,"Wählen Sie die Einrichtungen aus, die Sie zu dieser Schulung hinzufügen möchten",-1),va=r("span",{class:"tw-text-h5"},"Schreibe E-Mail an Auswahl",-1),fa=r("span",{class:"tw-text-h5"},"Termin für die Einrichtung bestätigen?",-1),ga=r("p",{class:"tw-mb-4"},"Bitte stimmen Sie die Bestätigung mit der Einrichtung ab!",-1),ha=r("p",{class:"tw-mb-4"}," Normalerweise bestätigt eine Einrichtung ihre Teilnahme an einem Schulungstermin über den Link in der an den Manager der Einrichtung versendeten E-Mail, nachdem der Termin durch den Multiplikator bestätigt wurde. ",-1),ba=r("p",{class:"tw-mb-4"}," Mit Bestigung des Terminvorschlags wird ein Schulungstermin erzeugt! ",-1),ya={class:"tw-mb-4"},Sa={__name:"ManageTrainingProposal",props:{trainingProposal:Object,notEditable:Boolean,allKitas:Array,trainingProposalKitas:Array,errors:Object,multipliers:Array,operators:Array,statuses:Array,types:Array,emailMessages:Object,from:String,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,zipCodes:Array,kitaTypes:Array,usersEmails:Array},setup(w){var Ce,Fe,Ue,De,Ke,Me,Ae,Ne,Oe,Be,Ie,Ze,je,Je,Re,qe,Ye,He,Le,xe,We,Ge,Qe;const s=w;Ml.Inertia.on("success",o=>{let t=o.detail.page.props;o.detail.page.component==="TrainingProposals/Partials/ManageTrainingProposal"&&t&&(p.value=t.trainingProposal)});const p=d(s.trainingProposal),k=d(s.errors||{}),h=d(!1),re=d(null),Pe=d(!1),ge=d(!1),pe=d(!1),ue=d(!1),me=d(!1),_e=d(!1),ve=d(!1),fe=d(!1),he=d(!1),be=d(!1),Te=d(se(s.trainingProposal.first_date)),Ee=d(se(s.trainingProposal.second_date)),G=d(new Date(s.trainingProposal.first_date).toString()),Q=d(new Date(s.trainingProposal.second_date).toString()),nl=d([{label:"Erster Schulungstag",value:`${se((Ce=p.value)==null?void 0:Ce.first_date)}`},{label:"Zweiter Schulungstag",value:`${se((Fe=p.value)==null?void 0:Fe.second_date)}`},{label:"Ort",value:(Ue=p.value)==null?void 0:Ue.formatted_location},{label:"Teilnehmerzahl",value:(De=p.value)==null?void 0:De.participant_count}]),sl=oe(()=>{if(s.from){const o=s.from.split(";");if(o.length===3){const t=o[0],n={};return n[o[1]]=o[2],route(t,n)}}return route("training_proposals.index")});K(Pe,o=>{o||C()}),K(G,o=>{Te.value=o?se(o):null}),K(Q,o=>{Ee.value=o?se(o):null});const v=ne({id:(Ke=p.value)==null?void 0:Ke.id,multi_id:(Me=p.value)==null?void 0:Me.multi_id,first_date:(Ae=p.value)==null?void 0:Ae.first_date,second_date:(Ne=p.value)==null?void 0:Ne.second_date,location:(Oe=p.value)==null?void 0:Oe.location,participant_count:(Be=p.value)==null?void 0:Be.participant_count,street:(Ie=p.value)==null?void 0:Ie.street,house_number:(Ze=p.value)==null?void 0:Ze.house_number,zip_code:(je=p.value)==null?void 0:je.zip_code,city:(Je=p.value)==null?void 0:Je.city,district:(Re=p.value)==null?void 0:Re.district,notes:(qe=p.value)==null?void 0:qe.notes}),rl=async()=>{v.processing=!0,v.first_date=G.value?new Date(new Date(G.value).setHours(12,0,0,0)).toISOString():null,v.second_date=Q.value?new Date(new Date(Q.value).setHours(12,0,0,0)).toISOString():null;let o={onSuccess:t=>{C()},onError:t=>{k.value=t},onFinish:()=>{v.processing=!1}};v.put(route("training_proposals.update",{trainingProposal:v.id}),o)},ul=()=>{_e.value=!0},ie=ne({multi_id:null}),il=async()=>{ie.processing=!0,ie.post(route("training_proposals.add_multiplier",{trainingProposal:s.trainingProposal.id}),{onSuccess:o=>{C()},onError:o=>{k.value=o},onFinish:()=>{ie.processing=!1}})},dl=()=>{me.value=!0},cl=()=>{pe.value=!0},U=ne({id:(Ye=p.value)==null?void 0:Ye.id,status:null,multi_id:null}),ye=async o=>{U.processing=!0,U.status=o,o!=="open"&&delete U.multi_id;let t={preserveState:!1,onSuccess:n=>{C()},onError:n=>{k.value=n},onFinish:()=>{U.processing=!1}};U.put(route("training_proposals.update",{trainingProposal:U.id}),t)},pl=()=>{ve.value=!0},M=ne({kitas:[]}),ml=oe(()=>{var t,n,_;Al().props.auth.user;let o=(t=s.trainingProposalKitas)==null?void 0:t.length;return((n=p.value)==null?void 0:n.status)==="reserved"&&o>0&&((_=p.value)==null?void 0:_.multi_id)}),_l=oe(()=>{let o=s.trainingProposalKitas.map(t=>t.id);return s.allKitas.filter(t=>!o.includes(t.id))}),vl=async()=>{M.processing=!0,M.post(route("training_proposals.add_kitas",{trainingProposal:s.trainingProposal.id}),{onSuccess:o=>{C()},onError:o=>{k.value=o},onFinish:()=>{M.processing=!1}})},fl=o=>{re.value=o.name,N.kita=o.id,fe.value=!0},N=ne({kita:null}),gl=async()=>{N.processing=!0;let o={onSuccess:t=>{C()},onError:t=>{k.value=t},onFinish:()=>{N.processing=!1}};N.post(route("training_proposals.remove_kita",{id:s.trainingProposal.id}),o)},C=()=>{Pe.value=!1,re.value=null,ge.value=!1,pe.value=!1,ue.value=!1,me.value=!1,_e.value=!1,ve.value=!1,fe.value=!1,U.reset(),U.clearErrors(),M.reset(),M.clearErrors(),N.reset(),N.clearErrors(),k.value={}},hl=()=>{v.reset(),v.clearErrors(),U.reset(),U.clearErrors(),M.reset(),M.clearErrors(),N.reset(),N.clearErrors(),G.value=null,Q.value=null},O=ne({kita_id:null}),bl=o=>{re.value=o.name,O.kita_id=o.id,ue.value=!0},yl=async()=>{console.log("Bestätigung gestartet für Kita:",O.kita_id),O.processing=!0;let o={onSuccess:()=>{Se()},onError:t=>{k.value=t},onFinish:()=>{O.processing=!1}};try{await O.post(route("training_proposals.confirm_by_admin",{id:s.trainingProposal.id}),{kita_id:O.kita_id,...o})}catch(t){console.error("Fehler bei der Anfrage:",t)}},Se=()=>{ue.value=!1,O.reset()},kl=o=>o&&o.length>0?o.map(t=>{const n={...t};for(const _ in n)(n[_]===null||n[_]===void 0)&&(n[_]="-");return n}):[],wl=[{title:"Name",key:"name",width:"10%",sortable:!0},{title:"Bestätigt",key:"training_proposal_confirmed",width:"10%",sortable:!1},{title:`Jährliche Rückmeldung ${new Date().getFullYear()} abgeschlossen`,key:"has_yearly_evaluations",width:"25%",sortable:!0},{title:"Zugelassen",key:"approved",width:"10%",sortable:!0},{title:"Träger",key:"operator_id",width:"10%",sortable:!0},{title:"Sonstiger Träger",key:"other_operator",width:"10%",sortable:!0},{title:"Typ",key:"type",width:"9%",sortable:!0},{title:"Postleitzahl",key:"zip_code",width:"8%",sortable:!0},{title:"Aktion",key:"actions",width:"8%",sortable:!1,align:"center"}],$e=d(s==null?void 0:s.currentPage),Vl=d(s==null?void 0:s.perPage);d(s==null?void 0:s.orderBy),d(s==null?void 0:s.sort),d(s==null?void 0:s.total),d(s==null?void 0:s.lastPage);const ze=d(""),B=d(((He=s==null?void 0:s.filters)==null?void 0:He.search)??null),I=d(((Le=s==null?void 0:s.filters)==null?void 0:Le.has_yearly_evaluations)??null),Z=d(((xe=s==null?void 0:s.filters)==null?void 0:xe.approved)??null),j=d(null),J=d(((We=s.filters)==null?void 0:We.other_operator)??null),R=d(((Ge=s==null?void 0:s.filters)==null?void 0:Ge.type)??null),q=d(((Qe=s==null?void 0:s.filters)==null?void 0:Qe.zip_code)??null),Pl=[{title:"Ja",value:"true"},{title:"Nein",value:"false"}],Tl=[{title:"Ja",value:"true"},{title:"Nein",value:"false"}],de=d([]),ke=d(!1),El=oe(()=>kl(s.trainingProposalKitas).map(t=>{var _;const n={...t};return n.training_proposal_confirmed=(_=t==null?void 0:t.training_proposal_confirmations)==null?void 0:_.some(i=>{var V;return i.confirmed===!0&&i.training_proposal_id===((V=p.value)==null?void 0:V.id)}),n})),Sl=oe(()=>B.value===null&&I.value===null&&Z.value===null&&j.value===null&&J.value===null&&R.value===null&&q.value===null),$l=oe(()=>B.value!==null||I.value!==null||Z.value!==null||j.value!==null||J.value!==null||R.value!==null||q.value!==null);K(B,we.debounce(o=>{X()},500)),K(I,o=>{X()}),K(Z,o=>{X()}),K(j,o=>{X()}),K(J,we.debounce(o=>{X()},500)),K(R,o=>{X()}),K(q,we.debounce(o=>{X()},500));const X=o=>{h.value=!0,ze.value=String(Date.now())},zl=()=>{ke.value=!0,de.value=s.usersEmails.map(o=>o.value)},Cl=async({page:o,itemsPerPage:t,sortBy:n,clearFilters:_})=>{if(_&&(B.value=null,I.value=null,Z.value=null,j.value=null,J.value=null,R.value=null,q.value=null),o===$e.value&&_||Sl||$l){h.value=!0;let i={page:o,per_page:t};n&&n.length>0?(i.order_by=n[0].key,i.sort=n[0].order):(i.order_by=null,i.sort=null),s.from&&(i.from=s.from),B.value&&(i.search=B.value),I.value&&(i.has_yearly_evaluations=I.value),Z.value&&(i.approved=Z.value),j.value&&(i.operator_id=j.value),J.value&&(i.other_operator=J.value),R.value&&(i.type=R.value),q.value&&(i.zip_code=q.value),await Ol.get(route(route().current(),{trainingProposal:v.id}),i,{preserveScroll:!0,preserveState:!0,onCancelToken:V=>{},onCancel:()=>{},onBefore:V=>{h.value=!0},onStart:V=>{},onProgress:V=>{},onSuccess:V=>{$e.value=i.page,Vl.value=i.per_page},onError:V=>{console.log(V)},onFinish:V=>{h.value=!1}})}};return(o,t)=>{const n=y("v-col"),_=y("v-btn"),i=y("v-hover"),V=y("v-icon"),b=y("v-row"),E=y("v-container"),D=y("v-text-field"),Xe=y("v-date-picker"),el=y("v-menu"),ll=y("v-locale-provider"),ee=y("v-select"),al=y("v-textarea"),A=y("v-btn-primary"),te=y("v-tooltip"),Fl=y("v-data-table-server"),ce=y("v-card-title"),Ul=y("v-list-item"),Dl=y("v-list"),Y=y("v-card-text"),H=y("v-spacer"),L=y("v-card-actions"),x=y("v-card"),W=y("v-dialog"),tl=y("v-autocomplete");return g(),le(ae,null,[e(f(Nl),{title:"Verwalte Terminvorschlag"}),e(Bl,{errors:k.value},{header:l(()=>[Il]),default:l(()=>[r("div",Zl,[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"3"},{default:l(()=>[jl]),_:1}),e(n,{cols:"12",sm:"9",class:"text-right"},{default:l(()=>{var a,u;return[p.value.status==="open"&&(o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin)?(g(),P(i,{key:0},{default:l(({isHovering:S,props:F})=>[e(_,c({class:"tw-ml-4 tw-mb-4"},F,{color:S?"accent":"primary",dark:"",onClick:ul}),{default:l(()=>[Jl]),_:2},1040,["color"])]),_:1})):T("",!0),ml.value?(g(),P(i,{key:1},{default:l(({isHovering:S,props:F})=>[e(_,c({class:"tw-ml-4 tw-mb-4"},F,{color:S?"accent":"success",dark:"",onClick:dl}),{default:l(()=>[Rl]),_:2},1040,["color"])]),_:1})):T("",!0),p.value.status==="reserved"?(g(),P(i,{key:2},{default:l(({isHovering:S,props:F})=>[e(_,c({class:"tw-ml-4 tw-mb-4"},F,{color:S?"background":"error",dark:"",onClick:cl}),{default:l(()=>[ql]),_:2},1040,["color"])]),_:1})):T("",!0),o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin||o.$page.props.auth.user.is_user_multiplier?(g(),le(ae,{key:3},[(a=p.value)!=null&&a.kitas_users_emails&&((u=p.value)==null?void 0:u.kitas_users_emails.length)>0?(g(),P(i,{key:0},{default:l(({isHovering:S,props:F})=>{var $;return[e(_,c({class:"tw-ml-4 tw-mb-4",href:`mailto:?bcc=${($=p.value)==null?void 0:$.kitas_users_emails.join(",")}`},F,{color:S?"accent":"primary",dark:""}),{default:l(()=>[e(V,c(F,{size:"small",class:"tw-me-2"}),{default:l(()=>[m("mdi-email")]),_:2},1040),Yl]),_:2},1040,["href","color"])]}),_:1})):T("",!0)],64)):T("",!0)]}),_:1})]),_:1})]),_:1}),e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"4"},{default:l(()=>[e(ll,{locale:"de"},{default:l(()=>[e(el,{modelValue:he.value,"onUpdate:modelValue":t[2]||(t[2]=a=>he.value=a),"return-value":G.value,"close-on-content-click":!1,disabled:w.notEditable},{activator:l(({props:a})=>[e(D,c({label:"Erster Schulungstag*",class:"tw-cursor-pointer","model-value":Te.value,"error-messages":k.value.first_date,"prepend-icon":"mdi-calendar"},a,{readonly:"",disabled:h.value}),null,16,["model-value","error-messages","disabled"])]),default:l(()=>[e(Xe,{"onUpdate:modelValue":[t[0]||(t[0]=a=>he.value=!1),t[1]||(t[1]=a=>G.value=a)],modelValue:G.value},null,8,["modelValue"])]),_:1},8,["modelValue","return-value","disabled"])]),_:1})]),_:1}),e(n,{cols:"12",sm:"4"},{default:l(()=>[e(ll,{locale:"de"},{default:l(()=>[e(el,{modelValue:be.value,"onUpdate:modelValue":t[5]||(t[5]=a=>be.value=a),"return-value":Q.value,"close-on-content-click":!1,disabled:w.notEditable},{activator:l(({props:a})=>[e(D,c({label:"Zweiter Schulungstag*",class:"tw-cursor-pointer","model-value":Ee.value,"error-messages":k.value.second_date,"prepend-icon":"mdi-calendar"},a,{readonly:"",disabled:h.value}),null,16,["model-value","error-messages","disabled"])]),default:l(()=>[e(Xe,{"onUpdate:modelValue":[t[3]||(t[3]=a=>be.value=!1),t[4]||(t[4]=a=>Q.value=a)],modelValue:Q.value},null,8,["modelValue"])]),_:1},8,["modelValue","return-value","disabled"])]),_:1})]),_:1}),e(n,{cols:"12",sm:"4"},{default:l(()=>[e(D,{type:"number",modelValue:f(v).participant_count,"onUpdate:modelValue":t[6]||(t[6]=a=>f(v).participant_count=a),"error-messages":k.value.participant_count,label:"Teilnehmerzahl*",clearable:"",readonly:w.notEditable,disabled:h.value},null,8,["modelValue","error-messages","readonly","disabled"])]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"4"},{default:l(()=>[e(D,{modelValue:f(v).street,"onUpdate:modelValue":t[7]||(t[7]=a=>f(v).street=a),"error-messages":k.value.street,label:"Straße*",disabled:h.value,clearable:""},null,8,["modelValue","error-messages","disabled"])]),_:1}),e(n,{cols:"12",sm:"4"},{default:l(()=>[e(D,{modelValue:f(v).house_number,"onUpdate:modelValue":t[8]||(t[8]=a=>f(v).house_number=a),"error-messages":k.value.house_number,label:"Hausnummer*",disabled:h.value,clearable:""},null,8,["modelValue","error-messages","disabled"])]),_:1}),e(n,{cols:"12",sm:"4"},{default:l(()=>[e(D,{modelValue:f(v).zip_code,"onUpdate:modelValue":t[9]||(t[9]=a=>f(v).zip_code=a),"error-messages":k.value.zip_code,label:"Postleitzahl*",disabled:h.value,clearable:""},null,8,["modelValue","error-messages","disabled"])]),_:1}),o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin?(g(),P(n,{key:0,cols:"12",sm:"4"},{default:l(()=>[e(ee,{modelValue:f(v).multi_id,"onUpdate:modelValue":t[10]||(t[10]=a=>f(v).multi_id=a),"error-messages":k.value.multi_id,items:w.multipliers,"item-title":"full_name","item-value":"id",label:"Multiplikator*",disabled:h.value||o.$page.props.auth.user.is_user_multiplier,clearable:""},null,8,["modelValue","error-messages","items","disabled"])]),_:1})):T("",!0)]),_:1}),e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"6"},{default:l(()=>[e(D,{modelValue:f(v).district,"onUpdate:modelValue":t[11]||(t[11]=a=>f(v).district=a),"error-messages":k.value.district,label:"Bezirk",disabled:h.value,clearable:""},null,8,["modelValue","error-messages","disabled"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:l(()=>[e(D,{modelValue:f(v).city,"onUpdate:modelValue":t[12]||(t[12]=a=>f(v).city=a),"error-messages":k.value.city,label:"Stadt*",disabled:h.value,clearable:""},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"6"},{default:l(()=>[e(al,{modelValue:f(v).location,"onUpdate:modelValue":t[13]||(t[13]=a=>f(v).location=a),"error-messages":k.value.location,label:"Ort*",required:"",readonly:w.notEditable,disabled:h.value},null,8,["modelValue","error-messages","readonly","disabled"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:l(()=>[e(al,{modelValue:f(v).notes,"onUpdate:modelValue":t[14]||(t[14]=a=>f(v).notes=a),"error-messages":k.value.notes,label:"Notizen",required:"",readonly:w.notEditable,disabled:h.value},null,8,["modelValue","error-messages","readonly","disabled"])]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"6"},{default:l(()=>[!w.notEditable||o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin?(g(),P(i,{key:0},{default:l(({isHovering:a,props:u})=>[e(_,c({onClick:hl},u,{color:a?"primary":"accent"}),{default:l(()=>[m("Zurücksetzen")]),_:2},1040,["color"])]),_:1})):T("",!0)]),_:1}),e(n,{cols:"12",sm:"6",align:"right"},{default:l(()=>[e(i,null,{default:l(({isHovering:a,props:u})=>[e(f(Ve),{href:sl.value},{default:l(()=>[e(_,c({class:"mr-2",variant:"text"},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),!w.notEditable||o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin?(g(),P(i,{key:0},{default:l(({isHovering:a,props:u})=>[e(A,c({onClick:rl},u,{color:a?"accent":"primary"}),{default:l(()=>[m(" Speichern ")]),_:2},1040,["color"])]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1}),o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin||o.$page.props.auth.user.is_user_multiplier?(g(),le(ae,{key:0},[e(E,null,{default:l(()=>[e(b,{class:"tw-border-t-8 tw-mt-8 tw-pt-8"},{default:l(()=>[e(n,{cols:"12",sm:"6"},{default:l(()=>[Hl]),_:1}),e(n,{cols:"12",sm:"6",class:"text-right"},{default:l(()=>[o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin?(g(),le(ae,{key:0},[e(i,null,{default:l(({isHovering:a,props:u})=>[e(_,c(u,{color:a?"accent":"primary",dark:"",disabled:!(p.value.status==="open"||p.value.status==="reserved"),onClick:pl}),{default:l(()=>[Ll]),_:2},1040,["color","disabled"])]),_:1}),p.value.status==="open"||p.value.status==="reserved"?T("",!0):(g(),P(te,{key:0,location:"top"},{activator:l(({props:a})=>[e(V,c(a,{class:"tw-me-2"}),{default:l(()=>[m("mdi-alert-circle-outline")]),_:2},1040)]),default:l(()=>[xl]),_:1}))],64)):T("",!0)]),_:1})]),_:1})]),_:1}),e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"4"},{default:l(()=>[e(D,{modelValue:B.value,"onUpdate:modelValue":t[15]||(t[15]=a=>B.value=a),label:"Name",disabled:h.value,clearable:""},null,8,["modelValue","disabled"])]),_:1}),e(n,{cols:"12",sm:"4"},{default:l(()=>[e(ee,{modelValue:I.value,"onUpdate:modelValue":t[16]||(t[16]=a=>I.value=a),items:Pl,label:`Jährliche Rückmeldung ${new Date().getFullYear()} abgeschlossen`,multiple:"",disabled:h.value,clearable:""},null,8,["modelValue","label","disabled"])]),_:1}),e(n,{cols:"12",sm:"4"},{default:l(()=>[e(ee,{modelValue:Z.value,"onUpdate:modelValue":t[17]||(t[17]=a=>Z.value=a),items:Tl,label:"Zugelassen",multiple:"",disabled:h.value,clearable:""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"6"},{default:l(()=>[e(ee,{modelValue:j.value,"onUpdate:modelValue":t[18]||(t[18]=a=>j.value=a),items:w.operators,"item-title":"name","item-value":"id",label:"Träger",multiple:"",disabled:h.value,clearable:""},null,8,["modelValue","items","disabled"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:l(()=>[e(D,{modelValue:J.value,"onUpdate:modelValue":t[19]||(t[19]=a=>J.value=a),label:"Sonstiger Träger",disabled:h.value,clearable:""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(n,{cols:"12",sm:"6"},{default:l(()=>[e(ee,{modelValue:R.value,"onUpdate:modelValue":t[20]||(t[20]=a=>R.value=a),items:w.kitaTypes,label:"Typ",multiple:"",disabled:h.value,clearable:""},null,8,["modelValue","items","disabled"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:l(()=>[e(ee,{modelValue:q.value,"onUpdate:modelValue":t[21]||(t[21]=a=>q.value=a),items:w.zipCodes,label:"Postleitzahl",multiple:"",disabled:h.value,clearable:""},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),e(b,null,{default:l(()=>[o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin?(g(),P(n,{key:0,cols:"12",class:"text-right"},{default:l(()=>[w.usersEmails&&w.usersEmails.length>0?(g(),P(i,{key:0},{default:l(({isHovering:a,props:u})=>[e(_,c(u,{color:a?"accent":"primary",dark:"",onClick:zl}),{default:l(()=>[e(V,c(u,{size:"small",class:"tw-me-2"}),{default:l(()=>[m("mdi-email")]),_:2},1040),Wl]),_:2},1040,["color"])]),_:1})):T("",!0)]),_:1})):T("",!0),e(n,{cols:"12"},{default:l(()=>[e(Fl,{"items-per-page":-1,headers:wl,items:El.value,search:ze.value,loading:h.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name","onUpdate:options":Cl},{item:l(({item:a})=>{var u,S,F;return[r("tr",{"data-id":a.id,"data-order":a.order},[r("td",null,z(a==null?void 0:a.name),1),r("td",null,z(a!=null&&a.training_proposal_confirmed?"Ja":"Nein"),1),r("td",null,z(a!=null&&a.has_yearly_evaluations?"Ja":"Nein"),1),r("td",null,z(a!=null&&a.approved?"Ja":"Nein"),1),r("td",null,z(((u=a==null?void 0:a.operator)==null?void 0:u.name)??"-"),1),r("td",null,z(!((S=a==null?void 0:a.operator)!=null&&S.name)&&(a!=null&&a.other_operator)?a==null?void 0:a.other_operator:"-"),1),r("td",null,z((a==null?void 0:a.formatted_type)??(a==null?void 0:a.type)),1),r("td",null,z(a==null?void 0:a.zip_code),1),r("td",Ql,[(o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin)&&p.value.status==="confirmation_pending"&&((F=a==null?void 0:a.training_proposal_confirmations)==null?void 0:F.length)>0&&!(a!=null&&a.training_proposal_confirmed)?(g(),P(te,{key:0,location:"top"},{activator:l(({props:$})=>[e(V,c($,{size:"small",class:"tw-me-2",onClick:Kl=>bl(a)}),{default:l(()=>[m(" mdi-email-check-outline ")]),_:2},1040,["onClick"])]),default:l(()=>[Xl]),_:2},1024)):T("",!0),o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin||o.$page.props.auth.user.is_user_multiplier?(g(),le(ae,{key:1},[(a==null?void 0:a.users_emails.length)>0?(g(),P(te,{key:0,location:"top"},{activator:l(({props:$})=>[r("a",c({href:`mailto:?bcc=${a==null?void 0:a.users_emails.join(",")}`},$),[e(V,c($,{size:"small",class:"tw-me-2"}),{default:l(()=>[m("mdi-email")]),_:2},1040)],16,ea)]),default:l(()=>[la]),_:2},1024)):T("",!0)],64)):T("",!0),o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin?(g(),P(te,{key:2,location:"top"},{activator:l(({props:$})=>[e(f(Ve),{href:`${o.route("kitas.show",{id:a.id})}?from=training_proposals.show;trainingProposal;${p.value.id}`},{default:l(()=>[e(V,c($,{size:"small",class:"tw-me-2"}),{default:l(()=>[m("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[aa]),_:2},1024)):(g(),P(te,{key:3,location:"top"},{activator:l(({props:$})=>[e(f(Ve),{href:`${o.route("kitas.show",{id:a.id})}?from=training_proposals.show;trainingProposal;${p.value.id}`},{default:l(()=>[e(V,c($,{size:"small",class:"tw-me-2"}),{default:l(()=>[m("mdi-eye")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[ta]),_:2},1024)),o.$page.props.auth.user.is_super_admin||o.$page.props.auth.user.is_admin?(g(),P(te,{key:4,location:"top"},{activator:l(({props:$})=>[e(V,c($,{size:"small",class:"tw-me-2",onClick:Kl=>fl(a)}),{default:l(()=>[m("mdi-delete ")]),_:2},1040,["onClick"])]),default:l(()=>[oa]),_:2},1024)):T("",!0)])],8,Gl)]}),"no-data":l(()=>[na]),_:1},8,["items","search","loading"])]),_:1})]),_:1})]),_:1})],64)):T("",!0),e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(W,{modelValue:me.value,"onUpdate:modelValue":t[23]||(t[23]=a=>me.value=a),width:"80vw"},{default:l(()=>[e(x,{height:"80vw"},{default:l(()=>[e(ce,null,{default:l(()=>[sa]),_:1}),e(Y,null,{default:l(()=>[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[(g(!0),le(ae,null,ol(nl.value,a=>(g(),P(b,null,{default:l(()=>[e(n,{cols:"12",sm:"2"},{default:l(()=>[r("span",ra,z(a==null?void 0:a.label)+":",1)]),_:2},1024),e(n,{cols:"12",sm:"10"},{default:l(()=>[r("span",null,z(a==null?void 0:a.value),1)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),w.trainingProposalKitas&&w.trainingProposalKitas.length?(g(),P(b,{key:0},{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[ua]),_:1}),e(n,{cols:"12",class:"tw--mt-6"},{default:l(()=>[e(Dl,null,{default:l(()=>[(g(!0),le(ae,null,ol(w.trainingProposalKitas,a=>(g(),P(Ul,{class:"hide-details",key:a.id},{default:l(()=>[m(z(a.name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(H),e(i,null,{default:l(({isHovering:a,props:u})=>[e(_,c({onClick:C},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(i,null,{default:l(({isHovering:a,props:u})=>[e(A,c({onClick:t[22]||(t[22]=S=>ye("confirmation_pending"))},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Einreichen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:ge.value,"onUpdate:modelValue":t[25]||(t[25]=a=>ge.value=a),width:"20vw"},{default:l(()=>[e(x,{height:"30vh"},{default:l(()=>[e(Y,null,{default:l(()=>[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[ia]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(H),e(i,null,{default:l(({isHovering:a,props:u})=>[e(_,c({onClick:C},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(i,null,{default:l(({isHovering:a,props:u})=>[e(A,c({onClick:t[24]||(t[24]=S=>ye("reserved"))},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Einreichen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:pe.value,"onUpdate:modelValue":t[27]||(t[27]=a=>pe.value=a),width:"20vw"},{default:l(()=>[e(x,{height:"30vh"},{default:l(()=>[e(Y,null,{default:l(()=>[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[da]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(H),e(i,null,{default:l(({isHovering:a,props:u})=>[e(_,c({onClick:C},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(i,null,{default:l(({isHovering:a,props:u})=>[e(A,c({onClick:t[26]||(t[26]=S=>ye("open",null))},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Einreichen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:_e.value,"onUpdate:modelValue":t[29]||(t[29]=a=>_e.value=a),width:"80vw"},{default:l(()=>[e(x,{height:"80vh"},{default:l(()=>[e(ce,null,{default:l(()=>[ca]),_:1}),e(Y,null,{default:l(()=>[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[pa]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(tl,{modelValue:f(ie).multi_id,"onUpdate:modelValue":t[28]||(t[28]=a=>f(ie).multi_id=a),items:w.multipliers,"error-messages":k.value.multi_id,"item-title":"full_name","item-value":"id",label:"Multiplikator",required:""},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(H),e(i,null,{default:l(({isHovering:a,props:u})=>[e(_,c({onClick:C},u,{color:a?"accent":"primary"}),{default:l(()=>[m(" Zurück ")]),_:2},1040,["color"])]),_:1}),e(i,null,{default:l(({isHovering:a,props:u})=>[e(A,c({onClick:il},u,{color:a?"accent":"primary"}),{default:l(()=>[m(" Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:ve.value,"onUpdate:modelValue":t[31]||(t[31]=a=>ve.value=a),width:"80vw"},{default:l(()=>[e(x,{height:"80vh"},{default:l(()=>[e(ce,null,{default:l(()=>[ma]),_:1}),e(Y,null,{default:l(()=>[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[_a]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(tl,{modelValue:f(M).kitas,"onUpdate:modelValue":t[30]||(t[30]=a=>f(M).kitas=a),items:_l.value,"error-messages":k.value.kitas,"item-title":"name","item-value":"id",label:"KiTa",multiple:"",required:""},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(H),e(i,null,{default:l(({isHovering:a,props:u})=>[e(_,c({onClick:C},u,{color:a?"accent":"primary"}),{default:l(()=>[m(" Zurück ")]),_:2},1040,["color"])]),_:1}),e(i,null,{default:l(({isHovering:a,props:u})=>[e(A,c({onClick:vl},u,{color:a?"accent":"primary",disabled:o.maxParticipantCountExceeded}),{default:l(()=>[m(" Speichern ")]),_:2},1040,["color","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:fe.value,"onUpdate:modelValue":t[32]||(t[32]=a=>fe.value=a),width:"20vw"},{default:l(()=>[e(x,{height:"30vh"},{default:l(()=>[e(Y,null,{default:l(()=>[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[r("p",null,"Möchten Sie die Einrichtung "+z(re.value)+" wirklich aus der Ausbildung entfernen?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(H),e(i,null,{default:l(({isHovering:a,props:u})=>[e(_,c({onClick:C},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(i,null,{default:l(({isHovering:a,props:u})=>[e(A,c({onClick:gl},u,{color:a?"accent":"primary"}),{default:l(()=>[m("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(n,{cols:"12"},{default:l(()=>[e(W,{modelValue:ke.value,"onUpdate:modelValue":t[34]||(t[34]=a=>ke.value=a),width:"40vw"},{default:l(()=>[e(x,{height:"80vh"},{default:l(()=>[e(ce,null,{default:l(()=>[va]),_:1}),e(Y,null,{default:l(()=>[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(ee,{modelValue:de.value,"onUpdate:modelValue":t[33]||(t[33]=a=>de.value=a),items:w.usersEmails,label:"Benutzer",multiple:"",disabled:h.value,clearable:""},null,8,["modelValue","items","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(H),e(i,null,{default:l(({isHovering:a,props:u})=>[e(A,c({href:`mailto:?bcc=${de.value.join(",")}`},u,{color:a?"accent":"primary",disabled:!de.value.length}),{default:l(()=>[m(" Öffnen Sie den Mail-Client ")]),_:2},1040,["href","color","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(W,{modelValue:ue.value,"onUpdate:modelValue":t[35]||(t[35]=a=>ue.value=a),width:"40vw"},{default:l(()=>[e(x,{height:"40vh"},{default:l(()=>[e(ce,null,{default:l(()=>[fa]),_:1}),e(Y,null,{default:l(()=>[e(E,null,{default:l(()=>[e(b,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[ga,ha,ba,r("p",ya,[m(" Möchten Sie die Teilnahme der Einrichtung "),r("strong",null,z(re.value),1),m(" an diesem Schulungstermin bestätigen? ")])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(H),e(i,null,{default:l(({isHovering:a,props:u})=>[e(_,c({onClick:Se},u,{color:a?"accent":"primary"}),{default:l(()=>[m(" Abbrechen ")]),_:2},1040,["color"])]),_:1}),e(i,null,{default:l(({isHovering:a,props:u})=>[e(A,c({onClick:yl},u,{color:a?"accent":"primary",loading:f(O).processing}),{default:l(()=>[m(" Bestätigen ")]),_:2},1040,["color","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Sa as default};
