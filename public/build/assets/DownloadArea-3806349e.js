import{d as H}from"./index-f9bb861c.js";import{K as R,h as s,j as w,r as u,o as _,f as h,a as r,u as D,w as o,F as S,Z,b as a,m as B,d as b,t as T,c as q,g as G,O as J}from"./app-cfe9584f.js";import{b as L}from"./common-b6d82cb9.js";import{_ as M}from"./AuthenticatedLayout-b6623fb1.js";import"./ApplicationLogo-d0a9d33e.js";const Q=a("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Downloadbereich",-1),W={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},X={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},Y={class:"tw-w-full"},ee={class:"tw-ml-6"},te=["data-id","data-order"],ae=["href"],oe=a("span",null,"Datei herunterladen",-1),le={class:"tw-py-6"},se={key:0,class:"tw-mb-4"},re=a("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),me={__name:"DownloadArea",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(V){const n=V;H.Inertia.on("success",i=>{let e=i.detail.page.props;i.detail.page.component==="Kitas/Kitas"&&e&&(m.value=e.currentPage,p.value=e.perPage,F.value=e.orderBy,j.value=e.sort,y.value=e.total,C.value=e.lastPage,c.value=e.filters.search??null)}),R().props.auth.user;const m=s(n.currentPage),p=s(n.perPage),F=s(n.orderBy),j=s(n.sort),y=s(n.total),C=s(n.lastPage),c=s(n.filters.search??null),P=s(""),O=s(n.errors||{}),g=s(!1),z=[{title:"Name",key:"name",width:"47.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"47.5%",sortable:!0},{title:"Aktion",key:"actions",width:"5%",sortable:!1,align:"center"}],A=w(()=>n.items.map(i=>{const e={...i};for(const l in e)(e[l]===null||e[l]===void 0)&&(e[l]="-");return e})),k=w(()=>c.value===null),E=w(()=>c.value!==null),x=async({page:i,itemsPerPage:e,sortBy:l,clearFilters:v})=>{if(v&&(c.value=null),i===m.value&&v||k||E){g.value=!0;let d={data:{page:i,per_page:e}};l&&l.length>0?(d.data.order_by=l[0].key,d.data.sort=l[0].order):(d.data.order_by=null,d.data.sort=null),d.data.search=c.value,await J.reload(d),m.value=i,p.value=e,g.value=!1}};return(i,e)=>{const l=u("v-text-field"),v=u("v-col"),d=u("v-row"),N=u("v-btn"),I=u("v-hover"),$=u("v-icon"),K=u("v-tooltip"),U=u("v-data-table-server");return _(),h(S,null,[r(D(Z),{title:"Downloadbereich"}),r(M,{errors:O.value},{header:o(()=>[Q]),default:o(()=>[a("div",W,[a("div",X,[a("div",Y,[r(d,null,{default:o(()=>[r(v,{cols:"12",sm:"5"},{default:o(()=>[r(l,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),label:"Name"},null,8,["modelValue"])]),_:1})]),_:1})]),a("div",ee,[r(I,null,{default:o(({isHovering:t,props:f})=>[r(N,B({class:"tw-mt-2"},f,{color:t?"accent":"primary",onClick:e[1]||(e[1]=ne=>P.value=String(Date.now())),dark:""}),{default:o(()=>[b("Suche")]),_:2},1040,["color"])]),_:1})])]),r(U,{"items-per-page":p.value,"onUpdate:itemsPerPage":e[3]||(e[3]=t=>p.value=t),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:z,page:m.value,"items-length":y.value,items:A.value,search:P.value,loading:g.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":x},{item:o(({item:t})=>[a("tr",{"data-id":t.id,"data-order":t.order},[a("td",null,T(t.name),1),a("td",null,T(D(L)(t.created_at,"de-DE")),1),a("td",null,[t!=null&&t.path?(_(),q(K,{key:0,location:"top"},{activator:o(({props:f})=>[a("a",{href:t.path,download:""},[r($,B(f,{size:"small",class:"tw-me-2"}),{default:o(()=>[b("mdi-download")]),_:2},1040)],8,ae)]),default:o(()=>[oe]),_:2},1024)):G("",!0)])],8,te)]),"no-data":o(()=>[a("div",le,[k.value?(_(),h("h3",se,"Die Tabelle ist leer.")):(_(),h(S,{key:1},[re,r(N,{color:"primary",onClick:e[2]||(e[2]=t=>x({page:1,itemsPerPage:p.value,clearFilters:!0}))},{default:o(()=>[b("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])])]),_:1},8,["errors"])],64)}}};export{me as default};
