import{d as Z}from"./index-33f8a7ef.js";import{K as G,k as s,h as w,r as c,n as J,f as h,a as i,u as S,w as l,F as B,o as m,Z as L,b as a,p as T,d as b,q as M,c as V,t as F,g as Q,O as W}from"./app-d06def85.js";import{f as X}from"./common-1f9d3448.js";import{_ as Y}from"./AuthenticatedLayout-619658ea.js";import"./ApplicationLogo-c96d935c.js";const ee=a("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Downloadbereich",-1),te={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ae={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},le={class:"tw-w-full"},oe={class:"tw-ml-6"},se=["data-id","data-order"],re=["href"],ne=a("span",null,"Datei herunterladen",-1),ie={class:"tw-py-6"},ce={key:0,class:"tw-mb-4"},de=a("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),ge={__name:"DownloadArea",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(C){const r=C;Z.Inertia.on("success",n=>{let e=n.detail.page.props;n.detail.page.component==="Kitas/Kitas"&&e&&(v.value=e.currentPage,p.value=e.perPage,O.value=e.orderBy,j.value=e.sort,y.value=e.total,z.value=e.lastPage,d.value=e.filters.search??null)}),G().props.auth.user;const v=s(r.currentPage),p=s(r.perPage),O=s(r.orderBy),j=s(r.sort),y=s(r.total),z=s(r.lastPage),d=s(r.filters.search??null),k=s(""),A=s(r.errors||{}),f=s(!1),E=[{title:"Name",key:"name",width:"47.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"47.5%",sortable:!0},{title:"Aktion",key:"actions",width:"5%",sortable:!1,align:"center"}],I=w(()=>r.items.map(n=>{const e={...n};for(const o in e)(e[o]===null||e[o]===void 0)&&(e[o]="-");return e})),P=w(()=>d.value===null),$=w(()=>d.value!==null),x=async({page:n,itemsPerPage:e,sortBy:o,clearFilters:_})=>{if(_&&(d.value=null),n===v.value&&_||P||$){f.value=!0;let u={data:{page:n,per_page:e}};o&&o.length>0&&(u.data.order_by=o[0].key,u.data.sort=o[0].order),u.data.search=d.value,await W.reload(u),v.value=n,p.value=e,f.value=!1}};return(n,e)=>{const o=c("v-text-field"),_=c("v-col"),u=c("v-row"),D=c("v-btn"),K=c("v-hover"),U=c("v-icon"),q=c("v-tooltip"),H=c("v-data-table-server"),R=J("sortable-data-table");return m(),h(B,null,[i(S(L),{title:"Downloadbereich"}),i(Y,{errors:A.value},{header:l(()=>[ee]),default:l(()=>[a("div",te,[a("div",ae,[a("div",le,[i(u,null,{default:l(()=>[i(_,{cols:"12",sm:"5"},{default:l(()=>[i(o,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),label:"Name"},null,8,["modelValue"])]),_:1})]),_:1})]),a("div",oe,[i(K,null,{default:l(({isHovering:t,props:g})=>[i(D,T({class:"tw-mt-2"},g,{color:t?"accent":"primary",onClick:e[1]||(e[1]=N=>k.value=String(Date.now())),dark:""}),{default:l(()=>[b("Suche")]),_:2},1040,["color"])]),_:1})])]),M((m(),V(H,{"items-per-page":p.value,"onUpdate:itemsPerPage":e[3]||(e[3]=t=>p.value=t),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:E,page:v.value,"items-length":y.value,items:I.value,search:k.value,loading:f.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":x},{item:l(({item:t})=>{var g;return[a("tr",{"data-id":t.selectable.id,"data-order":t.selectable.order},[a("td",null,F(t.selectable.name),1),a("td",null,F(S(X)(t.selectable.created_at,"sv-SE")),1),a("td",null,[(g=t.selectable)!=null&&g.path?(m(),V(q,{key:0,location:"top"},{activator:l(({props:N})=>[a("a",{href:t.selectable.path,download:""},[i(U,T(N,{size:"small",class:"tw-me-2"}),{default:l(()=>[b("mdi-download")]),_:2},1040)],8,re)]),default:l(()=>[ne]),_:2},1024)):Q("",!0)])],8,se)]}),"no-data":l(()=>[a("div",ie,[P.value?(m(),h("h3",ce,"Die Tabelle ist leer.")):(m(),h(B,{key:1},[de,i(D,{color:"primary",onClick:e[2]||(e[2]=t=>x({page:1,itemsPerPage:p.value,clearFilters:!0}))},{default:l(()=>[b("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[R]])])]),_:1},8,["errors"])],64)}}};export{ge as default};
