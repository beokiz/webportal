import{d as Ie}from"./index-f6506ee9.js";import{h as d,k as I,r as u,o as k,f as z,a as e,K as Ae,q as Le,j as Se,T as C,u as m,w as t,F as ie,Z as Be,b as s,m as i,d as _,t as E,i as ke,l as De,c as ue,g as Me,O as qe}from"./app-163de78d.js";import{_ as Ze}from"./AuthenticatedLayout-2b42a672.js";import{c as X,f as Fe,b as Ye}from"./common-b6d82cb9.js";import"./sortable.esm-0d19b1d3.js";import"./ApplicationLogo-5695676e.js";const Re={class:"vuetify-pro-tiptap-wrap"},Ge={__name:"TiptapEditor",props:{modelValue:{type:String},label:{type:String,default:null},minHeight:{type:Number,default:200},maxHeight:{type:Number,default:465},maxWidth:{type:Number,default:900}},emits:["update:modelValue"],setup(V,{emit:g}){const x=d(V.modelValue);return I(x,A=>{g("update:modelValue",A)}),(A,L)=>{const te=u("VuetifyTiptap");return k(),z("div",Re,[e(te,{modelValue:x.value,"onUpdate:modelValue":L[0]||(L[0]=le=>x.value=le),label:V.label,"min-height":V.minHeight,"max-height":V.maxHeight,"max-width":V.maxWidth},null,8,["modelValue","label","min-height","max-height","max-width"])])}}},Je=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einstellungen",-1),We={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},Ke={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},Qe=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Rückmeldungszeiträume",-1),Xe={class:"tw-flex tw-items-center tw-justify-end"},et=s("span",{class:"tw-text-h5"},"Neuer Rückmeldezeitraum",-1),tt=["data-id","data-order"],lt={align:"center"},at=s("span",null,"Einstellungen bearbeiten",-1),ot=s("span",null,"Einstellungen löschen",-1),nt=s("div",{class:"tw-py-6"},[s("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),st={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},rt=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"E-Mail Einstellungen",-1),dt={class:"tw-flex tw-items-center tw-justify-start"},it={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},ut={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},ct=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Dateien für den Downloadbereich",-1),mt={class:"tw-flex tw-items-center tw-justify-end"},_t=s("span",{class:"tw-text-h5"},"Neue Datei zum Downloadbereich hinzufügen",-1),pt=["data-id","data-order"],vt={align:"center"},ft=["href"],gt=s("span",null,"Datei herunterladen",-1),wt=s("span",null,"Datei bearbeiten",-1),bt=s("span",null,"Datei löschen",-1),yt=s("div",{class:"tw-py-6"},[s("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),ht={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},xt=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"Text auf Login Seite",-1),Vt={class:"tw-flex tw-items-center tw-justify-start"},Tt={__name:"Settings",props:{surveyTimePeriods:Array,downloadableFiles:Array,emailSettings:Object,loginSettings:Object,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(V){const g=V;Ie.Inertia.on("success",n=>{let l=n.detail.page.props;n.detail.page.component==="SurveyTimePeriods/SurveyTimePeriods"&&l&&(ee.value=l.currentPage,x.value=l.perPage,A.value=l.orderBy,L.value=l.sort,te.value=l.total,le.value=l.lastPage,ce.value=l.filters.search??null)}),Ae().props.auth.user;const ee=d(g.currentPage),x=d(g.perPage),A=d(g.orderBy),L=d(g.sort),te=d(g.total),le=d(g.lastPage),ce=d(g.filters.search??null),me=d(""),v=d(g.errors||{}),B=d(!1),ae=d(!1),oe=d(!1),M=d(!1),q=d(!1),Z=d(!1),Y=d(!1),_e=d(null),pe=d(null),ne=d(null),se=d(null),P=d(),T=d(),ve=d({send_yearly_evaluation_reminder_ntf_before_days:"Anzahl der Tage vor Ende des Bewertungszeitraums für den Versand der Erinnerungsmails"}),Ee=[{title:"Jahr",key:"year",width:"10%",sortable:!0},{title:"Erhebungsbeginn",key:"survey_start_date",width:"37.5%",sortable:!0},{title:"Erhebungsende",key:"survey_end_date",width:"37.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}],Pe=[{title:"Name",key:"name",width:"42.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"42.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}];Le(()=>{ge()});const Te=Se(()=>fe(g.surveyTimePeriods)),Ue=Se(()=>fe(g.downloadableFiles));I(M,n=>{n||y()}),I(q,n=>{n||y()});const fe=n=>n.map(l=>{const f={...l};for(const c in f)(f[c]===null||f[c]===void 0)&&(f[c]="-");return f}),ge=()=>{ne.value=X(new Date(new Date().getFullYear(),4,1)),se.value=X(new Date(new Date().getFullYear(),5,30)),P.value=new Date(new Date().getFullYear(),4,1),T.value=new Date(new Date().getFullYear(),5,30)},y=()=>{M.value=!1,q.value=!1,Z.value=!1,Y.value=!1,re(),v.value={}},re=()=>{S.reset(),S.clearErrors(),b.reset(),b.clearErrors(),ge()},we=async({page:n,itemsPerPage:l,sortBy:f})=>{B.value=!0;let c={data:{page:n,per_page:l}};f&&f.length>0?(c.data.order_by=f[0].key,c.data.sort=f[0].order):(c.data.order_by=null,c.data.sort=null),c.data.search=ce.value,await qe.reload(c),ee.value=n,x.value=l,B.value=!1};I(P,n=>{ne.value=X(n)}),I(T,n=>{se.value=X(n)});const Ne=n=>{j.id=n.id,_e.value=n.year,Z.value=!0},S=C({year:null,survey_start_date:null,survey_end_date:null}),j=C({id:null}),Ce=async()=>{S.processing=!0,S.survey_start_date=new Date(P.value).toLocaleString(),S.survey_end_date=new Date(T.value).toLocaleString(),S.post(route("survey_time_periods.store"),{onSuccess:n=>{y()},onError:n=>{v.value=n},onFinish:()=>{S.processing=!1}})},ze=async()=>{j.processing=!0;let n={onSuccess:l=>{y()},onError:l=>{y(),v.value=l},onFinish:()=>{j.processing=!1}};j.delete(route("downloadable_files.destroy",{id:j.id}),n)},de=C({settings:g.emailSettings}),O=C({settings:g.loginSettings}),be=async n=>{let l=n==="login"?O:de;l.processing=!0;let f={preserveScroll:!0,preserveState:!0,onSuccess:c=>{},onError:c=>{v.value=c},onFinish:()=>{l.processing=!1}};l.post(route("settings.update"),f)},je=n=>{U.id=n.id,pe.value=n.name,Y.value=!0},b=C({name:null,file:null}),U=C({id:null}),Oe=async()=>{var n;U.processing=!0,b.file=(n=b.file)!=null&&n.length?b.file[0]:null,b.post(route("downloadable_files.store"),{forceFormData:!0,onSuccess:l=>{y()},onError:l=>{v.value=l},onFinish:()=>{b.processing=!1}})},$e=async()=>{U.processing=!0;let n={onSuccess:l=>{y()},onError:l=>{y(),v.value=l},onFinish:()=>{U.processing=!1}};U.delete(route("downloadable_files.destroy",{id:U.id}),n)};return(n,l)=>{const f=u("v-card-title"),c=u("v-text-field"),h=u("v-col"),ye=u("v-date-picker"),he=u("v-menu"),xe=u("v-locale-provider"),D=u("v-row"),R=u("v-container"),G=u("v-card-text"),F=u("v-btn-primary"),w=u("v-hover"),J=u("v-spacer"),N=u("v-btn"),W=u("v-card-actions"),K=u("v-card"),Q=u("v-dialog"),$=u("v-icon"),H=u("v-tooltip"),Ve=u("v-data-table-server"),He=u("v-file-input");return k(),z(ie,null,[e(m(Be),{title:"Einstellungen"}),e(Ze,{errors:v.value},{header:t(()=>[Je]),default:t(()=>[s("div",We,[s("div",Ke,[Qe,s("div",Xe,[e(w,null,{default:t(({isHovering:o,props:r})=>[e(N,i(r,{color:o?"accent":"primary",dark:""}),{default:t(()=>[_(" ZEITRAUM HINZUFÜGEN "),e(Q,{modelValue:M.value,"onUpdate:modelValue":l[7]||(l[7]=a=>M.value=a),activator:"parent",width:"80vw"},{default:t(()=>[e(K,{height:"80vh"},{default:t(()=>[e(f,null,{default:t(()=>[et]),_:1}),e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(D,null,{default:t(()=>[e(h,{cols:"12",sm:"4"},{default:t(()=>[e(c,{modelValue:m(S).year,"onUpdate:modelValue":l[0]||(l[0]=a=>m(S).year=a),"error-messages":v.value.year,label:"Jahr*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(h,{cols:"12",sm:"4"},{default:t(()=>[e(xe,{locale:"de"},{default:t(()=>[e(he,{modelValue:ae.value,"onUpdate:modelValue":l[3]||(l[3]=a=>ae.value=a),"return-value":P.value,"close-on-content-click":!1},{activator:t(({props:a})=>[e(c,i({label:"Erhebungsbeginn*",class:"tw-cursor-pointer","model-value":ne.value,"prepend-icon":"mdi-calendar",readonly:""},a,{"error-messages":v.value.survey_start_date}),null,16,["model-value","error-messages"])]),default:t(()=>[e(ye,{"onUpdate:modelValue":[l[1]||(l[1]=a=>ae.value=!1),l[2]||(l[2]=a=>P.value=a)],modelValue:P.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024),e(h,{cols:"12",sm:"4"},{default:t(()=>[e(xe,{locale:"de"},{default:t(()=>[e(he,{modelValue:oe.value,"onUpdate:modelValue":l[6]||(l[6]=a=>oe.value=a),"return-value":T.value,"close-on-content-click":!1},{activator:t(({props:a})=>[e(c,i({label:"Erhebungsende*",class:"tw-cursor-pointer","model-value":se.value,"prepend-icon":"mdi-calendar",readonly:""},a,{"error-messages":v.value.survey_end_date}),null,16,["model-value","error-messages"])]),default:t(()=>[e(ye,{"onUpdate:modelValue":[l[4]||(l[4]=a=>oe.value=!1),l[5]||(l[5]=a=>T.value=a)],modelValue:T.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(W,null,{default:t(()=>[e(w,null,{default:t(({isHovering:a,props:p})=>[e(F,i({onClick:re},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(J),e(w,null,{default:t(({isHovering:a,props:p})=>[e(N,i({onClick:y},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(w,null,{default:t(({isHovering:a,props:p})=>[e(F,i({onClick:Ce},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),e(Q,{modelValue:Z.value,"onUpdate:modelValue":l[8]||(l[8]=o=>Z.value=o),width:"20vw"},{default:t(()=>[e(K,{height:"30vh"},{default:t(()=>[e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(D,null,{default:t(()=>[e(h,{cols:"12"},{default:t(()=>[s("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+E(_e.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(W,null,{default:t(()=>[e(J),e(w,null,{default:t(({isHovering:o,props:r})=>[e(N,i({onClick:y},r,{color:o?"accent":"primary"}),{default:t(()=>[_("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(w,null,{default:t(({isHovering:o,props:r})=>[e(F,i({onClick:ze},r,{color:o?"accent":"primary"}),{default:t(()=>[_("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ve,{"items-per-page":x.value,"onUpdate:itemsPerPage":l[9]||(l[9]=o=>x.value=o),headers:Ee,items:Te.value,search:me.value,loading:B.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":we},{item:t(({item:o})=>[s("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[s("td",null,E(o.selectable.year),1),s("td",null,E(m(Fe)(o.selectable.survey_start_date,"sv-SE")),1),s("td",null,E(m(Fe)(o.selectable.survey_end_date,"sv-SE")),1),s("td",lt,[e(H,{location:"top"},{activator:t(({props:r})=>[e(m(ke),{href:n.route("survey_time_periods.show",{id:o.selectable.id})},{default:t(()=>[e($,i(r,{size:"small",class:"tw-me-2"}),{default:t(()=>[_("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[at]),_:2},1024),e(H,{location:"top"},{activator:t(({props:r})=>[e($,i(r,{size:"small",class:"tw-me-2",onClick:a=>Ne(o.raw)}),{default:t(()=>[_("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[ot]),_:2},1024)])],8,tt)]),"no-data":t(()=>[nt]),bottom:t(()=>[]),_:1},8,["items-per-page","items","search","loading"])]),s("div",st,[rt,e(D,null,{default:t(()=>[e(h,{cols:"12",md:"6"},{default:t(()=>[(k(!0),z(ie,null,De(V.emailSettings,(o,r)=>{var a;return k(),z("div",dt,[e(c,{modelValue:m(de).settings[r],"onUpdate:modelValue":p=>m(de).settings[r]=p,"error-messages":(a=v.value)!=null&&a.settings?v.value.settings[r]:!1,label:`${ve.value[r]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"])])}),256))]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(h,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:t(()=>[e(w,null,{default:t(({isHovering:o,props:r})=>[e(F,i({onClick:l[10]||(l[10]=a=>be("email"))},r,{color:o?"accent":"primary"}),{default:t(()=>[_("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),s("div",it,[s("div",ut,[ct,s("div",mt,[e(w,null,{default:t(({isHovering:o,props:r})=>[e(N,i(r,{color:o?"accent":"primary",dark:""}),{default:t(()=>[_(" DATEI HINZUFÜGEN "),e(Q,{modelValue:q.value,"onUpdate:modelValue":l[13]||(l[13]=a=>q.value=a),activator:"parent",width:"80vw"},{default:t(()=>[e(K,{height:"80vh"},{default:t(()=>[e(f,null,{default:t(()=>[_t]),_:1}),e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(D,null,{default:t(()=>[e(h,{cols:"12",sm:"6"},{default:t(()=>[e(c,{class:"required",type:"text",modelValue:m(b).name,"onUpdate:modelValue":l[11]||(l[11]=a=>m(b).name=a),"error-messages":v.value.name,label:"Name",required:"",disabled:m(b).processing},null,8,["modelValue","error-messages","disabled"])]),_:1}),e(h,{cols:"12",sm:"6"},{default:t(()=>[e(He,{modelValue:m(b).file,"onUpdate:modelValue":l[12]||(l[12]=a=>m(b).file=a),"error-messages":v.value.file,label:"File",accept:"*/*","prepend-icon":"mdi-upload",disabled:m(b).processing},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(W,null,{default:t(()=>[e(w,null,{default:t(({isHovering:a,props:p})=>[e(F,i({onClick:re},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(J),e(w,null,{default:t(({isHovering:a,props:p})=>[e(N,i({onClick:y},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(w,null,{default:t(({isHovering:a,props:p})=>[e(F,i({onClick:Oe},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),e(Q,{modelValue:Y.value,"onUpdate:modelValue":l[14]||(l[14]=o=>Y.value=o),width:"20vw"},{default:t(()=>[e(K,{height:"30vh"},{default:t(()=>[e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(D,null,{default:t(()=>[e(h,{cols:"12"},{default:t(()=>[s("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+E(pe.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(W,null,{default:t(()=>[e(J),e(w,null,{default:t(({isHovering:o,props:r})=>[e(N,i({onClick:y},r,{color:o?"accent":"primary"}),{default:t(()=>[_("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(w,null,{default:t(({isHovering:o,props:r})=>[e(F,i({onClick:$e},r,{color:o?"accent":"primary"}),{default:t(()=>[_("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ve,{"items-per-page":x.value,"onUpdate:itemsPerPage":l[15]||(l[15]=o=>x.value=o),headers:Pe,items:Ue.value,search:me.value,loading:B.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":we},{item:t(({item:o})=>{var r;return[s("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[s("td",null,E(o.selectable.name),1),s("td",null,E(m(Ye)(o.selectable.created_at,"sv-SE")),1),s("td",vt,[(r=o.selectable)!=null&&r.path?(k(),ue(H,{key:0,location:"top"},{activator:t(({props:a})=>[s("a",{href:o.selectable.path,download:""},[e($,i(a,{size:"small",class:"tw-me-2"}),{default:t(()=>[_("mdi-download")]),_:2},1040)],8,ft)]),default:t(()=>[gt]),_:2},1024)):Me("",!0),e(H,{location:"top"},{activator:t(({props:a})=>[e(m(ke),{href:n.route("downloadable_files.show",{id:o.selectable.id})},{default:t(()=>[e($,i(a,{size:"small",class:"tw-me-2"}),{default:t(()=>[_("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[wt]),_:2},1024),e(H,{location:"top"},{activator:t(({props:a})=>[e($,i(a,{size:"small",class:"tw-me-2",onClick:p=>je(o.raw)}),{default:t(()=>[_("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[bt]),_:2},1024)])],8,pt)]}),"no-data":t(()=>[yt]),bottom:t(()=>[]),_:1},8,["items-per-page","items","search","loading"])]),s("div",ht,[xt,e(D,null,{default:t(()=>[e(h,{cols:"12"},{default:t(()=>[(k(!0),z(ie,null,De(V.loginSettings,(o,r)=>{var a;return k(),z("div",Vt,[r==="login_form_additional_html"?(k(),ue(Ge,{key:0,modelValue:m(O).settings[r],"onUpdate:modelValue":p=>m(O).settings[r]=p,minHeight:300},null,8,["modelValue","onUpdate:modelValue"])):(k(),ue(c,{key:1,modelValue:m(O).settings[r],"onUpdate:modelValue":p=>m(O).settings[r]=p,"error-messages":(a=v.value)!=null&&a.settings?v.value.settings[r]:!1,label:`${ve.value[r]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"]))])}),256))]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(h,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:t(()=>[e(w,null,{default:t(({isHovering:o,props:r})=>[e(F,i({onClick:l[16]||(l[16]=a=>be("login"))},r,{color:o?"accent":"primary"}),{default:t(()=>[_("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Tt as default};
