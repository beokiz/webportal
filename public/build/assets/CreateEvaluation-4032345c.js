import{k as E,K as G,s as J,l as Q,T as X,r as c,o as V,f as k,a as e,u as i,w as a,F as I,Z as Y,b as l,v as F,p as D,d as U,t as h,x as M,q as S,y as z}from"./app-f3537678.js";import{d as ee}from"./index-a41fb1e4.js";import{_ as ae}from"./AuthenticatedLayout-e4bcf8a7.js";import{a as ne}from"./common-ba477221.js";import"./ApplicationLogo-2c061f4f.js";let R;const te=new Uint8Array(16);function le(){if(!R&&(R=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(te)}const r=[];for(let n=0;n<256;++n)r.push((n+256).toString(16).slice(1));function oe(n,o=0){return r[n[o+0]]+r[n[o+1]]+r[n[o+2]]+r[n[o+3]]+"-"+r[n[o+4]]+r[n[o+5]]+"-"+r[n[o+6]]+r[n[o+7]]+"-"+r[n[o+8]]+r[n[o+9]]+"-"+r[n[o+10]]+r[n[o+11]]+r[n[o+12]]+r[n[o+13]]+r[n[o+14]]+r[n[o+15]]}const se=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q={randomUUID:se};function de(n,o,x){if(q.randomUUID&&!o&&!n)return q.randomUUID();n=n||{};const v=n.random||(n.rng||le)();if(v[6]=v[6]&15|64,v[8]=v[8]&63|128,o){x=x||0;for(let f=0;f<16;++f)o[x+f]=v[f];return o}return oe(v)}const ie=l("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},h("Create"),-1),re={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ue=l("h3",null,"Eigenschaften",-1),ce={class:"subdomains-list-head"},_e=l("div",{class:"radio-wrap radio-head"},[l("span",null,"Noch Nicht")],-1),me=l("div",{class:"radio-wrap radio-head"},[l("span",null,"Ansatzweise")],-1),pe=l("div",{class:"radio-wrap radio-head"},[l("span",null,"Weitgehend")],-1),ve=l("div",{class:"radio-wrap radio-head"},[l("span",null,"Zuverlassig")],-1),ge={class:"radio-wrap radio-content"},he=["onUpdate:modelValue","name"],xe={class:"radio-wrap radio-content"},fe=["onUpdate:modelValue","name"],ye={class:"radio-wrap radio-content"},we=["onUpdate:modelValue","name"],Ve={class:"radio-wrap radio-content"},ke=["onUpdate:modelValue","name"],Ie={__name:"CreateEvaluation",props:{errors:Object,kitas:Array,domains:Array},setup(n){const o=n,x=E(!1);ee.Inertia.on("success",u=>{u.detail.page.props,u.detail.page.component});const v=G().props.auth.user??{},f=E(null),g=E(o.errors||{});E(!1);const B=E(null);J(()=>{T()}),Q(()=>{f.value=de(),s.uuid=f.value});const T=()=>{let u=[];o.domains.forEach(function(_,p){u[p]={domain:_.id,milestones:[]},_.subdomains.forEach(function(y,b){y.milestones.forEach(function($,A){u[p].milestones.push({id:$.id,value:null})})})}),s.ratings=u},s=X({age:null,uuid:null,is_daz:!1,user_id:v.id,kita_id:null,ratings:[]}),K=async()=>{s.processing=!0,s.post(route("evaluations.store"),{onSuccess:u=>{s.reset(),s.clearErrors(),T(),x.value=!0,B.value=u.props.data,console.log(B.value)},onError:u=>{g.value=u},onFinish:()=>{s.processing=!1}})};return(u,_)=>{const p=c("v-col"),y=c("v-row"),b=c("v-container"),$=c("v-text-field"),A=c("v-select"),L=c("v-checkbox"),N=c("v-btn"),C=c("v-hover"),j=c("v-btn-primary"),Z=c("v-card-text"),H=c("v-spacer"),O=c("v-card-actions"),P=c("v-card"),W=c("v-dialog");return V(),k(I,null,[e(i(Y),{title:"Create"}),e(ae,{errors:g.value},{header:a(()=>[ie]),default:a(()=>[l("div",re,[e(b,null,{default:a(()=>[e(y,null,{default:a(()=>[e(p,{cols:"12"},{default:a(()=>[ue]),_:1})]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(y,null,{default:a(()=>[e(p,{cols:"12",sm:"4"},{default:a(()=>[e($,{modelValue:i(s).uuid,"onUpdate:modelValue":_[0]||(_[0]=d=>i(s).uuid=d),"error-messages":g.value.uuid,readonly:"",label:"Bezeichner der Einschatzung",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(p,{cols:"12",sm:"3"},{default:a(()=>[e(A,{modelValue:i(s).age,"onUpdate:modelValue":_[1]||(_[1]=d=>i(s).age=d),items:i(ne),"error-messages":g.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),e(p,{cols:"12",sm:"3"},{default:a(()=>[e(A,{modelValue:i(s).kita_id,"onUpdate:modelValue":_[2]||(_[2]=d=>i(s).kita_id=d),items:n.kitas,"error-messages":g.value.kita_id,"item-title":"name","item-value":"id",label:"Kita"},null,8,["modelValue","items","error-messages"])]),_:1}),e(p,{cols:"12",sm:"2"},{default:a(()=>[e(L,{modelValue:i(s).is_daz,"onUpdate:modelValue":_[3]||(_[3]=d=>i(s).is_daz=d),label:"Ist Daz"},null,8,["modelValue"])]),_:1})]),_:1}),e(y,null,{default:a(()=>[(V(!0),k(I,null,F(n.domains,d=>(V(),k("div",{class:"domains-list-container",key:d.id},[l("h3",null,h(d.name),1),(V(!0),k(I,null,F(d.subdomains,m=>(V(),k("div",{class:"subdomains-list-container",key:m.id},[l("div",ce,[l("h4",null,h(m.name),1),_e,me,pe,ve]),(V(!0),k(I,null,F(m.milestones,t=>(V(),k("div",{class:"milestone-list-container",key:t.id},[l("h5",{class:M({error:g.value[`ratings.${t.domain_index}.milestones.${t.index}.value`]})},h(t.abbreviation),3),l("div",{class:M(["milestone-list-text",{error:g.value[`ratings.${t.domain_index}.milestones.${t.index}.value`]}])},[l("span",null,h(t.title),1),l("p",null,h(t.text),1)],2),l("fieldset",{class:M({error:g.value[`ratings.${t.domain_index}.milestones.${t.index}.value`]})},[l("div",ge,[S(l("input",{type:"radio","onUpdate:modelValue":w=>i(s).ratings[t.domain_index].milestones[t.index].value=w,name:t.id+"check-radio",value:"1"},null,8,he),[[z,i(s).ratings[t.domain_index].milestones[t.index].value]])]),l("div",xe,[S(l("input",{type:"radio","onUpdate:modelValue":w=>i(s).ratings[t.domain_index].milestones[t.index].value=w,name:t.id+"check-radio",value:"2"},null,8,fe),[[z,i(s).ratings[t.domain_index].milestones[t.index].value]])]),l("div",ye,[S(l("input",{type:"radio","onUpdate:modelValue":w=>i(s).ratings[t.domain_index].milestones[t.index].value=w,name:t.id+"check-radio",value:"3"},null,8,we),[[z,i(s).ratings[t.domain_index].milestones[t.index].value]])]),l("div",Ve,[S(l("input",{type:"radio","onUpdate:modelValue":w=>i(s).ratings[t.domain_index].milestones[t.index].value=w,name:t.id+"check-radio",value:"4"},null,8,ke),[[z,i(s).ratings[t.domain_index].milestones[t.index].value]])])],2)]))),128))]))),128))]))),128))]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(y,null,{default:a(()=>[e(p,{cols:"12",sm:"6"},{default:a(()=>[e(C,null,{default:a(({isHovering:d,props:m})=>[e(N,D({onClick:u.clear},m,{color:d?"primary":"accent"}),{default:a(()=>[U("Back")]),_:2},1040,["onClick","color"])]),_:1})]),_:1}),e(p,{cols:"12",sm:"6",align:"right"},{default:a(()=>[e(C,null,{default:a(({isHovering:d,props:m})=>[e(N,D({class:"mr-2",variant:"text"},m,{color:d?"accent":"primary"}),{default:a(()=>[U("Save")]),_:2},1040,["color"])]),_:1}),e(C,null,{default:a(({isHovering:d,props:m})=>[e(j,D({onClick:K},m,{color:d?"accent":"primary"}),{default:a(()=>[U("Big save ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1})]),e(W,{modelValue:x.value,"onUpdate:modelValue":_[4]||(_[4]=d=>x.value=d),width:"95vw"},{default:a(()=>[e(P,{height:"95vh"},{default:a(()=>[e(Z,null,{default:a(()=>[e(b,null,{default:a(()=>[e(y,null,{default:a(()=>[e(p,{cols:"12"},{default:a(()=>[l("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+h(u.deletingItemName)+" löschen möchten?",1)]),_:1}),e(p,{cols:"12"},{default:a(()=>[U(h(B.value),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:a(()=>[e(H),e(C,null,{default:a(({isHovering:d,props:m})=>[e(N,D({onClick:u.close},m,{color:d?"accent":"primary"}),{default:a(()=>[U("Abbrechen")]),_:2},1040,["onClick","color"])]),_:1}),e(C,null,{default:a(({isHovering:d,props:m})=>[e(j,D({onClick:u.deleteEvaluation},m,{color:d?"accent":"primary"}),{default:a(()=>[U("Löschen")]),_:2},1040,["onClick","color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["errors"])],64)}}};export{Ie as default};
