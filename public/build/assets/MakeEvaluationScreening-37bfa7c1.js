import{d as q}from"./index-bc58436b.js";import{K as G,k as _,s as H,T as J,m as L,r as o,o as u,f as R,a as e,u as l,w as a,F as Q,Z as W,b as p,c as h,g as k,p as y,d as V,t as X}from"./app-51f4afb2.js";import{p as D,a as Y}from"./common-326e1711.js";import{_ as ee}from"./AuthenticatedLayout-edda0b11.js";import{_ as C}from"./EvaluationDomainsList-a9016710.js";import"./ApplicationLogo-baa6cee2.js";const ae=p("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Screening-prüfung",-1),te={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},oe=p("h3",null,"Eigenschaften",-1),ne={key:0,class:"tw-flex justify-center items-center tw-bg-white"},se={class:"tw-text-center"},le={class:"tw-uppercase text-primary tw-font-black tw-text-xl tw-mb-8"},_e={__name:"MakeEvaluationScreening",props:{domains:Array,dazDependent:{type:Boolean,default:!1},errors:Object},setup(g){const v=g;q.Inertia.on("success",n=>{n.detail.page.props,n.detail.page.component}),G().props.auth.user;const r=_(v.errors||{}),b=_(!1),f=_(!1),B=_(null),z=_(null);H(()=>{A()});const S=n=>{t.ratings=n},A=()=>{t.ratings=D(v.domains)},N=()=>{r.value={},f.value=!1},F=()=>{t.reset(),t.clearErrors(),r.value={},t.ratings=D(v.domains)},t=J({age:null,is_daz:!1,ratings:[]});L(()=>t.age,n=>{t.ratings=D(v.domains)});const U=async()=>{t.processing=!0,b.value=!0,t.post(route("screening.make"),{onSuccess:n=>{t.clearErrors(),r.value={},f.value=!0,B.value=n.props.data.evaluation,z.value=n.props.data.domain.name},onError:n=>{r.value=n},onFinish:()=>{t.processing=!1,b.value=!1}})};return(n,i)=>{const c=o("v-col"),d=o("v-row"),w=o("v-container"),I=o("v-select"),M=o("v-checkbox"),j=o("v-progress-circular"),T=o("v-btn"),x=o("v-hover"),E=o("v-btn-primary"),Z=o("v-card-text"),$=o("v-spacer"),K=o("v-card-actions"),O=o("v-card"),P=o("v-dialog");return u(),R(Q,null,[e(l(W),{title:"Screening-prüfung"}),e(ee,{errors:r.value},{header:a(()=>[ae]),default:a(()=>[p("div",te,[e(w,null,{default:a(()=>[e(d,null,{default:a(()=>[e(c,{cols:"12"},{default:a(()=>[oe]),_:1})]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(d,null,{default:a(()=>[e(c,{cols:"12",sm:"3"},{default:a(()=>[e(I,{modelValue:l(t).age,"onUpdate:modelValue":i[0]||(i[0]=s=>l(t).age=s),items:l(Y),"error-messages":r.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),g.dazDependent?(u(),h(c,{key:0,cols:"12",sm:"3"},{default:a(()=>[e(M,{modelValue:l(t).is_daz,"onUpdate:modelValue":i[1]||(i[1]=s=>l(t).is_daz=s),label:"Deutsch ist nicht Muttersprache"},null,8,["modelValue"])]),_:1})):k("",!0)]),_:1}),e(d,{class:"manage-evaluation-domains"},{default:a(()=>[l(t).age?(u(),h(C,{key:0,ratings:l(t).ratings,age:l(t).age,domains:g.domains,errors:r.value,onUpdateRatingData:S},null,8,["ratings","age","domains","errors"])):k("",!0)]),_:1})]),_:1}),e(w,null,{default:a(()=>[b.value?(u(),R("div",ne,[e(j,{indeterminate:"",size:40})])):(u(),h(d,{key:1},{default:a(()=>[e(c,{cols:"12",sm:"6"},{default:a(()=>[e(x,null,{default:a(({isHovering:s,props:m})=>[e(T,y({onClick:F},m,{color:s?"primary":"accent"}),{default:a(()=>[V(" Zurücksetzen ")]),_:2},1040,["color"])]),_:1})]),_:1}),e(c,{cols:"12",sm:"6",align:"right"},{default:a(()=>[l(t).age?(u(),h(x,{key:0},{default:a(({isHovering:s,props:m})=>[e(E,y({onClick:U},m,{color:s?"accent":"primary"}),{default:a(()=>[V(" Ampel-Bewertung ")]),_:2},1040,["color"])]),_:1})):k("",!0)]),_:1})]),_:1}))]),_:1})]),e(P,{modelValue:f.value,"onUpdate:modelValue":i[2]||(i[2]=s=>f.value=s),width:"95vw"},{default:a(()=>[e(O,{height:"95vh"},{default:a(()=>[e(Z,null,{default:a(()=>[e(w,null,{default:a(()=>[e(d,{class:"result-evaluation-domains"},{default:a(()=>[e(c,{cols:"8",offset:"2"},{default:a(()=>[p("div",se,[p("h1",le," Ampelergebnis im Bereich "+X(z.value),1)])]),_:1}),e(c,{cols:"12"},{default:a(()=>[e(C,{ratings:B.value,age:l(t).age,domains:g.domains,disabled:!0},null,8,["ratings","age","domains"])]),_:1})]),_:1})]),_:1})]),_:1}),e(K,null,{default:a(()=>[e($),e(x,null,{default:a(({isHovering:s,props:m})=>[e(E,y({onClick:N},m,{color:s?"accent":"primary"}),{default:a(()=>[V("Abbrechen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["errors"])],64)}}};export{_e as default};
