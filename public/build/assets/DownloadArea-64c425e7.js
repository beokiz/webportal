import{d as R}from"./index-3fc1325f.js";import{K as Z,h as s,j as w,r as d,f as h,a as r,u as S,w as l,F as B,o as g,Z as q,b as a,m as T,d as b,t as V,c as G,g as J,O as L}from"./app-114a994f.js";import{b as M}from"./common-b6d82cb9.js";import{_ as Q}from"./AuthenticatedLayout-cabf0df4.js";import"./ApplicationLogo-b203cb1f.js";const W=a("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Downloadbereich",-1),X={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Y={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},ee={class:"tw-w-full"},te={class:"tw-ml-6"},ae=["data-id","data-order"],le=["href"],oe=a("span",null,"Datei herunterladen",-1),se={class:"tw-py-6"},re={key:0,class:"tw-mb-4"},ne=a("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),me={__name:"DownloadArea",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(F){const n=F;R.Inertia.on("success",i=>{let e=i.detail.page.props;i.detail.page.component==="Kitas/Kitas"&&e&&(m.value=e.currentPage,p.value=e.perPage,j.value=e.orderBy,C.value=e.sort,y.value=e.total,O.value=e.lastPage,u.value=e.filters.search??null)}),Z().props.auth.user;const m=s(n.currentPage),p=s(n.perPage),j=s(n.orderBy),C=s(n.sort),y=s(n.total),O=s(n.lastPage),u=s(n.filters.search??null),P=s(""),z=s(n.errors||{}),f=s(!1),A=[{title:"Name",key:"name",width:"47.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"47.5%",sortable:!0},{title:"Aktion",key:"actions",width:"5%",sortable:!1,align:"center"}],E=w(()=>n.items.map(i=>{const e={...i};for(const o in e)(e[o]===null||e[o]===void 0)&&(e[o]="-");return e})),k=w(()=>u.value===null),I=w(()=>u.value!==null),x=async({page:i,itemsPerPage:e,sortBy:o,clearFilters:v})=>{if(v&&(u.value=null),i===m.value&&v||k||I){f.value=!0;let c={data:{page:i,per_page:e}};o&&o.length>0?(c.data.order_by=o[0].key,c.data.sort=o[0].order):(c.data.order_by=null,c.data.sort=null),c.data.search=u.value,await L.reload(c),m.value=i,p.value=e,f.value=!1}};return(i,e)=>{const o=d("v-text-field"),v=d("v-col"),c=d("v-row"),N=d("v-btn"),$=d("v-hover"),K=d("v-icon"),U=d("v-tooltip"),H=d("v-data-table-server");return g(),h(B,null,[r(S(q),{title:"Downloadbereich"}),r(Q,{errors:z.value},{header:l(()=>[W]),default:l(()=>[a("div",X,[a("div",Y,[a("div",ee,[r(c,null,{default:l(()=>[r(v,{cols:"12",sm:"5"},{default:l(()=>[r(o,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),label:"Name"},null,8,["modelValue"])]),_:1})]),_:1})]),a("div",te,[r($,null,{default:l(({isHovering:t,props:_})=>[r(N,T({class:"tw-mt-2"},_,{color:t?"accent":"primary",onClick:e[1]||(e[1]=D=>P.value=String(Date.now())),dark:""}),{default:l(()=>[b("Suche")]),_:2},1040,["color"])]),_:1})])]),r(H,{"items-per-page":p.value,"onUpdate:itemsPerPage":e[3]||(e[3]=t=>p.value=t),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:A,page:m.value,"items-length":y.value,items:E.value,search:P.value,loading:f.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":x},{item:l(({item:t})=>{var _;return[a("tr",{"data-id":t.selectable.id,"data-order":t.selectable.order},[a("td",null,V(t.selectable.name),1),a("td",null,V(S(M)(t.selectable.created_at,"sv-SE")),1),a("td",null,[(_=t.selectable)!=null&&_.path?(g(),G(U,{key:0,location:"top"},{activator:l(({props:D})=>[a("a",{href:t.selectable.path,download:""},[r(K,T(D,{size:"small",class:"tw-me-2"}),{default:l(()=>[b("mdi-download")]),_:2},1040)],8,le)]),default:l(()=>[oe]),_:2},1024)):J("",!0)])],8,ae)]}),"no-data":l(()=>[a("div",se,[k.value?(g(),h("h3",re,"Die Tabelle ist leer.")):(g(),h(B,{key:1},[ne,r(N,{color:"primary",onClick:e[2]||(e[2]=t=>x({page:1,itemsPerPage:p.value,clearFilters:!0}))},{default:l(()=>[b("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])])]),_:1},8,["errors"])],64)}}};export{me as default};
