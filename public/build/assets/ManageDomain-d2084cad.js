import{d as ne}from"./index-8cbffcc2.js";import{K as _e,k as z,h as $,m as ue,l as ie,T as F,r as m,n as me,o as k,f as ce,a as e,u as r,w as l,F as he,Z as pe,b as n,i as J,p as h,d as p,c as U,g as N,t as K,q as ge}from"./app-ada13956.js";import{_ as fe}from"./AuthenticatedLayout-9092b3ba.js";import{S as ve}from"./sortable.esm-0d19b1d3.js";import"./ApplicationLogo-1348bb7b.js";const we=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Verwalte Subdomäne",-1),be={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ye=n("h3",null,"Eigenschaften",-1),ze={class:"tw-flex tw-justify-between"},Ve=n("p",null,"Schwellenwerte für Altersgruppe bis 2,5 Jahre",-1),Se=n("p",null,"Schwellenwerte für Altersgruppe bis 4,5 Jahre",-1),ke=n("h3",null,"Zugeordnete Subdomänen",-1),De={class:"tw-flex tw-items-center tw-justify-end"},xe=n("span",{class:"tw-text-h5"},"Neue Subdomäne",-1),Ue=["data-id","data-order"],qe=n("span",null,"neu anordnen",-1),Ce=n("span",null,"Domäne anzeigen",-1),Be=n("span",null,"Benutzer löschen",-1),Ee=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Te={__name:"ManageDomain",props:{domain:Object,errors:Object},setup(L){const A=L;ne.Inertia.on("success",s=>{let t=s.detail.page.props;s.detail.page.component==="Domains/Partials/ManageDomain"&&t&&(c.value=t.domain)}),_e().props.auth.user;const c=z(A.domain),_=z(A.errors||{}),H=z(!1),q=z(!1),Q=z(null),C=z(!1),Z=z(null),W=[{title:"Name",key:"first_name",width:"90%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],b=$(()=>a.daz_dependent?3:6),X=$(()=>A.domain.subdomains.map(s=>{const t={...s};for(const d in t)(t[d]===null||t[d]===void 0)&&(t[d]="-");return t}));ue(C,s=>{s||V()}),ie(()=>{const s={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(t){Y(t)}};ve.create(document.querySelector(".v-data-table tbody"),s)});const V=()=>{C.value=!1,q.value=!1,v.reset(),v.clearErrors(),_.value={}},j=()=>{v.reset(),v.clearErrors(),a.reset(),a.clearErrors(),a.daz_dependent=!1,a.name=null,a.abbreviation=null,a.age_2_red_threshold=null,a.age_2_red_threshold_daz=null,a.age_2_yellow_threshold=null,a.age_2_yellow_threshold_daz=null,a.age_4_red_threshold=null,a.age_4_red_threshold_daz=null,a.age_4_yellow_threshold=null,a.age_4_yellow_threshold_daz=null},B=F({items:[]}),Y=s=>{B.processing=!0;let t=[],d=0;[].forEach.call(s.from.querySelectorAll("tr"),function(u,y){u.setAttribute("data-order",d+y),t.push({id:u.getAttribute("data-id"),order:d+y})}),B.items=t,B.post(route("subdomains.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:u=>{},onError:u=>{_.value=u},onFinish:()=>{B.processing=!1}})},ee=s=>{Z.value=s.name,D.id=s.id,q.value=!0},D=F({id:null}),le=async()=>{D.processing=!0;let s={onSuccess:t=>{V()},onError:t=>{_.value=t},onFinish:()=>{D.processing=!1}};D.delete(route("subdomains.destroy",{id:D.id}),s)},a=F({id:c.value.id,name:c.value.name,abbreviation:c.value.abbreviation,age_2_red_threshold:c.value.age_2_red_threshold,age_2_red_threshold_daz:c.value.age_2_red_threshold_daz,age_2_yellow_threshold:c.value.age_2_yellow_threshold,age_2_yellow_threshold_daz:c.value.age_2_yellow_threshold_daz,age_4_red_threshold:c.value.age_4_red_threshold,age_4_red_threshold_daz:c.value.age_4_red_threshold_daz,age_4_yellow_threshold:c.value.age_4_yellow_threshold,age_4_yellow_threshold_daz:c.value.age_4_yellow_threshold_daz,daz_dependent:c.value.daz_dependent}),ae=async()=>{a.processing=!0,a.daz_dependent||(a.age_2_red_threshold_daz=a.age_2_red_threshold,a.age_2_yellow_threshold_daz=a.age_2_yellow_threshold,a.age_4_red_threshold_daz=a.age_4_red_threshold,a.age_4_yellow_threshold_daz=a.age_4_yellow_threshold);let s={preserveState:!1,onSuccess:t=>{V()},onError:t=>{_.value=t},onFinish:()=>{a.processing=!1}};a.put(route("domains.update",{domain:a.id}),s)},v=F({name:null,domain:c.value.id}),te=async()=>{v.processing=!0,v.post(route("subdomains.store"),{preserveState:!1,onSuccess:s=>{V()},onError:s=>{_.value=s},onFinish:()=>{v.processing=!1}})};return(s,t)=>{const d=m("v-col"),u=m("v-row"),y=m("v-btn"),w=m("v-hover"),E=m("v-btn-primary"),S=m("v-container"),g=m("v-text-field"),oe=m("v-switch"),I=m("v-spacer"),re=m("v-card-title"),G=m("v-card-text"),R=m("v-card-actions"),M=m("v-card"),P=m("v-dialog"),O=m("v-icon"),T=m("v-tooltip"),de=m("v-data-table-server"),se=me("sortable-data-table");return k(),ce(he,null,[e(r(pe),{title:"Verwalte Subdomäne"}),e(fe,{errors:_.value},{header:l(()=>[we]),default:l(()=>[n("div",be,[e(S,null,{default:l(()=>[e(u,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[ye]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(d,{cols:"12",md:"3",sm:"4"},{default:l(()=>[n("div",ze,[e(w,null,{default:l(({isHovering:o,props:i})=>[e(r(J),{href:s.route("domains.index")},{default:l(()=>[e(y,h(i,{color:o?"primary":"accent"}),{default:l(()=>[p("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(w,null,{default:l(({isHovering:o,props:i})=>[e(E,h({onClick:ae},i,{color:o?"accent":"primary"}),{default:l(()=>[p("Speichern ")]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(u,null,{default:l(()=>[e(d,{cols:"12",sm:"3"},{default:l(()=>[e(g,{modelValue:r(a).abbreviation,"onUpdate:modelValue":t[0]||(t[0]=o=>r(a).abbreviation=o),"error-messages":_.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"9"},{default:l(()=>[e(g,{modelValue:r(a).name,"onUpdate:modelValue":t[1]||(t[1]=o=>r(a).name=o),"error-messages":_.value.name,label:"Name der Domäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(u,{class:"mt-10"},{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(oe,{modelValue:r(a).daz_dependent,"onUpdate:modelValue":t[2]||(t[2]=o=>r(a).daz_dependent=o),"defaults-target":r(a).daz_dependent,"hide-details":"",label:"Einstellen mit Daz"},null,8,["modelValue","defaults-target"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[Ve]),_:1}),e(d,{cols:"12",sm:b.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_red_threshold,"onUpdate:modelValue":t[3]||(t[3]=o=>r(a).age_2_red_threshold=o),"error-messages":_.value.age_2_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(k(),U(d,{key:0,cols:"12",sm:b.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_red_threshold_daz,"onUpdate:modelValue":t[4]||(t[4]=o=>r(a).age_2_red_threshold_daz=o),"error-messages":_.value.age_2_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):N("",!0),e(d,{cols:"12",sm:b.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_yellow_threshold,"onUpdate:modelValue":t[5]||(t[5]=o=>r(a).age_2_yellow_threshold=o),"error-messages":_.value.age_2_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(k(),U(d,{key:1,cols:"12",sm:b.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_yellow_threshold_daz,"onUpdate:modelValue":t[6]||(t[6]=o=>r(a).age_2_yellow_threshold_daz=o),"error-messages":_.value.age_2_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):N("",!0)]),_:1}),e(u,null,{default:l(()=>[e(I),e(d,{cols:"12"},{default:l(()=>[Se]),_:1}),e(d,{cols:"12",sm:b.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_red_threshold,"onUpdate:modelValue":t[7]||(t[7]=o=>r(a).age_4_red_threshold=o),"error-messages":_.value.age_4_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(k(),U(d,{key:0,cols:"12",sm:b.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_red_threshold_daz,"onUpdate:modelValue":t[8]||(t[8]=o=>r(a).age_4_red_threshold_daz=o),"error-messages":_.value.age_4_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):N("",!0),e(d,{cols:"12",sm:b.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_yellow_threshold,"onUpdate:modelValue":t[9]||(t[9]=o=>r(a).age_4_yellow_threshold=o),"error-messages":_.value.age_4_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(k(),U(d,{key:1,cols:"12",sm:b.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_yellow_threshold_daz,"onUpdate:modelValue":t[10]||(t[10]=o=>r(a).age_4_yellow_threshold_daz=o),"error-messages":_.value.age_4_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):N("",!0)]),_:1}),e(u,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(w,null,{default:l(({isHovering:o,props:i})=>[e(y,h({onClick:j},i,{color:o?"primary":"accent"}),{default:l(()=>[p("Zurücksetzen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(u,{class:"tw-border-t-8 tw-mt-8 tw-pt-8"},{default:l(()=>[e(d,{cols:"12",sm:"6"},{default:l(()=>[ke]),_:1}),e(d,{cols:"12",sm:"6"},{default:l(()=>[n("div",De,[e(w,null,{default:l(({isHovering:o,props:i})=>[e(y,h(i,{color:o?"accent":"primary",dark:""}),{default:l(()=>[p(" Subdomäne hinzufügen "),e(P,{modelValue:C.value,"onUpdate:modelValue":t[12]||(t[12]=f=>C.value=f),activator:"parent",width:"80vw"},{default:l(()=>[e(M,{height:"80vh"},{default:l(()=>[e(re,null,{default:l(()=>[xe]),_:1}),e(G,null,{default:l(()=>[e(S,null,{default:l(()=>[e(u,null,{default:l(()=>[e(d,{cols:"12",sm:"12"},{default:l(()=>[e(g,{modelValue:r(v).name,"onUpdate:modelValue":t[11]||(t[11]=f=>r(v).name=f),"error-messages":_.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,null,{default:l(()=>[e(w,null,{default:l(({isHovering:f,props:x})=>[e(E,h({onClick:j},x,{color:f?"primary":"accent"}),{default:l(()=>[p("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(I),e(w,null,{default:l(({isHovering:f,props:x})=>[e(y,h({onClick:V},x,{color:f?"accent":"primary"}),{default:l(()=>[p("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(w,null,{default:l(({isHovering:f,props:x})=>[e(E,h({onClick:te},x,{color:f?"accent":"primary"}),{default:l(()=>[p("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(P,{modelValue:q.value,"onUpdate:modelValue":t[13]||(t[13]=o=>q.value=o),width:"20vw"},{default:l(()=>[e(M,{height:"30vh"},{default:l(()=>[e(G,null,{default:l(()=>[e(S,null,{default:l(()=>[e(u,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[n("p",null,"Sind Sie sicher, dass Sie die Subdomäne "+K(Z.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(R,null,{default:l(()=>[e(I),e(w,null,{default:l(({isHovering:o,props:i})=>[e(y,h({onClick:V},i,{color:o?"accent":"primary"}),{default:l(()=>[p("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(w,null,{default:l(({isHovering:o,props:i})=>[e(E,h({onClick:le},i,{color:o?"accent":"primary"}),{default:l(()=>[p("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(u,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[ge((k(),U(de,{"items-per-page":-1,headers:W,items:X.value,loading:H.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:l(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,K(o.selectable.name),1),n("td",null,[e(T,{location:"top"},{activator:l(({props:i})=>[e(O,h({draggable:"true",onDragstart:f=>Q.value=o.raw,color:"primary"},i,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:l(()=>[p("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:l(()=>[qe]),_:2},1024),e(T,{location:"top"},{activator:l(({props:i})=>[e(r(J),{href:s.route("subdomains.show",{id:o.selectable.id})},{default:l(()=>[e(O,h(i,{size:"small",class:"tw-me-2"}),{default:l(()=>[p("mdi-eye")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[Ce]),_:2},1024),e(T,{location:"top"},{activator:l(({props:i})=>[e(O,h(i,{size:"small",class:"tw-me-2",onClick:f=>ee(o.raw)}),{default:l(()=>[p("mdi-delete ")]),_:2},1040,["onClick"])]),default:l(()=>[Be]),_:2},1024)])],8,Ue)]),"no-data":l(()=>[Ee]),_:1},8,["items","loading"])),[[se]])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Te as default};
