import{d as ce}from"./index-608046d9.js";import{K as de,k as r,h as pe,m as ve,T as N,r as u,n as _e,o as S,f as J,a as t,u as b,w as e,F as me,Z as fe,i as Q,p as _,d as c,g as V,b as n,t as w,q as he,c as A,O as ge}from"./app-072a1025.js";import{f as B}from"./common-326e1711.js";import{_ as be}from"./AuthenticatedLayout-31d17e9a.js";import{_ as we}from"./EvaluationDomainsList-71e85aca.js";import"./ApplicationLogo-323a588b.js";const ye=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einschätzungen",-1),ke={key:0,class:"tw-flex tw-items-center tw-justify-end"},Ee={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Se=["data-id","data-order"],ze={align:"center"},Pe=n("span",null,"Einschätzung bearbeiten",-1),De=n("span",null,"Einschätzung ansehen",-1),xe=n("span",null,"Einschätzung löschen",-1),Ce=n("div",{class:"tw-py-6"},[n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Fe={class:"tw-text-right"},$e=["href"],Ie={class:"tw-text-center"},Ne=n("h1",{class:"tw-uppercase text-primary tw-font-black tw-text-xl tw-mb-8"}," Screening wurde eingereicht ",-1),Ve=n("p",{class:"tw-mb-8"}," Folgendes Screening wurde eingereicht und kann nur bis 15 Minuten nach Einreichung bearbeitet werden. Danach verschwindet es aus Ihrer Übersicht. Sollten Sie es zurückziehen oder bearbeiten wollen, klicke Sie auf 'Abgabe zurückziehen. Nachfolgend erhalten Sie eine Übersicht des eingereichten Screenings, welches Sie über den Download-Button als PDF herunterladen können. ",-1),Ae=n("span",{class:"tw-font-black"},"Bezeichner des Screenings",-1),Ze={__name:"Evaluations",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(W){const v=W;ce.Inertia.on("success",l=>{let a=l.detail.page.props;l.detail.page.component==="Evaluations/Evaluations"&&a&&(h.value=a.currentPage,y.value=a.perPage,T.value=a.orderBy,X.value=a.sort,O.value=a.total,Y.value=a.lastPage)}),de().props.auth.user;const h=r(v.currentPage),y=r(v.perPage),T=r(v.orderBy),X=r(v.sort),O=r(v.total),Y=r(v.lastPage),ee=r(""),m=r(v.errors||{}),C=r(!1),j=r(!1),z=r(!1),R=r(null),P=r(!1),k=r(null),U=r(null),te=[{title:"ID",key:"id",width:"40%",sortable:!1},{title:"Zullet bearbeitet",key:"updated_at",width:"15%",sortable:!1},{title:"Abgegeben am",key:"finished_at",width:"15%",sortable:!1},{title:"Bearbetungszeit endet",key:"not_editable_at",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],ae=pe(()=>v.items.map(l=>{const a={...l};for(const i in a)(a[i]===null||a[i]===void 0)&&(a[i]="-");return a}));ve(j,l=>{l||f()});const le=async({page:l,itemsPerPage:a,sortBy:i,clearFilters:d})=>{if(l!==h.value||l===h.value&&d||[l,a,i]!==[h.value,y.value,T.value]){C.value=!0;let p={data:{page:l,per_page:a}};i&&i.length>0&&(p.data.order_by=i[0].key,p.data.sort=i[0].order),await ge.reload(p),h.value=l,y.value=a,C.value=!1}},oe=l=>{R.value=l.uuid,E.id=l.id,z.value=!0},g=N({id:null}),ne=async l=>{g.id=l.id,g.processing=!0,g.post(route("evaluations.show_popup",{id:g.id}),{onSuccess:a=>{g.clearErrors(),m.value={},P.value=!0,k.value=a.props.data.item,U.value=a.props.data.domains},onError:a=>{m.value=a},onFinish:()=>{g.processing=!1}})},f=()=>{j.value=!1,z.value=!1,P.value=!1,m.value={}},E=N({id:null}),se=async()=>{E.processing=!0;let l={onSuccess:a=>{f()},onError:a=>{f(),m.value=a},onFinish:()=>{E.processing=!1}};E.delete(route("evaluations.destroy",{id:E.id}),l)},D=N({}),re=async l=>{D.processing=!0,D.post(route("evaluations.unfinished",{id:l}),{preserveState:!1,onSuccess:a=>{D.clearErrors(),m.value={},f()},onError:a=>{m.value=a},onFinish:()=>{D.processing=!1}})};return(l,a)=>{const i=u("v-btn-primary"),d=u("v-hover"),p=u("v-col"),F=u("v-row"),Z=u("v-container"),q=u("v-card-text"),H=u("v-spacer"),$=u("v-btn"),K=u("v-card-actions"),L=u("v-card"),M=u("v-dialog"),x=u("v-icon"),I=u("v-tooltip"),ie=u("v-data-table-server"),ue=_e("sortable-data-table");return S(),J(me,null,[t(b(fe),{title:"Einschätzungen"}),t(be,{errors:m.value},{header:e(()=>[ye,l.$page.props.auth.user.is_manager||l.$page.props.auth.user.is_employer?(S(),J("div",ke,[t(b(Q),{href:l.route("evaluations.create")},{default:e(()=>[t(d,null,{default:e(({isHovering:o,props:s})=>[t(i,_(s,{color:o?"accent":"primary"}),{default:e(()=>[c(" Anlegen ")]),_:2},1040,["color"])]),_:1})]),_:1},8,["href"])])):V("",!0),t(M,{modelValue:z.value,"onUpdate:modelValue":a[0]||(a[0]=o=>z.value=o),width:"20vw"},{default:e(()=>[t(L,{height:"30vh"},{default:e(()=>[t(q,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(F,null,{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+w(R.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(H),t(d,null,{default:e(({isHovering:o,props:s})=>[t($,_({onClick:f},s,{color:o?"accent":"primary"}),{default:e(()=>[c("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(d,null,{default:e(({isHovering:o,props:s})=>[t(i,_({onClick:se},s,{color:o?"accent":"primary"}),{default:e(()=>[c("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[n("div",Ee,[he((S(),A(ie,{"items-per-page":y.value,"onUpdate:itemsPerPage":a[1]||(a[1]=o=>y.value=o),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:te,page:h.value,"items-length":O.value,items:ae.value,search:ee.value,loading:C.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":le},{item:e(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,w(`${o.selectable.kita.formatted_name}_${o.selectable.uuid}`),1),n("td",null,w(b(B)(o.selectable.updated_at,"sv-SE")),1),n("td",null,w(b(B)(o.selectable.finished_at,"sv-SE")),1),n("td",null,w(b(B)(o.selectable.not_editable_at,"sv-SE")),1),n("td",ze,[o.selectable.editable&&(l.$page.props.auth.user.is_manager||l.$page.props.auth.user.is_employer)?(S(),A(I,{key:0,location:"top"},{activator:e(({props:s})=>[t(b(Q),{href:l.route("evaluations.edit",{id:o.selectable.id})},{default:e(()=>[t(x,_(s,{size:"small",class:"tw-me-2"}),{default:e(()=>[c("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[Pe]),_:2},1024)):V("",!0),o.selectable.finished?(S(),A(I,{key:1,location:"top"},{activator:e(({props:s})=>[t(x,_(s,{size:"small",class:"tw-me-2",onClick:G=>ne(o.raw)}),{default:e(()=>[c("mdi-eye")]),_:2},1040,["onClick"])]),default:e(()=>[De]),_:2},1024)):V("",!0),t(I,{location:"top"},{activator:e(({props:s})=>[t(x,_(s,{size:"small",class:"tw-me-2",onClick:G=>oe(o.raw)}),{default:e(()=>[c("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[xe]),_:2},1024)])],8,Se)]),"no-data":e(()=>[Ce]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ue]])]),t(M,{modelValue:P.value,"onUpdate:modelValue":a[4]||(a[4]=o=>P.value=o),width:"95vw"},{default:e(()=>[t(L,{height:"95vh"},{default:e(()=>[t(q,null,{default:e(()=>[t(Z,null,{default:e(()=>[t(F,{class:"result-evaluation-domains"},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(d,null,{default:e(({isHovering:o,props:s})=>[n("div",Fe,[n("a",{href:l.route("evaluations.pdf",{id:l.evaluationResultData.item.id}),onClick:f,title:"Fenster schließen"},[t(x,_(s,{size:"small",class:"tw-me-2",onClick:a[2]||(a[2]=()=>{})}),{default:e(()=>[c("mdi-close")]),_:2},1040)],8,$e)])]),_:1})]),_:1})]),_:1}),t(F,{class:"result-evaluation-domains"},{default:e(()=>[t(p,{cols:"8",offset:"2"},{default:e(()=>[n("div",Ie,[Ne,Ve,t(d,null,{default:e(({isHovering:o,props:s})=>[t($,{href:l.route("evaluations.pdf",{id:k.value.id}),class:"tw-px-2 tw-py-3 tw-mb-4 tw-mr-4 tw-normal-case",color:o?"primary":"accent"},{default:e(()=>[c(" Screening als PDF downloaden ")]),_:2},1032,["href","color"])]),_:1}),t(d,null,{default:e(({isHovering:o,props:s})=>[t($,{onClick:a[3]||(a[3]=G=>re(k.value.id)),class:"tw-px-2 tw-py-3 tw-mb-4 tw-normal-case",color:o?"accent":"primary"},{default:e(()=>[c(" Abgabe zurückziehen ")]),_:2},1032,["color"])]),_:1})])]),_:1}),t(p,{cols:"12"},{default:e(()=>[n("p",null,[Ae,c(": "+w(k.value.uuid),1)])]),_:1}),t(p,{cols:"12"},{default:e(()=>[t(we,{ratings:k.value.data,domains:U.value,disabled:!0},null,8,["ratings","domains"])]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(H),t(d,null,{default:e(({isHovering:o,props:s})=>[t(i,_({onClick:f},s,{color:o?"accent":"primary"}),{default:e(()=>[c("Abbrechen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["errors"])],64)}}};export{Ze as default};
