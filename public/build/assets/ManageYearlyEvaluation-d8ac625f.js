import{d as X}from"./index-be7efa91.js";import{K as ee,j as y,T as ae,k as x,l as f,r as d,o as m,f as k,a,u as _,w as r,F as le,Z as re,b as p,t as g,c as I,h as v,i as te,m as E,d as S}from"./app-1403d6dd.js";import{_ as ne}from"./AuthenticatedLayout-47e0f2c6.js";import{W as U}from"./WarningEvaluationTooltip-841be46f.js";import"./ApplicationLogo-f629b5c0.js";const _e={class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},ie={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},oe=p("h3",null,"Rückmeldung betrifft",-1),se=p("h3",null,"Angaben zur Rückmeldung",-1),de=p("h5",null,"Kinder bis 2,5 Jahre",-1),ue=p("h5",null,"Kinder bis 4,5 Jahre",-1),he=p("h4",null,"Wir haben eine Abweichung zwischen der Anzahl der von Ihnen gemeldeten Kinder und der Anzahl über die BeoKiz-Ampel erfassten Kindern festgestellt:",-1),ce={class:"tw-flex tw-items-center tw-mt-2"},me={style:{"list-style-type":"disc","margin-left":"25px"}},ge={key:0},pe={key:1},fe={key:2},ve={key:3},ke={__name:"ManageYearlyEvaluation",props:{yearlyEvaluation:Object,errors:Object,kitas:Array,surveyTimePeriods:Array,from:String},setup(A){const w=A;X.Inertia.on("success",i=>{let l=i.detail.page.props;i.detail.page.component==="YearlyEvaluations/Partials/ManageYearlyEvaluation"&&l&&(u.value=l.yearlyEvaluation)}),ee().props.auth.user;const u=y(w.yearlyEvaluation),o=y(w.errors||{});y(!1);const V=y(!1),q=y(!1),B=y(!1),J=y(!0),e=ae({id:u.value.id,year:u.value.year,kita_id:u.value.kita_id,children_2_born_per_year:u.value.children_2_born_per_year,children_2_with_german_lang:u.value.children_2_with_german_lang,evaluations_with_daz_2_total_per_year:u.value.evaluations_with_daz_2_total_per_year,children_2_with_foreign_lang:u.value.children_2_with_foreign_lang,evaluations_without_daz_2_total_per_year:u.value.evaluations_without_daz_2_total_per_year,children_4_born_per_year:u.value.children_4_born_per_year,children_4_with_german_lang:u.value.children_4_with_german_lang,evaluations_with_daz_4_total_per_year:u.value.evaluations_with_daz_4_total_per_year,children_4_with_foreign_lang:u.value.children_4_with_foreign_lang,evaluations_without_daz_4_total_per_year:u.value.evaluations_without_daz_4_total_per_year});x(()=>w.yearlyEvaluation.map(i=>{const l={...i};for(const t in l)(l[t]===null||l[t]===void 0)&&(l[t]="-");return l}));const N=x(()=>{if(w.from){const i=w.from.split(";");if(i.length===3){const l=i[0],t={};return t[i[1]]=i[2],route(l,t)}}return route("yearly_evaluations.index")}),P=x(()=>C("2.5")),H=x(()=>C("4.5"));f(V,i=>{q.value=!0}),f(()=>e.kita_id,i=>{let l=w.kitas.find(t=>i===parseInt(t.id));l&&(e.evaluations_with_daz_2_total_per_year=l.evaluations_with_daz2_total_per_year_count,e.evaluations_with_daz_4_total_per_year=l.evaluations_with_daz4_total_per_year_count,e.evaluations_without_daz_2_total_per_year=l.evaluations_without_daz2_total_per_year_count,e.evaluations_without_daz_4_total_per_year=l.evaluations_without_daz4_total_per_year_count)}),f(()=>e.children_2_born_per_year,()=>{b("2.5")}),f(()=>e.children_2_with_german_lang,()=>{b("2.5")}),f(()=>e.children_2_with_foreign_lang,(i,l)=>{b("2.5")}),f(()=>e.children_4_born_per_year,(i,l)=>{b("4.5")}),f(()=>e.children_4_with_german_lang,(i,l)=>{b("4.5")}),f(()=>e.children_4_with_foreign_lang,(i,l)=>{b("4.5")});const T=()=>{V.value=!1},Y=async()=>{(h("2_german")||h("2_foreign")||h("4_german")||h("4_foreign"))&&!q.value?V.value=!0:await Z()},h=i=>{if(i==="2_german")return parseInt(e.evaluations_with_daz_2_total_per_year)!==parseInt(e.children_2_with_german_lang);if(i==="2_foreign")return parseInt(e.evaluations_without_daz_2_total_per_year)!==parseInt(e.children_2_with_foreign_lang);if(i==="4_german")return parseInt(e.evaluations_with_daz_4_total_per_year)!==parseInt(e.children_4_with_german_lang);if(i==="4_foreign")return parseInt(e.evaluations_without_daz_4_total_per_year)!==parseInt(e.children_4_with_foreign_lang)},Z=async()=>{e.processing=!0;let i={preserveState:!0,onSuccess:l=>{e.reset(),e.clearErrors(),o.value={}},onError:l=>{o.value=l},onFinish:()=>{T(),e.processing=!1}};e.put(route("yearly_evaluations.update",{id:e.id}),i)},C=i=>{if(i==="2.5"||i==="4.5"){const l=parseInt(e.year);let t,s;return i==="4.5"?(t=l-6,s=l-5):(t=l-4,s=l-3),`Gesamtzahl der im Zeitraum vom 01.10.${t} bis 30.09.${s} geborenen Kinder`}return"Gesamtzahl der Kinder"},b=i=>{if(i==="2.5"||i==="4.5"){let l=!1,t=!1;e.children_2_with_german_lang!==null&&e.children_2_with_german_lang!==void 0&&e.children_2_with_foreign_lang!==null&&e.children_2_with_foreign_lang!==void 0&&(parseInt(e.children_2_with_german_lang)+parseInt(e.children_2_with_foreign_lang)!==parseInt(e.children_2_born_per_year)?(o.value.children_2_born_per_year='Die ausgewählte "Anzahl der im ausgewählten Jahr geborenen Kinder" ist ungültig.',l=!1):(delete o.value.children_2_born_per_year,l=!0)),e.children_4_with_german_lang!==null&&e.children_4_with_german_lang!==void 0&&e.children_4_with_foreign_lang!==null&&e.children_4_with_foreign_lang!==void 0&&(parseInt(e.children_4_with_german_lang)+parseInt(e.children_4_with_foreign_lang)!==parseInt(e.children_4_born_per_year)?(o.value.children_4_born_per_year='Die ausgewählte "Anzahl der im ausgewählten Jahr geborenen Kinder" ist ungültig.',t=!1):(delete o.value.children_4_born_per_year,t=!0)),J.value=l&&t}};return(i,l)=>{const t=d("v-col"),s=d("v-text-field"),$=d("v-select"),c=d("v-row"),D=d("v-card"),F=d("v-btn"),K=d("v-hover"),R=d("v-btn-primary"),M=d("v-container"),j=d("v-icon"),L=d("v-checkbox"),O=d("v-card-text"),W=d("v-spacer"),G=d("v-card-actions"),Q=d("v-dialog");return m(),k(le,null,[a(_(re),{title:`Verwalte Jährliche Rückmeldung ${A.yearlyEvaluation.year}`},null,8,["title"]),a(ne,{errors:o.value},{header:r(()=>[p("h2",_e,"Jährliche Rückmeldung "+g(A.yearlyEvaluation.year),1)]),default:r(()=>[p("div",ie,[a(M,null,{default:r(()=>[a(c,null,{default:r(()=>[a(t,{cols:"12",sm:"12"},{default:r(()=>[oe]),_:1}),a(t,{cols:"12",sm:"4"},{default:r(()=>[a(s,{modelValue:_(e).year,"onUpdate:modelValue":l[0]||(l[0]=n=>_(e).year=n),"error-messages":o.value.year,disabled:"",label:"Jahr der Rückmeldung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",sm:"4"},{default:r(()=>[a($,{modelValue:_(e).kita_id,"onUpdate:modelValue":l[1]||(l[1]=n=>_(e).kita_id=n),items:A.kitas,"error-messages":o.value.kita_id,"item-title":"name","item-value":"id",label:"KiTa*"},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1}),a(c,null,{default:r(()=>[a(t,{cols:"12",sm:"12"},{default:r(()=>[se]),_:1}),a(t,{cols:"12",sm:"6"},{default:r(()=>[a(D,{class:"tw-p-6"},{default:r(()=>[de,a(s,{modelValue:_(e).children_2_born_per_year,"onUpdate:modelValue":l[2]||(l[2]=n=>_(e).children_2_born_per_year=n),"error-messages":o.value.children_2_born_per_year,label:P.value,type:"number",required:""},null,8,["modelValue","error-messages","label"]),a(c,null,{default:r(()=>[a(t,{cols:"12",sm:"7"},{default:r(()=>[a(s,{modelValue:_(e).children_2_with_german_lang,"onUpdate:modelValue":l[3]||(l[3]=n=>_(e).children_2_with_german_lang=n),"error-messages":o.value.children_2_with_german_lang,label:"Kinder mit deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",sm:"5"},{default:r(()=>[a(c,null,{default:r(()=>[h("2_german")?(m(),I(U,{key:0})):v("",!0),a(t,{cols:"12",sm:"10"},{default:r(()=>[a(s,{modelValue:_(e).evaluations_with_daz_2_total_per_year,"onUpdate:modelValue":l[4]||(l[4]=n=>_(e).evaluations_with_daz_2_total_per_year=n),"error-messages":o.value.evaluations_with_daz_2_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),a(c,null,{default:r(()=>[a(t,{cols:"12",sm:"7"},{default:r(()=>[a(s,{modelValue:_(e).children_2_with_foreign_lang,"onUpdate:modelValue":l[5]||(l[5]=n=>_(e).children_2_with_foreign_lang=n),"error-messages":o.value.children_2_with_foreign_lang,label:"Kinder mit nicht deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",sm:"5"},{default:r(()=>[a(c,null,{default:r(()=>[h("2_foreign")?(m(),I(U,{key:0})):v("",!0),a(t,{cols:"12",sm:"10"},{default:r(()=>[a(s,{modelValue:_(e).evaluations_without_daz_2_total_per_year,"onUpdate:modelValue":l[6]||(l[6]=n=>_(e).evaluations_without_daz_2_total_per_year=n),"error-messages":o.value.evaluations_without_daz_2_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t,{cols:"12",sm:"6"},{default:r(()=>[a(D,{class:"tw-p-6"},{default:r(()=>[ue,a(s,{modelValue:_(e).children_4_born_per_year,"onUpdate:modelValue":l[7]||(l[7]=n=>_(e).children_4_born_per_year=n),"error-messages":o.value.children_4_born_per_year,label:H.value,type:"number",required:""},null,8,["modelValue","error-messages","label"]),a(c,null,{default:r(()=>[a(t,{cols:"12",sm:"7"},{default:r(()=>[a(s,{modelValue:_(e).children_4_with_german_lang,"onUpdate:modelValue":l[8]||(l[8]=n=>_(e).children_4_with_german_lang=n),"error-messages":o.value.children_4_with_german_lang,label:"Kinder mit deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",sm:"5"},{default:r(()=>[a(c,null,{default:r(()=>[h("4_german")?(m(),I(U,{key:0})):v("",!0),a(t,{cols:"12",sm:"10"},{default:r(()=>[a(s,{modelValue:_(e).evaluations_with_daz_4_total_per_year,"onUpdate:modelValue":l[9]||(l[9]=n=>_(e).evaluations_with_daz_4_total_per_year=n),"error-messages":o.value.evaluations_with_daz_4_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),a(c,null,{default:r(()=>[a(t,{cols:"12",sm:"7"},{default:r(()=>[a(s,{modelValue:_(e).children_4_with_foreign_lang,"onUpdate:modelValue":l[10]||(l[10]=n=>_(e).children_4_with_foreign_lang=n),"error-messages":o.value.children_4_with_foreign_lang,label:"Kinder mit nicht deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",sm:"5"},{default:r(()=>[a(c,null,{default:r(()=>[h("4_foreign")?(m(),I(U,{key:0})):v("",!0),a(t,{cols:"12",sm:"10"},{default:r(()=>[a(s,{modelValue:_(e).evaluations_without_daz_4_total_per_year,"onUpdate:modelValue":l[11]||(l[11]=n=>_(e).evaluations_without_daz_4_total_per_year=n),"error-messages":o.value.evaluations_without_daz_4_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(c,null,{default:r(()=>[a(t,{cols:"12",sm:"12",align:"right"},{default:r(()=>[a(K,null,{default:r(({isHovering:n,props:z})=>[a(_(te),{href:N.value},{default:r(()=>[a(F,E({class:"mr-2",variant:"text"},z,{color:n?"accent":"primary"}),{default:r(()=>[S("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),a(K,null,{default:r(({isHovering:n,props:z})=>[a(R,E({onClick:Y},z,{color:n?"accent":"primary",disabled:!J.value}),{default:r(()=>[S(" Speichern ")]),_:2},1040,["color","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),a(Q,{modelValue:V.value,"onUpdate:modelValue":l[13]||(l[13]=n=>V.value=n),width:"80vw"},{default:r(()=>[a(D,{height:"50vh"},{default:r(()=>[a(O,null,{default:r(()=>[a(M,null,{default:r(()=>[a(c,null,{default:r(()=>[a(t,{cols:"12"},{default:r(()=>[he,p("div",ce,[a(j,E(w,{icon:"mdi-alert",color:"orange"}),null,16),p("ul",me,[h("2_german")?(m(),k("li",ge," Die Anzahl der Kinder im Alter bis 2,5 Jahre welche Deutsch als Fremdsprache haben Sie mit "+g(_(e).children_2_with_german_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(_(e).evaluations_with_daz_2_total_per_year),1)):v("",!0),h("2_foreign")?(m(),k("li",pe," Die Anzahl der Kinder im Alter bis 2,5 Jahre welche Deutsch als Muttersprache haben Sie mit "+g(_(e).children_2_with_foreign_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(_(e).evaluations_without_daz_2_total_per_year),1)):v("",!0),h("4_german")?(m(),k("li",fe," Die Anzahl der Kinder im Alter bis 4,5 Jahre welche Deutsch als Fremdsprache haben Sie mit "+g(_(e).children_4_with_german_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(_(e).evaluations_with_daz_2_total_per_year),1)):v("",!0),h("4_foreign")?(m(),k("li",ve," Die Anzahl der Kinder im Alter bis 4,5 Jahre welche Deutsch als Muttersprache haben Sie mit "+g(_(e).children_4_with_foreign_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(_(e).evaluations_without_daz_4_total_per_year),1)):v("",!0)])]),a(L,{modelValue:B.value,"onUpdate:modelValue":l[12]||(l[12]=n=>B.value=n),label:"Ich habe verstanden, dass es Unstimmigkeiten bei dem Abgelich der gemelden Zahlen gibt, Statusmeldung dennoch absenden."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(G,null,{default:r(()=>[a(W),a(K,null,{default:r(({isHovering:n,props:z})=>[a(F,{onClick:T,color:n?"accent":"primary"},{default:r(()=>[S("Abbrechen")]),_:2},1032,["color"])]),_:1}),a(K,null,{default:r(({isHovering:n,props:z})=>[a(R,E({disabled:!B.value,onClick:Y},z,{color:n?"accent":"primary"}),{default:r(()=>[S("Speichern")]),_:2},1040,["disabled","color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["errors"])],64)}}};export{ke as default};
