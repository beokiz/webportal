import{d as ce}from"./index-bcde31f9.js";import{K as me,k as m,h as J,m as pe,T as G,r as _,n as ge,f as N,a as e,u as n,w as l,F as L,o as q,Z as ve,b as i,p as f,d as h,t as E,q as he,c as fe,i as ye,O as be}from"./app-6fb0ee1c.js";import{_ as we}from"./AuthenticatedLayout-a0a227f6.js";import{a as Ve,c as M}from"./common-1f9d3448.js";import"./ApplicationLogo-d0ee7773.js";const ke=i("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Jährliche Rückmeldung",-1),ze={class:"tw-flex tw-items-center tw-justify-end"},Se=i("span",{class:"tw-text-h5"},"Jährliche Rückmeldung erstellen",-1),Ee=i("h3",null,"Rückmeldung betrifft",-1),Pe=i("h3",null,"Angaben zur Rückmeldung",-1),xe=i("h5",null,"Kinder bis 2,5 Jahre",-1),Ue=i("h5",null,"Kinder bis 4,5 Jahre",-1),Ke={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},De=["data-id","data-order"],qe={align:"center"},Be=i("span",null,"Einstellungen bearbeiten",-1),Fe=i("span",null,"Einstellungen löschen",-1),Je={class:"tw-py-6"},Ne={key:0,class:"tw-mb-4"},Ce=i("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),je={__name:"YearlyEvaluations",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(Q){const g=Q;ce.Inertia.on("success",o=>{let t=o.detail.page.props;o.detail.page.component==="YearlyEvaluations/YearlyEvaluations"&&t&&(P.value=t.currentPage,V.value=t.perPage,W.value=t.orderBy,X.value=t.sort,C.value=t.total,ee.value=t.lastPage,k.value=t.filters.search??null)}),me().props.auth.user;const P=m(g.currentPage),V=m(g.perPage),W=m(g.orderBy),X=m(g.sort),C=m(g.total),ee=m(g.lastPage),k=m(g.filters.search??null),le=m(""),d=m(g.errors||{}),B=m(!1),x=m(!1),U=m(!1),T=m(null),te=[{title:"Jahr",key:"year",width:"7%",sortable:!1},{title:"Kita",key:"age",width:"11%",sortable:!1},{title:"gemeldete Kinder  bis 2,5 Jahre",key:"www",width:"18%",sortable:!1},{title:"gemeldete Kinder  bis 4,5 Jahre",key:"yyyy",width:"18%",sortable:!1},{title:"Evaluationen für Kinder  bis 2,5 Jahre",key:"wewew",width:"18%",sortable:!1},{title:"Evaluationen für Kinder  bis 4,5 Jahre",key:"asddas",width:"18%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],ae=J(()=>g.items.map(o=>{const t={...o};for(const p in t)(t[p]===null||t[p]===void 0)&&(t[p]="-");return t})),R=J(()=>k.value===null),re=J(()=>k.value!==null);pe(x,o=>{o||b()});const A=async({page:o,itemsPerPage:t,sortBy:p,clearFilters:u})=>{if(u&&(k.value=null),o===P.value&&u||R||re){B.value=!0;let c={data:{page:o,per_page:t}};p&&p.length>0&&(c.data.order_by=p[0].key,c.data.sort=p[0].order),c.data.search=k.value,await be.reload(c),P.value=o,V.value=t,B.value=!1}},ne=o=>{T.value=o.year,z.id=o.id,U.value=!0},z=G({id:null}),oe=async()=>{z.processing=!0;let o={onSuccess:t=>{b()},onError:t=>{b(),d.value=t},onFinish:()=>{z.processing=!1}};z.delete(route("yearly_evaluations.destroy",{id:z.id}),o)},b=()=>{x.value=!1,U.value=!1,r.reset(),r.clearErrors(),d.value={}},se=()=>{r.reset(),r.clearErrors()},r=G({year:new Date().getFullYear().toString().padStart(4,"0"),kita:null,evaluations_without_daz_2_total_per_year:null,evaluations_without_daz_4_total_per_year:null,evaluations_with_daz_2_total_per_year:null,evaluations_with_daz_4_total_per_year:null,children_2_born_per_year:null,children_4_born_per_year:null,children_2_with_german_lang:null,children_4_with_german_lang:null,children_2_with_foreign_lang:null,children_4_with_foreign_lang:null}),ie=async()=>{r.processing=!0,r.post(route("yearly_evaluations.store"),{onSuccess:o=>{b()},onError:o=>{d.value=o},onFinish:()=>{r.processing=!1}})};return(o,t)=>{const p=_("v-card-title"),u=_("v-col"),c=_("v-text-field"),ue=_("v-select"),y=_("v-row"),K=_("v-card"),O=_("v-container"),I=_("v-card-text"),F=_("v-btn-primary"),w=_("v-hover"),j=_("v-spacer"),D=_("v-btn"),H=_("v-card-actions"),Y=_("v-dialog"),Z=_("v-icon"),$=_("v-tooltip"),_e=_("v-data-table-server"),de=ge("sortable-data-table");return q(),N(L,null,[e(n(ve),{title:"Jährliche Rückmeldung"}),e(we,{errors:d.value},{header:l(()=>[ke,i("div",ze,[e(w,null,{default:l(({isHovering:s,props:v})=>[e(D,f(v,{color:s?"accent":"primary",dark:""}),{default:l(()=>[h(" ANLEGEN "),e(Y,{modelValue:x.value,"onUpdate:modelValue":t[12]||(t[12]=a=>x.value=a),activator:"parent",width:"80vw"},{default:l(()=>[e(K,{height:"80vh"},{default:l(()=>[e(p,null,{default:l(()=>[Se]),_:1}),e(I,null,{default:l(()=>[e(O,null,{default:l(()=>[e(y,null,{default:l(()=>[e(u,{cols:"12",sm:"12"},{default:l(()=>[Ee]),_:1}),e(u,{cols:"12",sm:"4"},{default:l(()=>[e(c,{modelValue:n(r).year,"onUpdate:modelValue":t[0]||(t[0]=a=>n(r).year=a),"error-messages":d.value.year,label:"Jahr der Rückmeldung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:l(()=>[e(ue,{modelValue:n(r).kita,"onUpdate:modelValue":t[1]||(t[1]=a=>n(r).kita=a),items:n(Ve),"error-messages":d.value.kita,"item-title":"age_name","item-value":"age_number",label:"Kita*"},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(u,{cols:"12",sm:"12"},{default:l(()=>[Pe]),_:1}),e(u,{cols:"12",sm:"6"},{default:l(()=>[e(K,{class:"tw-p-6"},{default:l(()=>[xe,e(c,{modelValue:n(r).children_2_born_per_year,"onUpdate:modelValue":t[2]||(t[2]=a=>n(r).children_2_born_per_year=a),"error-messages":d.value.children_2_born_per_year,label:"Gesamtzahl der im Zeitraum [Survey DateStart-2,5 years] - [Survey DateEnd-2,5 years] geborenen Kinder",type:"number",required:""},null,8,["modelValue","error-messages"]),e(y,null,{default:l(()=>[e(u,{cols:"12",sm:"8"},{default:l(()=>[e(c,{modelValue:n(r).children_2_with_german_lang,"onUpdate:modelValue":t[3]||(t[3]=a=>n(r).children_2_with_german_lang=a),"error-messages":d.value.children_2_with_german_lang,label:"Kinder mit deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:l(()=>[e(c,{modelValue:n(r).evaluations_with_daz_2_total_per_year,"onUpdate:modelValue":t[4]||(t[4]=a=>n(r).evaluations_with_daz_2_total_per_year=a),"error-messages":d.value.evaluations_with_daz_2_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(u,{cols:"12",sm:"8"},{default:l(()=>[e(c,{modelValue:n(r).children_2_with_foreign_lang,"onUpdate:modelValue":t[5]||(t[5]=a=>n(r).children_2_with_foreign_lang=a),"error-messages":d.value.children_2_with_foreign_lang,label:"Kinder mit nicht deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:l(()=>[e(c,{modelValue:n(r).evaluations_without_daz_2_total_per_year,"onUpdate:modelValue":t[6]||(t[6]=a=>n(r).evaluations_without_daz_2_total_per_year=a),"error-messages":d.value.evaluations_without_daz_2_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",sm:"6"},{default:l(()=>[e(K,{class:"tw-p-6"},{default:l(()=>[Ue,e(c,{modelValue:n(r).children_4_born_per_year,"onUpdate:modelValue":t[7]||(t[7]=a=>n(r).children_4_born_per_year=a),"error-messages":d.value.children_4_born_per_year,label:"Gesamtzahl der im Zeitraum [Survey DateStart -4,5 years] - [Survey DateEnd-4,5 years] geborenen Kinder",type:"number",required:""},null,8,["modelValue","error-messages"]),e(y,null,{default:l(()=>[e(u,{cols:"12",sm:"8"},{default:l(()=>[e(c,{modelValue:n(r).children_4_with_german_lang,"onUpdate:modelValue":t[8]||(t[8]=a=>n(r).children_4_with_german_lang=a),"error-messages":d.value.children_4_with_german_lang,label:"Kinder mit deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:l(()=>[e(c,{modelValue:n(r).evaluations_with_daz_4_total_per_year,"onUpdate:modelValue":t[9]||(t[9]=a=>n(r).evaluations_with_daz_4_total_per_year=a),"error-messages":d.value.evaluations_with_daz_4_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(u,{cols:"12",sm:"8"},{default:l(()=>[e(c,{modelValue:n(r).children_4_with_foreign_lang,"onUpdate:modelValue":t[10]||(t[10]=a=>n(r).children_4_with_foreign_lang=a),"error-messages":d.value.children_4_with_foreign_lang,label:"Kinder mit nicht deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:l(()=>[e(c,{modelValue:n(r).evaluations_without_daz_4_total_per_year,"onUpdate:modelValue":t[11]||(t[11]=a=>n(r).evaluations_without_daz_4_total_per_year=a),"error-messages":d.value.evaluations_without_daz_4_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(H,null,{default:l(()=>[e(w,null,{default:l(({isHovering:a,props:S})=>[e(F,f({onClick:se},S,{color:a?"accent":"primary"}),{default:l(()=>[h("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(j),e(w,null,{default:l(({isHovering:a,props:S})=>[e(D,f({onClick:b},S,{color:a?"accent":"primary"}),{default:l(()=>[h("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(w,null,{default:l(({isHovering:a,props:S})=>[e(F,f({onClick:ie},S,{color:a?"accent":"primary"}),{default:l(()=>[h("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})]),e(Y,{modelValue:U.value,"onUpdate:modelValue":t[13]||(t[13]=s=>U.value=s),width:"20vw"},{default:l(()=>[e(K,{height:"30vh"},{default:l(()=>[e(I,null,{default:l(()=>[e(O,null,{default:l(()=>[e(y,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[i("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+E(T.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(H,null,{default:l(()=>[e(j),e(w,null,{default:l(({isHovering:s,props:v})=>[e(D,f({onClick:b},v,{color:s?"accent":"primary"}),{default:l(()=>[h("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(w,null,{default:l(({isHovering:s,props:v})=>[e(F,f({onClick:oe},v,{color:s?"accent":"primary"}),{default:l(()=>[h("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:l(()=>[i("div",Ke,[he((q(),fe(_e,{"items-per-page":V.value,"onUpdate:itemsPerPage":t[15]||(t[15]=s=>V.value=s),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:te,page:P.value,"items-length":C.value,items:ae.value,search:le.value,loading:B.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":A},{item:l(({item:s})=>[i("tr",{"data-id":s.selectable.id,"data-order":s.selectable.order},[i("td",null,E(s.selectable.year),1),i("td",null,E(s.selectable.age),1),i("td",null,E(n(M)(s.selectable.survey_start_date,"sv-SE")),1),i("td",null,E(n(M)(s.selectable.survey_end_date,"sv-SE")),1),i("td",qe,[e($,{location:"top"},{activator:l(({props:v})=>[e(n(ye),{href:o.route("yearly_evaluations.show",{id:s.selectable.id})},{default:l(()=>[e(Z,f(v,{size:"small",class:"tw-me-2"}),{default:l(()=>[h("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[Be]),_:2},1024),e($,{location:"top"},{activator:l(({props:v})=>[e(Z,f(v,{size:"small",class:"tw-me-2",onClick:a=>ne(s.raw)}),{default:l(()=>[h("mdi-delete")]),_:2},1040,["onClick"])]),default:l(()=>[Fe]),_:2},1024)])],8,De)]),"no-data":l(()=>[i("div",Je,[R.value?(q(),N("h3",Ne,"Die Tabelle ist leer.")):(q(),N(L,{key:1},[Ce,e(D,{color:"primary",onClick:t[14]||(t[14]=s=>A({page:1,itemsPerPage:V.value,clearFilters:!0}))},{default:l(()=>[h("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[de]])])]),_:1},8,["errors"])],64)}}};export{je as default};
