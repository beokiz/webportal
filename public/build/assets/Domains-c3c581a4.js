import{d as ge}from"./index-b347fe8a.js";import{K as fe,k as p,h as F,l as we,m as be,T as j,r as i,n as ye,o as b,f as R,a as e,u as r,w as l,F as ee,Z as ze,b as _,p as g,d as v,c as B,g as A,t as G,q as Ve,i as Se,O as ke}from"./app-437f577a.js";import{_ as De}from"./AuthenticatedLayout-5b79c5b0.js";import{S as xe}from"./sortable.esm-0d19b1d3.js";import"./ApplicationLogo-40c330b2.js";const Pe=_("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Verwalte Domäne",-1),Ue={class:"tw-flex tw-items-center tw-justify-end"},Be=_("span",{class:"tw-text-h5"},"Verwalte Domäne",-1),Ne=_("p",null,"Schwellenwerte für Altersgruppe bis 2,5 Jahre",-1),qe=_("p",null,"Schwellenwerte für Altersgruppe bis 4,5 Jahre",-1),Ce={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Fe={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},Ae={class:"tw-w-full"},Ee={class:"tw-ml-6"},Ie=["data-id","data-order"],Oe=_("span",null,"neu anordnen",-1),Te=_("span",null,"Domäne anzeigen",-1),$e=_("span",null,"Benutzer löschen",-1),je={class:"tw-py-6"},Re={key:0,class:"tw-mb-4"},Ge=_("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),He={__name:"Domains",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object,roles:Array},setup(le){const f=le;ge.Inertia.on("success",s=>{let t=s.detail.page.props;s.detail.page.component==="Domains/Domains"&&t&&(V.value=t.currentPage,k.value=t.perPage,te.value=t.orderBy,ae.value=t.sort,K.value=t.total,oe.value=t.lastPage,y.value=t.filters.search??null)}),fe().props.auth.user;const V=p(f.currentPage),k=p(f.perPage),te=p(f.orderBy),ae=p(f.sort),K=p(f.total),oe=p(f.lastPage),y=p(f.filters.search??null),J=p(""),m=p(f.errors||{}),re=p(null),E=p(!1),N=p(!1),q=p(!1),Z=p(null),se=[{title:"Kürzel",key:"is_online",width:"15%",sortable:!1},{title:"Name",key:"first_name",width:"75%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],ne=F(()=>f.items.map(s=>{const t={...s};for(const c in t)(t[c]===null||t[c]===void 0)&&(t[c]="-");return t})),w=F(()=>a.daz_dependent?3:6),L=F(()=>y.value===null),de=F(()=>y.value!==null);we(()=>{const s={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(t){ce(t)}};xe.create(document.querySelector(".v-data-table tbody"),s)}),be(N,s=>{s||x()});const M=async({page:s,itemsPerPage:t,sortBy:c,clearFilters:u})=>{if(u&&(y.value=null),s===V.value&&u||L||de){E.value=!0;let n={data:{page:s,per_page:t}};c&&c.length>0&&(n.data.order_by=c[0].key,n.data.sort=c[0].order),n.data.search=y.value,await ke.reload(n),V.value=s,k.value=t,E.value=!1}},ue=s=>{Z.value=s.name,D.id=s.id,q.value=!0},D=j({id:null}),_e=async()=>{D.processing=!0;let s={onSuccess:t=>{x()},onError:t=>{m.value=t},onFinish:()=>{D.processing=!1}};D.delete(route("domains.destroy",{id:D.id}),s)},x=()=>{N.value=!1,q.value=!1,a.reset(),a.clearErrors(),a.daz_dependent=!1,m.value={}},ie=()=>{a.reset(),a.clearErrors(),a.daz_dependent=!1},a=j({name:null,abbreviation:null,age_2_red_threshold:null,age_2_red_threshold_daz:null,age_2_yellow_threshold:null,age_2_yellow_threshold_daz:null,age_4_red_threshold:null,age_4_red_threshold_daz:null,age_4_yellow_threshold:null,age_4_yellow_threshold_daz:null,daz_dependent:!1}),me=async()=>{a.processing=!0,a.daz_dependent||(a.age_2_red_threshold_daz=a.age_2_red_threshold,a.age_2_yellow_threshold_daz=a.age_2_yellow_threshold,a.age_4_red_threshold_daz=a.age_4_red_threshold,a.age_4_yellow_threshold_daz=a.age_4_yellow_threshold),a.post(route("domains.store"),{onSuccess:s=>{x()},onError:s=>{m.value=s},onFinish:()=>{a.processing=!1}})},C=j({items:[]}),ce=s=>{C.processing=!0;let t=[],c=0;V.value>1&&(c=10*V.value-10),[].forEach.call(s.from.querySelectorAll("tr"),function(u,n){u.setAttribute("data-order",c+n),t.push({id:u.getAttribute("data-id"),order:c+n})}),C.items=t,C.post(route("domains.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:u=>{},onError:u=>{m.value=u},onFinish:()=>{C.processing=!1}})};return(s,t)=>{const c=i("v-card-title"),u=i("v-text-field"),n=i("v-col"),S=i("v-row"),pe=i("v-switch"),I=i("v-spacer"),H=i("v-container"),Q=i("v-card-text"),O=i("v-btn-primary"),z=i("v-hover"),P=i("v-btn"),W=i("v-card-actions"),X=i("v-card"),Y=i("v-dialog"),T=i("v-icon"),$=i("v-tooltip"),he=i("v-data-table-server"),ve=ye("sortable-data-table");return b(),R(ee,null,[e(r(ze),{title:"Domains"}),e(De,{errors:m.value},{header:l(()=>[Pe,_("div",Ue,[e(z,null,{default:l(({isHovering:d,props:h})=>[e(P,g(h,{color:d?"accent":"primary",dark:""}),{default:l(()=>[v(" Anlegen "),e(Y,{modelValue:N.value,"onUpdate:modelValue":t[11]||(t[11]=o=>N.value=o),activator:"parent",width:"80vw"},{default:l(()=>[e(X,{height:"80vh"},{default:l(()=>[e(c,null,{default:l(()=>[Be]),_:1}),e(Q,null,{default:l(()=>[e(H,null,{default:l(()=>[e(S,null,{default:l(()=>[e(n,{cols:"12",sm:"3"},{default:l(()=>[e(u,{modelValue:r(a).abbreviation,"onUpdate:modelValue":t[0]||(t[0]=o=>r(a).abbreviation=o),"error-messages":m.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"9"},{default:l(()=>[e(u,{modelValue:r(a).name,"onUpdate:modelValue":t[1]||(t[1]=o=>r(a).name=o),"error-messages":m.value.name,label:"Name der Domäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(S,{class:"mt-10"},{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(pe,{modelValue:r(a).daz_dependent,"onUpdate:modelValue":t[2]||(t[2]=o=>r(a).daz_dependent=o),"hide-details":"",label:"Einstellen mit Daz"},null,8,["modelValue"])]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[Ne]),_:1}),e(n,{cols:"12",sm:w.value},{default:l(()=>[e(u,{modelValue:r(a).age_2_red_threshold,"onUpdate:modelValue":t[3]||(t[3]=o=>r(a).age_2_red_threshold=o),"error-messages":m.value.age_2_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(b(),B(n,{key:0,cols:"12",sm:w.value},{default:l(()=>[e(u,{modelValue:r(a).age_2_red_threshold_daz,"onUpdate:modelValue":t[4]||(t[4]=o=>r(a).age_2_red_threshold_daz=o),"error-messages":m.value.age_2_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):A("",!0),e(n,{cols:"12",sm:w.value},{default:l(()=>[e(u,{modelValue:r(a).age_2_yellow_threshold,"onUpdate:modelValue":t[5]||(t[5]=o=>r(a).age_2_yellow_threshold=o),"error-messages":m.value.age_2_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(b(),B(n,{key:1,cols:"12",sm:w.value},{default:l(()=>[e(u,{modelValue:r(a).age_2_yellow_threshold_daz,"onUpdate:modelValue":t[6]||(t[6]=o=>r(a).age_2_yellow_threshold_daz=o),"error-messages":m.value.age_2_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):A("",!0)]),_:1}),e(S,null,{default:l(()=>[e(I),e(n,{cols:"12"},{default:l(()=>[qe]),_:1}),e(n,{cols:"12",sm:w.value},{default:l(()=>[e(u,{modelValue:r(a).age_4_red_threshold,"onUpdate:modelValue":t[7]||(t[7]=o=>r(a).age_4_red_threshold=o),"error-messages":m.value.age_4_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(b(),B(n,{key:0,cols:"12",sm:w.value},{default:l(()=>[e(u,{modelValue:r(a).age_4_red_threshold_daz,"onUpdate:modelValue":t[8]||(t[8]=o=>r(a).age_4_red_threshold_daz=o),"error-messages":m.value.age_4_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):A("",!0),e(n,{cols:"12",sm:w.value},{default:l(()=>[e(u,{modelValue:r(a).age_4_yellow_threshold,"onUpdate:modelValue":t[9]||(t[9]=o=>r(a).age_4_yellow_threshold=o),"error-messages":m.value.age_4_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(b(),B(n,{key:1,cols:"12",sm:w.value},{default:l(()=>[e(u,{modelValue:r(a).age_4_yellow_threshold_daz,"onUpdate:modelValue":t[10]||(t[10]=o=>r(a).age_4_yellow_threshold_daz=o),"error-messages":m.value.age_4_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):A("",!0)]),_:1})]),_:1})]),_:1}),e(W,null,{default:l(()=>[e(z,null,{default:l(({isHovering:o,props:U})=>[e(O,g({onClick:ie},U,{color:o?"accent":"primary"}),{default:l(()=>[v("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(I),e(z,null,{default:l(({isHovering:o,props:U})=>[e(P,g({onClick:x},U,{color:o?"accent":"primary"}),{default:l(()=>[v("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(z,null,{default:l(({isHovering:o,props:U})=>[e(O,g({onClick:me},U,{color:o?"accent":"primary"}),{default:l(()=>[v("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})]),e(Y,{modelValue:q.value,"onUpdate:modelValue":t[12]||(t[12]=d=>q.value=d),width:"20vw"},{default:l(()=>[e(X,{height:"30vh"},{default:l(()=>[e(Q,null,{default:l(()=>[e(H,null,{default:l(()=>[e(S,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[_("p",null,"Sind Sie sicher, dass Sie die Domäne "+G(Z.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(W,null,{default:l(()=>[e(I),e(z,null,{default:l(({isHovering:d,props:h})=>[e(P,g({onClick:x},h,{color:d?"accent":"primary"}),{default:l(()=>[v("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(z,null,{default:l(({isHovering:d,props:h})=>[e(O,g({onClick:_e},h,{color:d?"accent":"primary"}),{default:l(()=>[v("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:l(()=>[_("div",Ce,[_("div",Fe,[_("div",Ae,[e(S,null,{default:l(()=>[e(n,{cols:"12",sm:"5"},{default:l(()=>[e(u,{modelValue:y.value,"onUpdate:modelValue":t[13]||(t[13]=d=>y.value=d),label:"Kürzel/Name"},null,8,["modelValue"])]),_:1})]),_:1})]),_("div",Ee,[e(z,null,{default:l(({isHovering:d,props:h})=>[e(P,g({class:"tw-mt-2"},h,{color:d?"accent":"primary",onClick:t[14]||(t[14]=o=>J.value=String(Date.now())),dark:""}),{default:l(()=>[v("Suche")]),_:2},1040,["color"])]),_:1})])]),Ve((b(),B(he,{"items-per-page":k.value,"onUpdate:itemsPerPage":t[16]||(t[16]=d=>k.value=d),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:se,page:V.value,"items-length":K.value,items:ne.value,search:J.value,loading:E.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":M},{item:l(({item:d})=>[_("tr",{"data-id":d.selectable.id,"data-order":d.selectable.order},[_("td",null,G(d.selectable.abbreviation),1),_("td",null,G(d.selectable.name),1),_("td",null,[e($,{location:"top"},{activator:l(({props:h})=>[e(T,g({draggable:"true",onDragstart:o=>re.value=d.raw,color:"primary"},h,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:l(()=>[v("mdi-arrow-collapse-vertical")]),_:2},1040,["onDragstart"])]),default:l(()=>[Oe]),_:2},1024),e($,{location:"top"},{activator:l(({props:h})=>[e(r(Se),{href:s.route("domains.show",{id:d.selectable.id})},{default:l(()=>[e(T,g(h,{size:"small",class:"tw-me-2"}),{default:l(()=>[v("mdi-eye")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[Te]),_:2},1024),e($,{location:"top"},{activator:l(({props:h})=>[e(T,g(h,{size:"small",class:"tw-me-2",onClick:o=>ue(d.raw)}),{default:l(()=>[v("mdi-delete")]),_:2},1040,["onClick"])]),default:l(()=>[$e]),_:2},1024)])],8,Ie)]),"no-data":l(()=>[_("div",je,[L.value?(b(),R("h3",Re,"Die Tabelle ist leer.")):(b(),R(ee,{key:1},[Ge,e(P,{color:"primary",onClick:t[15]||(t[15]=d=>M({page:1,itemsPerPage:k.value,clearFilters:!0}))},{default:l(()=>[v("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ve]])])]),_:1},8,["errors"])],64)}}};export{He as default};
