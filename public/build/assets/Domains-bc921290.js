import{d as ge}from"./index-16c90d54.js";import{K as fe,k as p,h as A,l as we,m as be,T as R,r as i,n as ye,o as y,f as G,a as e,u as d,w as l,F as Y,Z as Ve,b as _,p as f,d as h,c as C,g as E,q as ze,t as ee,i as Se,O as ke}from"./app-921b3388.js";import{_ as De}from"./AuthenticatedLayout-3c49effc.js";import{S as xe}from"./sortable.esm-0d19b1d3.js";import"./ApplicationLogo-4707e5da.js";const Pe=_("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Domänen",-1),Ue={class:"tw-flex tw-items-center tw-justify-end"},Be=_("span",{class:"tw-text-h5"},"Neue Domäne",-1),Ce=_("p",null,"Schwellenwerte für Altersgruppe bis 2,5 Jahre",-1),Ne=_("p",null,"Schwellenwerte für Altersgruppe bis 4,5 Jahre",-1),qe=_("p",null,"Sind Sie sicher, dass Sie den aktuellen Domain löschen möchten?",-1),Fe={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Ae={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},Ee={class:"tw-w-full"},Ie={class:"tw-ml-6"},Oe=["data-id","data-order"],Te=_("span",null,"neu anordnen",-1),$e=_("span",null,"Domäne anzeigen",-1),je=_("span",null,"Benutzer löschen",-1),Re={class:"tw-py-6"},Ge={key:0,class:"tw-mb-4"},Ke=_("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),Qe={__name:"Domains",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object,roles:Array},setup(le){const w=le;ge.Inertia.on("success",r=>{let t=r.detail.page.props;r.detail.page.component==="Domains/Domains"&&t&&(S.value=t.currentPage,D.value=t.perPage,te.value=t.orderBy,ae.value=t.sort,K.value=t.total,oe.value=t.lastPage,V.value=t.filters.search??null)}),fe().props.auth.user;const S=p(w.currentPage),D=p(w.perPage),te=p(w.orderBy),ae=p(w.sort),K=p(w.total),oe=p(w.lastPage),V=p(w.filters.search??null),J=p(""),m=p(w.errors||{}),re=p(null),I=p(!1),g=p(!1),N=p(!1),q=p(!1),se=[{title:"Kürzel",key:"is_online",width:"15%",sortable:!1},{title:"Name",key:"first_name",width:"75%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],ne=A(()=>w.items.map(r=>{const t={...r};for(const c in t)(t[c]===null||t[c]===void 0)&&(t[c]="-");return t})),b=A(()=>g.value?3:6),L=A(()=>V.value===null),de=A(()=>V.value!==null);we(()=>{const r={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(t){ce(t)}};xe.create(document.querySelector(".v-data-table tbody"),r)}),be(N,r=>{r||P()});const M=async({page:r,itemsPerPage:t,sortBy:c,clearFilters:u})=>{if(u&&(V.value=null),r===S.value&&u||L||de){I.value=!0;let s={data:{page:r,per_page:t}};c&&c.length>0&&(s.data.order_by=c[0].key,s.data.sort=c[0].order),s.data.search=V.value,await ke.reload(s),S.value=r,D.value=t,I.value=!1}},ue=r=>{x.id=r.id,q.value=!0},x=R({id:null}),_e=async()=>{x.processing=!0;let r={onSuccess:t=>{P()},onError:t=>{m.value=t},onFinish:()=>{x.processing=!1}};x.delete(route("domains.destroy",{id:x.id}),r)},P=()=>{N.value=!1,q.value=!1,a.reset(),a.clearErrors(),g.value=!1,m.value={}},ie=()=>{a.reset(),a.clearErrors(),g.value=!1},a=R({name:null,abbreviation:null,age_2_red_threshold:null,age_2_red_threshold_daz:null,age_2_yellow_threshold:null,age_2_yellow_threshold_daz:null,age_4_red_threshold:null,age_4_red_threshold_daz:null,age_4_yellow_threshold:null,age_4_yellow_threshold_daz:null}),me=async()=>{a.processing=!0,g.value||(a.age_2_red_threshold_daz=a.age_2_red_threshold,a.age_2_yellow_threshold_daz=a.age_2_yellow_threshold,a.age_4_red_threshold_daz=a.age_4_red_threshold,a.age_4_yellow_threshold_daz=a.age_4_yellow_threshold),a.post(route("domains.store"),{onSuccess:r=>{P()},onError:r=>{m.value=r},onFinish:()=>{a.processing=!1}})},F=R({items:[]}),ce=r=>{F.processing=!0;let t=[],c=0;S.value>1&&(c=10*S.value-10),[].forEach.call(r.from.querySelectorAll("tr"),function(u,s){u.setAttribute("data-order",c+s),t.push({id:u.getAttribute("data-id"),order:c+s})}),F.items=t,F.post(route("domains.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:u=>{},onError:u=>{m.value=u},onFinish:()=>{F.processing=!1}})};return(r,t)=>{const c=i("v-card-title"),u=i("v-text-field"),s=i("v-col"),k=i("v-row"),pe=i("v-switch"),O=i("v-spacer"),Z=i("v-container"),H=i("v-card-text"),T=i("v-btn-primary"),z=i("v-hover"),U=i("v-btn"),Q=i("v-card-actions"),W=i("v-card"),X=i("v-dialog"),$=i("v-icon"),j=i("v-tooltip"),ve=i("v-data-table-server"),he=ye("sortable-data-table");return y(),G(Y,null,[e(d(Ve),{title:"Domains"}),e(De,{errors:m.value},{header:l(()=>[Pe,_("div",Ue,[e(z,null,{default:l(({isHovering:n,props:v})=>[e(U,f(v,{color:n?"accent":"primary",dark:""}),{default:l(()=>[h(" Anlegen "),e(X,{modelValue:N.value,"onUpdate:modelValue":t[11]||(t[11]=o=>N.value=o),activator:"parent",width:"80vw"},{default:l(()=>[e(W,{height:"80vh"},{default:l(()=>[e(c,null,{default:l(()=>[Be]),_:1}),e(H,null,{default:l(()=>[e(Z,null,{default:l(()=>[e(k,null,{default:l(()=>[e(s,{cols:"12",sm:"3"},{default:l(()=>[e(u,{modelValue:d(a).abbreviation,"onUpdate:modelValue":t[0]||(t[0]=o=>d(a).abbreviation=o),"error-messages":m.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",sm:"9"},{default:l(()=>[e(u,{modelValue:d(a).name,"onUpdate:modelValue":t[1]||(t[1]=o=>d(a).name=o),"error-messages":m.value.name,label:"Name der Domäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(k,{class:"mt-10"},{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(pe,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=o=>g.value=o),"hide-details":"",label:"Einstellen mit Daz"},null,8,["modelValue"])]),_:1})]),_:1}),e(k,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[Ce]),_:1}),e(s,{cols:"12",sm:b.value},{default:l(()=>[e(u,{modelValue:d(a).age_2_red_threshold,"onUpdate:modelValue":t[3]||(t[3]=o=>d(a).age_2_red_threshold=o),"error-messages":m.value.age_2_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),g.value?(y(),C(s,{key:0,cols:"12",sm:b.value},{default:l(()=>[e(u,{modelValue:d(a).age_2_red_threshold_daz,"onUpdate:modelValue":t[4]||(t[4]=o=>d(a).age_2_red_threshold_daz=o),"error-messages":m.value.age_2_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):E("",!0),e(s,{cols:"12",sm:b.value},{default:l(()=>[e(u,{modelValue:d(a).age_2_yellow_threshold,"onUpdate:modelValue":t[5]||(t[5]=o=>d(a).age_2_yellow_threshold=o),"error-messages":m.value.age_2_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),g.value?(y(),C(s,{key:1,cols:"12",sm:b.value},{default:l(()=>[e(u,{modelValue:d(a).age_2_yellow_threshold_daz,"onUpdate:modelValue":t[6]||(t[6]=o=>d(a).age_2_yellow_threshold_daz=o),"error-messages":m.value.age_2_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):E("",!0)]),_:1}),e(k,null,{default:l(()=>[e(O),e(s,{cols:"12"},{default:l(()=>[Ne]),_:1}),e(s,{cols:"12",sm:b.value},{default:l(()=>[e(u,{modelValue:d(a).age_4_red_threshold,"onUpdate:modelValue":t[7]||(t[7]=o=>d(a).age_4_red_threshold=o),"error-messages":m.value.age_4_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),g.value?(y(),C(s,{key:0,cols:"12",sm:b.value},{default:l(()=>[e(u,{modelValue:d(a).age_4_red_threshold_daz,"onUpdate:modelValue":t[8]||(t[8]=o=>d(a).age_4_red_threshold_daz=o),"error-messages":m.value.age_4_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):E("",!0),e(s,{cols:"12",sm:b.value},{default:l(()=>[e(u,{modelValue:d(a).age_4_yellow_threshold,"onUpdate:modelValue":t[9]||(t[9]=o=>d(a).age_4_yellow_threshold=o),"error-messages":m.value.age_4_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),g.value?(y(),C(s,{key:1,cols:"12",sm:b.value},{default:l(()=>[e(u,{modelValue:d(a).age_4_yellow_threshold_daz,"onUpdate:modelValue":t[10]||(t[10]=o=>d(a).age_4_yellow_threshold_daz=o),"error-messages":m.value.age_4_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):E("",!0)]),_:1})]),_:1})]),_:1}),e(Q,null,{default:l(()=>[e(z,null,{default:l(({isHovering:o,props:B})=>[e(T,f({onClick:ie},B,{color:o?"accent":"primary"}),{default:l(()=>[h("Clear")]),_:2},1040,["color"])]),_:2},1024),e(O),e(z,null,{default:l(({isHovering:o,props:B})=>[e(U,f({onClick:P},B,{color:o?"accent":"primary"}),{default:l(()=>[h("Cancel")]),_:2},1040,["color"])]),_:2},1024),e(z,null,{default:l(({isHovering:o,props:B})=>[e(T,f({onClick:me},B,{color:o?"accent":"primary"}),{default:l(()=>[h("Save")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})]),e(X,{modelValue:q.value,"onUpdate:modelValue":t[12]||(t[12]=n=>q.value=n),width:"20vw"},{default:l(()=>[e(W,{height:"30vh"},{default:l(()=>[e(H,null,{default:l(()=>[e(Z,null,{default:l(()=>[e(k,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[qe]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,null,{default:l(()=>[e(O),e(z,null,{default:l(({isHovering:n,props:v})=>[e(U,f({onClick:P},v,{color:n?"accent":"primary"}),{default:l(()=>[h("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(z,null,{default:l(({isHovering:n,props:v})=>[e(T,f({onClick:_e},v,{color:n?"accent":"primary"}),{default:l(()=>[h("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:l(()=>[_("div",Fe,[_("div",Ae,[_("div",Ee,[e(k,null,{default:l(()=>[e(s,{cols:"12",sm:"5"},{default:l(()=>[e(u,{modelValue:V.value,"onUpdate:modelValue":t[13]||(t[13]=n=>V.value=n),label:"Kürzel/Name"},null,8,["modelValue"])]),_:1})]),_:1})]),_("div",Ie,[e(z,null,{default:l(({isHovering:n,props:v})=>[e(U,f({class:"tw-mt-2"},v,{color:n?"accent":"primary",onClick:t[14]||(t[14]=o=>J.value=String(Date.now())),dark:""}),{default:l(()=>[h("Suche")]),_:2},1040,["color"])]),_:1})])]),ze((y(),C(ve,{"items-per-page":D.value,"onUpdate:itemsPerPage":t[16]||(t[16]=n=>D.value=n),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:se,page:S.value,"items-length":K.value,items:ne.value,search:J.value,loading:I.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":M},{item:l(({item:n})=>[_("tr",{"data-id":n.selectable.id,"data-order":n.selectable.order},[_("td",null,ee(n.selectable.abbreviation),1),_("td",null,ee(n.selectable.name),1),_("td",null,[e(j,{location:"top"},{activator:l(({props:v})=>[e($,f({draggable:"true",onDragstart:o=>re.value=n.raw,color:"primary"},v,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:l(()=>[h("mdi-arrow-collapse-vertical")]),_:2},1040,["onDragstart"])]),default:l(()=>[Te]),_:2},1024),e(j,{location:"top"},{activator:l(({props:v})=>[e(d(Se),{href:r.route("domains.show",{id:n.selectable.id})},{default:l(()=>[e($,f(v,{size:"small",class:"tw-me-2"}),{default:l(()=>[h("mdi-eye")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[$e]),_:2},1024),e(j,{location:"top"},{activator:l(({props:v})=>[e($,f(v,{size:"small",class:"tw-me-2",onClick:o=>ue(n.raw)}),{default:l(()=>[h("mdi-delete")]),_:2},1040,["onClick"])]),default:l(()=>[je]),_:2},1024)])],8,Oe)]),"no-data":l(()=>[_("div",Re,[L.value?(y(),G("h3",Ge,"Die Tabelle ist leer.")):(y(),G(Y,{key:1},[Ke,e(U,{color:"primary",onClick:t[15]||(t[15]=n=>M({page:1,itemsPerPage:D.value,clearFilters:!0}))},{default:l(()=>[h("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[he]])])]),_:1},8,["errors"])],64)}}};export{Qe as default};
