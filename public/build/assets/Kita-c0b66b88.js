import{d as ue}from"./index-f62b5837.js";import{K as de,k as i,h as E,m as _e,T as M,r as s,n as pe,o as N,f as B,a as e,u as y,w as t,F as Q,Z as me,b as n,p as v,d as _,t as T,q as ve,c as fe,i as ge,O as he}from"./app-bdeb97a8.js";import{_ as we}from"./AuthenticatedLayout-35249d2e.js";import"./ApplicationLogo-a240fa82.js";const be=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Verwalte Kita",-1),ye={class:"tw-flex tw-items-center tw-justify-end"},ke=n("span",{class:"tw-text-h5"},"Verwalte Kita",-1),Pe={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},xe={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},Ve={class:"tw-w-full"},Ke={class:"tw-ml-6"},Se=["data-id","data-order"],ze=n("span",null,"Kita bearbeiten",-1),Ne=n("span",null,"Kita löschen",-1),Ce={class:"tw-py-6"},Fe={key:0,class:"tw-mb-4"},De=n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),Ae={__name:"Kita",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object,roles:Array},setup(W){const p=W;ue.Inertia.on("success",o=>{let l=o.detail.page.props;o.detail.page.component==="Kita/Kita"&&l&&(K.value=l.currentPage,k.value=l.perPage,X.value=l.orderBy,Y.value=l.sort,U.value=l.total,ee.value=l.lastPage,f.value=l.filters.search??null)}),de().props.auth.user;const K=i(p.currentPage),k=i(p.perPage),X=i(p.orderBy),Y=i(p.sort),U=i(p.total),ee=i(p.lastPage),f=i(p.filters.search??null),A=i(""),h=i(p.errors||{}),C=i(!1),S=i(!1),z=i(!1),O=i(null),te=[{title:"Name",key:"name",width:"70%",sortable:!1},{title:"Postleitzahl",key:"zip_code",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],le=E(()=>p.items.map(o=>{const l={...o};for(const u in l)(l[u]===null||l[u]===void 0)&&(l[u]="-");return l})),j=E(()=>f.value===null),ae=E(()=>f.value!==null);_e(S,o=>{o||w()});const I=async({page:o,itemsPerPage:l,sortBy:u,clearFilters:b})=>{if(b&&(f.value=null),o===K.value&&b||j||ae){C.value=!0;let m={data:{page:o,per_page:l}};u&&u.length>0&&(m.data.order_by=u[0].key,m.data.sort=u[0].order),m.data.search=f.value,await he.reload(m),K.value=o,k.value=l,C.value=!1}},oe=o=>{O.value=o.name,P.id=o.id,z.value=!0},P=M({id:null}),se=async()=>{P.processing=!0;let o={onSuccess:l=>{w()},onError:l=>{w(),h.value=l},onFinish:()=>{P.processing=!1}};P.delete(route("kitas.destroy",{id:P.id}),o)},w=()=>{S.value=!1,z.value=!1,c.reset(),c.clearErrors(),h.value={}},ne=()=>{c.reset(),c.clearErrors()},c=M({name:null,zip_code:null}),re=async()=>{c.processing=!0,c.post(route("kitas.store"),{onSuccess:o=>{w()},onError:o=>{h.value=o},onFinish:()=>{c.processing=!1}})};return(o,l)=>{const u=s("v-card-title"),b=s("v-text-field"),m=s("v-col"),F=s("v-row"),$=s("v-container"),q=s("v-card-text"),D=s("v-btn-primary"),g=s("v-hover"),Z=s("v-spacer"),x=s("v-btn"),L=s("v-card-actions"),R=s("v-card"),G=s("v-dialog"),H=s("v-icon"),J=s("v-tooltip"),ie=s("v-data-table-server"),ce=pe("sortable-data-table");return N(),B(Q,null,[e(y(me),{title:"Kita"}),e(we,{errors:h.value},{header:t(()=>[be,n("div",ye,[e(g,null,{default:t(({isHovering:a,props:d})=>[e(x,v(d,{color:a?"accent":"primary",dark:""}),{default:t(()=>[_(" Anlegen "),e(G,{modelValue:S.value,"onUpdate:modelValue":l[2]||(l[2]=r=>S.value=r),activator:"parent",width:"80vw"},{default:t(()=>[e(R,{height:"80vh"},{default:t(()=>[e(u,null,{default:t(()=>[ke]),_:1}),e(q,null,{default:t(()=>[e($,null,{default:t(()=>[e(F,null,{default:t(()=>[e(m,{cols:"12",sm:"9"},{default:t(()=>[e(b,{modelValue:y(c).name,"onUpdate:modelValue":l[0]||(l[0]=r=>y(c).name=r),"error-messages":h.value.name,label:"Name der Einrichtung / Kita*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(m,{cols:"12",sm:"3"},{default:t(()=>[e(b,{modelValue:y(c).zip_code,"onUpdate:modelValue":l[1]||(l[1]=r=>y(c).zip_code=r),"error-messages":h.value.zip_code,label:"Postleitzahl*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(({isHovering:r,props:V})=>[e(D,v({onClick:ne},V,{color:r?"accent":"primary"}),{default:t(()=>[_("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(Z),e(g,null,{default:t(({isHovering:r,props:V})=>[e(x,v({onClick:w},V,{color:r?"accent":"primary"}),{default:t(()=>[_("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(g,null,{default:t(({isHovering:r,props:V})=>[e(D,v({onClick:re},V,{color:r?"accent":"primary"}),{default:t(()=>[_("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})]),e(G,{modelValue:z.value,"onUpdate:modelValue":l[3]||(l[3]=a=>z.value=a),width:"20vw"},{default:t(()=>[e(R,{height:"30vh"},{default:t(()=>[e(q,null,{default:t(()=>[e($,null,{default:t(()=>[e(F,null,{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[n("p",null,"Sind Sie sicher, dass Sie die Kita "+T(O.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(Z),e(g,null,{default:t(({isHovering:a,props:d})=>[e(x,v({onClick:w},d,{color:a?"accent":"primary"}),{default:t(()=>[_("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(g,null,{default:t(({isHovering:a,props:d})=>[e(D,v({onClick:se},d,{color:a?"accent":"primary"}),{default:t(()=>[_("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:t(()=>[n("div",Pe,[n("div",xe,[n("div",Ve,[e(F,null,{default:t(()=>[e(m,{cols:"12",sm:"5"},{default:t(()=>[e(b,{modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=a=>f.value=a),label:"Name"},null,8,["modelValue"])]),_:1})]),_:1})]),n("div",Ke,[e(g,null,{default:t(({isHovering:a,props:d})=>[e(x,v({class:"tw-mt-2"},d,{color:a?"accent":"primary",onClick:l[5]||(l[5]=r=>A.value=String(Date.now())),dark:""}),{default:t(()=>[_("Suche")]),_:2},1040,["color"])]),_:1})])]),ve((N(),fe(ie,{"items-per-page":k.value,"onUpdate:itemsPerPage":l[7]||(l[7]=a=>k.value=a),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:te,page:K.value,"items-length":U.value,items:le.value,search:A.value,loading:C.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":I},{item:t(({item:a})=>[n("tr",{"data-id":a.selectable.id,"data-order":a.selectable.order},[n("td",null,T(a.selectable.name),1),n("td",null,T(a.selectable.zip_code),1),n("td",null,[e(J,{location:"top"},{activator:t(({props:d})=>[e(y(ge),{href:o.route("kitas.show",{id:a.selectable.id})},{default:t(()=>[e(H,v(d,{size:"small",class:"tw-me-2"}),{default:t(()=>[_("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[ze]),_:2},1024),e(J,{location:"top"},{activator:t(({props:d})=>[e(H,v(d,{size:"small",class:"tw-me-2",onClick:r=>oe(a.raw)}),{default:t(()=>[_("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[Ne]),_:2},1024)])],8,Se)]),"no-data":t(()=>[n("div",Ce,[j.value?(N(),B("h3",Fe,"Die Tabelle ist leer.")):(N(),B(Q,{key:1},[De,e(x,{color:"primary",onClick:l[6]||(l[6]=a=>I({page:1,itemsPerPage:k.value,clearFilters:!0}))},{default:t(()=>[_("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ce]])])]),_:1},8,["errors"])],64)}}};export{Ae as default};
