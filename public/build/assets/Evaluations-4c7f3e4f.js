import{d as ae}from"./index-435af13d.js";import{K as le,k as n,h as oe,m as se,T as z,r as s,n as ne,o as v,f as x,a as l,u,w as t,F as re,Z as ie,b as r,i as A,d as m,t as f,p as y,q as ce,c as I,g as de,O as ue}from"./app-f01b4142.js";import{_ as _e}from"./AuthenticatedLayout-857285ab.js";import{f as S}from"./common-ba477221.js";import"./ApplicationLogo-bd6e3e0b.js";const pe=r("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Evaluationen",-1),ve={class:"tw-flex tw-items-center tw-justify-end"},me={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},fe=["data-id","data-order"],ge={align:"center"},he=r("span",null,"Einrichtung bearbeiten",-1),be=r("span",null,"Einrichtung löschen",-1),we={class:"tw-py-6"},ye={key:0,class:"tw-mb-4"},ke={key:1,class:"tw-mb-4"},Be={__name:"Evaluations",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(O){const c=O;ae.Inertia.on("success",a=>{let e=a.detail.page.props;a.detail.page.component==="Evaluations/Evaluations"&&e&&(g.value=e.currentPage,h.value=e.perPage,U.value=e.orderBy,j.value=e.sort,D.value=e.total,$.value=e.lastPage)}),le().props.auth.user;const g=n(c.currentPage),h=n(c.perPage),U=n(c.orderBy),j=n(c.sort),D=n(c.total),$=n(c.lastPage),Z=n(""),k=n(c.errors||{}),E=n(!1),N=n(!1),b=n(!1),B=n(null);n(null);const q=[{title:"UUID",key:"uuid",width:"40%",sortable:!1},{title:"Zullet bearbeitet",key:"updated_at",width:"15%",sortable:!1},{title:"Abgegeben am",key:"created_at",width:"15%",sortable:!1},{title:"Bearbetungszeit endet",key:"finished_at",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],K=oe(()=>c.items.map(a=>{const e={...a};for(const i in e)(e[i]===null||e[i]===void 0)&&(e[i]="-");return e}));se(N,a=>{a||w()});const L=async({page:a,itemsPerPage:e,sortBy:i,clearFilters:P})=>{if(a===g.value&&P){E.value=!0;let p={data:{page:a,per_page:e}};i&&i.length>0&&(p.data.order_by=i[0].key,p.data.sort=i[0].order),await ue.reload(p),g.value=a,h.value=e,E.value=!1}},G=a=>{B.value=a.uuid,_.id=a.id,b.value=!0},_=z({id:null}),H=async()=>{_.processing=!0;let a={onSuccess:e=>{w()},onError:e=>{w(),k.value=e},onFinish:()=>{_.processing=!1}};_.delete(route("evaluations.destroy",{id:_.id}),a)},w=()=>{N.value=!1,b.value=!1,T.reset(),T.clearErrors(),k.value={}},T=z({age:null,uuid:null,is_daz:!1,ratings:[]});return(a,e)=>{const i=s("v-col"),P=s("v-row"),p=s("v-container"),J=s("v-card-text"),M=s("v-spacer"),Q=s("v-btn"),C=s("v-hover"),R=s("v-btn-primary"),W=s("v-card-actions"),X=s("v-card"),Y=s("v-dialog"),F=s("v-icon"),V=s("v-tooltip"),ee=s("v-data-table-server"),te=ne("sortable-data-table");return v(),x(re,null,[l(u(ie),{title:"Evaluationen"}),l(_e,{errors:k.value},{header:t(()=>[pe,r("div",ve,[l(u(A),{href:a.route("evaluations.create")},{default:t(()=>[m(" Anlegen ")]),_:1},8,["href"])]),l(Y,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),width:"20vw"},{default:t(()=>[l(X,{height:"30vh"},{default:t(()=>[l(J,null,{default:t(()=>[l(p,null,{default:t(()=>[l(P,null,{default:t(()=>[l(i,{cols:"12"},{default:t(()=>[r("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+f(B.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),l(W,null,{default:t(()=>[l(M),l(C,null,{default:t(({isHovering:o,props:d})=>[l(Q,y({onClick:w},d,{color:o?"accent":"primary"}),{default:t(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),l(C,null,{default:t(({isHovering:o,props:d})=>[l(R,y({onClick:H},d,{color:o?"accent":"primary"}),{default:t(()=>[m("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:t(()=>[r("div",me,[ce((v(),I(ee,{"items-per-page":h.value,"onUpdate:itemsPerPage":e[1]||(e[1]=o=>h.value=o),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:q,page:g.value,"items-length":D.value,items:K.value,search:Z.value,loading:E.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":L},{item:t(({item:o})=>[r("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[r("td",null,f(o.selectable.uuid),1),r("td",null,f(u(S)(o.selectable.updated_at,"sv-SE")),1),r("td",null,f(u(S)(o.selectable.created_at,"sv-SE")),1),r("td",null,f(u(S)(o.selectable.finished_at,"sv-SE")),1),r("td",ge,[o.selectable.editable?(v(),I(V,{key:0,location:"top"},{activator:t(({props:d})=>[l(u(A),{href:a.route("evaluations.show",{id:o.selectable.id})},{default:t(()=>[l(F,y(d,{size:"small",class:"tw-me-2"}),{default:t(()=>[m("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[he]),_:2},1024)):de("",!0),l(V,{location:"top"},{activator:t(({props:d})=>[l(F,y(d,{size:"small",class:"tw-me-2",onClick:Ee=>G(o.raw)}),{default:t(()=>[m("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[be]),_:2},1024)])],8,fe)]),"no-data":t(()=>[r("div",we,[a.allFiltersEmpty?(v(),x("h3",ye,"Die Tabelle ist leer.")):(v(),x("h3",ke,"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück."))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[te]])])]),_:1},8,["errors"])],64)}}};export{Be as default};
