import{d as M}from"./index-013a9bf5.js";import{K as P,x as p,h,k as T,T as j,r as d,o as z,f as A,a as e,u as r,w as l,F as C,Z as I,b as v,i as O,A as U,d as k}from"./app-2811682d.js";import{_ as S}from"./AuthenticatedLayout-e7b50d46.js";import"./ApplicationLogo-3ecea417.js";const Z=v("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Benutzer verwalten",-1),$={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},K={class:"tw-flex tw-justify-between"},J={__name:"ManageUser",props:{user:Object,errors:Object,roles:Array},setup(w){const c=w;M.Inertia.on("success",t=>{let a=t.detail.page.props;t.detail.page.component==="Users/ManageUser"&&a&&(m.value=a.user)}),P().props.auth.user;const m=p(c.user),u=p(c.errors||{});p(!1);const g=p(!1),b=p(-1);h(()=>c.items.map(t=>{const a={...t};for(const n in a)(a[n]===null||a[n]===void 0)&&(a[n]="-");return a})),h(()=>b.value===-1?"New Manager":"Edit Manager"),T(g,t=>{t||V()});const V=()=>{g.value=!1,o.reset(),o.clearErrors(),b.value=-1,u.value={}},o=j({id:m.value.id,first_name:m.value.first_name,last_name:m.value.last_name,email:m.value.email,role:m.value.primary_role_id,two_factor_auth_enabled:m.value.two_factor_auth_enabled}),q=async()=>{o.processing=!0;let t={preserveState:!1,onSuccess:a=>{V()},onError:a=>{u.value=a},onFinish:()=>{o.processing=!1}};o.put(route("users.update",{user:o.id}),t)};return(t,a)=>{const n=d("v-text-field"),i=d("v-col"),_=d("v-row"),B=d("v-select"),E=d("v-checkbox"),x=d("v-container"),F=d("v-btn"),y=d("v-hover"),N=d("v-btn-primary");return z(),A(C,null,[e(r(I),{title:"Benutzer verwalten"}),e(S,{errors:u.value},{header:l(()=>[Z]),default:l(()=>[v("div",$,[e(x,null,{default:l(()=>[e(_,null,{default:l(()=>[e(i,{cols:"12",sm:"4"},{default:l(()=>[e(n,{modelValue:r(o).first_name,"onUpdate:modelValue":a[0]||(a[0]=s=>r(o).first_name=s),"error-messages":u.value.first_name,label:"Vorname",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",sm:"4"},{default:l(()=>[e(n,{modelValue:r(o).last_name,"onUpdate:modelValue":a[1]||(a[1]=s=>r(o).last_name=s),"error-messages":u.value.last_name,label:"Nachname",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",sm:"4"},{default:l(()=>[e(n,{modelValue:r(o).email,"onUpdate:modelValue":a[2]||(a[2]=s=>r(o).email=s),"error-messages":u.value.email,label:"Email",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12",sm:"4"},{default:l(()=>[e(n,{type:"password",autocomplete:"new-password",modelValue:r(o).password,"onUpdate:modelValue":a[3]||(a[3]=s=>r(o).password=s),"error-messages":u.value.password,label:"Passwort",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",sm:"4"},{default:l(()=>[e(n,{type:"password",modelValue:r(o).password_confirmation,"onUpdate:modelValue":a[4]||(a[4]=s=>r(o).password_confirmation=s),"error-messages":u.value.password_confirmation,label:"Passwort Bestätigung",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",sm:"4"},{default:l(()=>[e(B,{disabled:t.$page.props.auth.user.id===m.value.id,modelValue:r(o).role,"onUpdate:modelValue":a[5]||(a[5]=s=>r(o).role=s),items:w.roles,"error-messages":u.value.role,"item-title":"name","item-value":"id",label:"Rolle",required:""},null,8,["disabled","modelValue","items","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12",sm:"4"},{default:l(()=>[e(E,{modelValue:r(o).two_factor_auth_enabled,"onUpdate:modelValue":a[6]||(a[6]=s=>r(o).two_factor_auth_enabled=s),label:"Zwei-Faktor-Authentifizierung",value:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(_,null,{default:l(()=>[e(i,{cols:"12",md:"3",sm:"4"},{default:l(()=>[v("div",K,[e(y,null,{default:l(({isHovering:s,props:f})=>[e(r(O),{href:t.route("users.index")},{default:l(()=>[e(F,U(f,{color:s?"primary":"accent"}),{default:l(()=>[k("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(y,null,{default:l(({isHovering:s,props:f})=>[e(N,U({onClick:q},f,{color:s?"accent":"primary"}),{default:l(()=>[k("Speichern")]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{J as default};
