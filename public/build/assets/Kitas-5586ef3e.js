import{d as pe}from"./index-a41fb1e4.js";import{K as me,k as i,h as K,m as _e,T as Q,r as s,n as ve,o as y,f as B,a as t,u as k,w as e,F as W,Z as fe,b as n,c as T,p as v,d as p,g as X,t as U,q as ge,i as he,O as we}from"./app-f3537678.js";import{_ as be}from"./AuthenticatedLayout-e4bcf8a7.js";import"./ApplicationLogo-2c061f4f.js";const ye=n("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einrichtungen",-1),ke={class:"tw-flex tw-items-center tw-justify-end"},Pe=n("span",{class:"tw-text-h5"},"Verwalte Einrichtung",-1),Ve={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},xe={class:"tw-bg-white tw-flex tw-justify-between tw-px-6 tw-py-6"},Ee={class:"tw-w-full"},Se={class:"tw-ml-6"},ze=["data-id","data-order"],Ne=n("span",null,"Einrichtung bearbeiten",-1),Ce=n("span",null,"Einrichtung löschen",-1),Fe={class:"tw-py-6"},De={key:0,class:"tw-mb-4"},Ke=n("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),Ae={__name:"Kitas",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object,roles:Array},setup(Y){const m=Y;pe.Inertia.on("success",l=>{let a=l.detail.page.props;l.detail.page.component==="Kitas/Kitas"&&a&&(S.value=a.currentPage,P.value=a.perPage,ee.value=a.orderBy,te.value=a.sort,$.value=a.total,ae.value=a.lastPage,f.value=a.filters.search??null)}),me().props.auth.user;const S=i(m.currentPage),P=i(m.perPage),ee=i(m.orderBy),te=i(m.sort),$=i(m.total),ae=i(m.lastPage),f=i(m.filters.search??null),A=i(""),h=i(m.errors||{}),C=i(!1),z=i(!1),N=i(!1),O=i(null),le=[{title:"Name",key:"name",width:"70%",sortable:!1},{title:"Postleitzahl",key:"zip_code",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],oe=K(()=>m.items.map(l=>{const a={...l};for(const u in a)(a[u]===null||a[u]===void 0)&&(a[u]="-");return a})),j=K(()=>f.value===null),se=K(()=>f.value!==null);_e(z,l=>{l||w()});const I=async({page:l,itemsPerPage:a,sortBy:u,clearFilters:b})=>{if(b&&(f.value=null),l===S.value&&b||j||se){C.value=!0;let _={data:{page:l,per_page:a}};u&&u.length>0&&(_.data.order_by=u[0].key,_.data.sort=u[0].order),_.data.search=f.value,await we.reload(_),S.value=l,P.value=a,C.value=!1}},ne=l=>{O.value=l.name,V.id=l.id,N.value=!0},V=Q({id:null}),re=async()=>{V.processing=!0;let l={onSuccess:a=>{w()},onError:a=>{w(),h.value=a},onFinish:()=>{V.processing=!1}};V.delete(route("kitas.destroy",{id:V.id}),l)},w=()=>{z.value=!1,N.value=!1,c.reset(),c.clearErrors(),h.value={}},ie=()=>{c.reset(),c.clearErrors()},c=Q({name:null,zip_code:null}),ce=async()=>{c.processing=!0,c.post(route("kitas.store"),{onSuccess:l=>{w()},onError:l=>{h.value=l},onFinish:()=>{c.processing=!1}})};return(l,a)=>{const u=s("v-card-title"),b=s("v-text-field"),_=s("v-col"),F=s("v-row"),q=s("v-container"),Z=s("v-card-text"),D=s("v-btn-primary"),g=s("v-hover"),L=s("v-spacer"),x=s("v-btn"),R=s("v-card-actions"),G=s("v-card"),H=s("v-dialog"),J=s("v-icon"),M=s("v-tooltip"),ue=s("v-data-table-server"),de=ve("sortable-data-table");return y(),B(W,null,[t(k(fe),{title:"Einrichtungen"}),t(be,{errors:h.value},{header:e(()=>[ye,n("div",ke,[l.$page.props.auth.user.is_manager?X("",!0):(y(),T(g,{key:0},{default:e(({isHovering:o,props:d})=>[t(x,v(d,{color:o?"accent":"primary",dark:""}),{default:e(()=>[p(" Anlegen "),t(H,{modelValue:z.value,"onUpdate:modelValue":a[2]||(a[2]=r=>z.value=r),activator:"parent",width:"80vw"},{default:e(()=>[t(G,{height:"80vh"},{default:e(()=>[t(u,null,{default:e(()=>[Pe]),_:1}),t(Z,null,{default:e(()=>[t(q,null,{default:e(()=>[t(F,null,{default:e(()=>[t(_,{cols:"12",sm:"9"},{default:e(()=>[t(b,{modelValue:k(c).name,"onUpdate:modelValue":a[0]||(a[0]=r=>k(c).name=r),"error-messages":h.value.name,label:"Name der Einrichtung / Einrichtung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),t(_,{cols:"12",sm:"3"},{default:e(()=>[t(b,{modelValue:k(c).zip_code,"onUpdate:modelValue":a[1]||(a[1]=r=>k(c).zip_code=r),"error-messages":h.value.zip_code,label:"Postleitzahl*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),t(R,null,{default:e(()=>[t(g,null,{default:e(({isHovering:r,props:E})=>[t(D,v({onClick:ie},E,{color:r?"accent":"primary"}),{default:e(()=>[p("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(L),t(g,null,{default:e(({isHovering:r,props:E})=>[t(x,v({onClick:w},E,{color:r?"accent":"primary"}),{default:e(()=>[p("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(g,null,{default:e(({isHovering:r,props:E})=>[t(D,v({onClick:ce},E,{color:r?"accent":"primary"}),{default:e(()=>[p("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1}))]),t(H,{modelValue:N.value,"onUpdate:modelValue":a[3]||(a[3]=o=>N.value=o),width:"20vw"},{default:e(()=>[t(G,{height:"30vh"},{default:e(()=>[t(Z,null,{default:e(()=>[t(q,null,{default:e(()=>[t(F,null,{default:e(()=>[t(_,{cols:"12"},{default:e(()=>[n("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+U(O.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(R,null,{default:e(()=>[t(L),t(g,null,{default:e(({isHovering:o,props:d})=>[t(x,v({onClick:w},d,{color:o?"accent":"primary"}),{default:e(()=>[p("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(g,null,{default:e(({isHovering:o,props:d})=>[t(D,v({onClick:re},d,{color:o?"accent":"primary"}),{default:e(()=>[p("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[n("div",Ve,[n("div",xe,[n("div",Ee,[t(F,null,{default:e(()=>[t(_,{cols:"12",sm:"5"},{default:e(()=>[t(b,{modelValue:f.value,"onUpdate:modelValue":a[4]||(a[4]=o=>f.value=o),label:"Name"},null,8,["modelValue"])]),_:1})]),_:1})]),n("div",Se,[t(g,null,{default:e(({isHovering:o,props:d})=>[t(x,v({class:"tw-mt-2"},d,{color:o?"accent":"primary",onClick:a[5]||(a[5]=r=>A.value=String(Date.now())),dark:""}),{default:e(()=>[p("Suche")]),_:2},1040,["color"])]),_:1})])]),ge((y(),T(ue,{"items-per-page":P.value,"onUpdate:itemsPerPage":a[7]||(a[7]=o=>P.value=o),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:le,page:S.value,"items-length":$.value,items:oe.value,search:A.value,loading:C.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":I},{item:e(({item:o})=>[n("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[n("td",null,U(o.selectable.name),1),n("td",null,U(o.selectable.zip_code),1),n("td",null,[t(M,{location:"top"},{activator:e(({props:d})=>[t(k(he),{href:l.route("kitas.show",{id:o.selectable.id})},{default:e(()=>[t(J,v(d,{size:"small",class:"tw-me-2"}),{default:e(()=>[p("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[Ne]),_:2},1024),l.$page.props.auth.user.is_manager?X("",!0):(y(),T(M,{key:0,location:"top"},{activator:e(({props:d})=>[t(J,v(d,{size:"small",class:"tw-me-2",onClick:r=>ne(o.raw)}),{default:e(()=>[p("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[Ce]),_:2},1024))])],8,ze)]),"no-data":e(()=>[n("div",Fe,[j.value?(y(),B("h3",De,"Die Tabelle ist leer.")):(y(),B(W,{key:1},[Ke,t(x,{color:"primary",onClick:a[6]||(a[6]=o=>I({page:1,itemsPerPage:P.value,clearFilters:!0}))},{default:e(()=>[p("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[de]])])]),_:1},8,["errors"])],64)}}};export{Ae as default};
