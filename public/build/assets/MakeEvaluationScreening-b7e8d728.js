import{d as J}from"./index-d0e54abd.js";import{K as L,j as m,v as Q,T as W,l as X,r as s,o as _,f as A,a as e,u as l,w as t,F as Y,Z as ee,b as p,c as x,h as D,m as y,d as v,t as te,x as ae}from"./app-2083a496.js";import{p as V,a as oe}from"./common-ea192878.js";import{_ as se}from"./AuthenticatedLayout-6c6b702e.js";import{_ as N}from"./EvaluationDomainsList-95287b3b.js";import"./ApplicationLogo-7d218cc6.js";const ne=p("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Überprüfen",-1),le={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},re=p("h3",null,"Zutreffendes auswählen",-1),ce={key:0,class:"tw-flex justify-center items-center tw-bg-white"},ie={class:"tw-text-right"},ue={class:"tw-text-center"},de={class:"tw-uppercase text-primary tw-font-black tw-text-xl tw-mb-8"},we={__name:"MakeEvaluationScreening",props:{domains:Array,dazDependent:{type:Boolean,default:!1},errors:Object},setup(g){const w=g;J.Inertia.on("success",o=>{o.detail.page.props,o.detail.page.component}),L().props.auth.user;const i=m(w.errors||{}),k=m(!1),z=m([]),h=m(!1),B=m(null),E=m(null);Q(()=>{j()});const U=o=>{a.ratings=o},S=o=>{z.value=ae(o)?o.value:o},j=()=>{a.ratings=V(w.domains)},R=()=>{i.value={},h.value=!1},I=()=>{a.reset(),a.clearErrors(),i.value={},a.ratings=V(w.domains)},a=W({age:null,is_daz:!1,ratings:[]});X(()=>a.age,o=>{a.ratings=V(w.domains)});const Z=async()=>{a.processing=!0,k.value=!0,a.post(route("screening.make"),{onSuccess:o=>{a.clearErrors(),i.value={},h.value=!0,B.value=o.props.data.evaluation,E.value=o.props.data.domain.name},onError:o=>{i.value=o},onFinish:()=>{a.processing=!1,k.value=!1}})};return(o,u)=>{const r=s("v-col"),d=s("v-row"),b=s("v-container"),K=s("v-select"),M=s("v-checkbox"),P=s("v-progress-circular"),C=s("v-btn"),f=s("v-hover"),F=s("v-btn-primary"),T=s("v-icon"),$=s("v-card-text"),H=s("v-spacer"),O=s("v-card-actions"),q=s("v-card"),G=s("v-dialog");return _(),A(Y,null,[e(l(ee),{title:"Überprüfen"}),e(se,{errors:i.value},{header:t(()=>[ne]),default:t(()=>[p("div",le,[e(b,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[re]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{cols:"12",sm:"3"},{default:t(()=>[e(K,{modelValue:l(a).age,"onUpdate:modelValue":u[0]||(u[0]=n=>l(a).age=n),items:l(oe),"error-messages":i.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),g.dazDependent?(_(),x(r,{key:0,cols:"12",sm:"3"},{default:t(()=>[e(M,{modelValue:l(a).is_daz,"onUpdate:modelValue":u[1]||(u[1]=n=>l(a).is_daz=n),label:"Deutsch ist nicht Erstsprache des Kindes"},null,8,["modelValue"])]),_:1})):D("",!0)]),_:1}),e(d,{class:"manage-evaluation-domains"},{default:t(()=>[l(a).age?(_(),x(N,{key:0,ratings:l(a).ratings,age:l(a).age,domains:g.domains,errors:i.value,onUpdateRatingData:U,onUpdateDomainsData:S},null,8,["ratings","age","domains","errors"])):D("",!0)]),_:1})]),_:1}),e(b,null,{default:t(()=>[k.value?(_(),A("div",ce,[e(P,{indeterminate:"",size:40})])):(_(),x(d,{key:1},{default:t(()=>[e(r,{cols:"12",sm:"6"},{default:t(()=>[e(f,null,{default:t(({isHovering:n,props:c})=>[e(C,y({onClick:I},c,{color:n?"primary":"accent"}),{default:t(()=>[v(" Zurücksetzen ")]),_:2},1040,["color"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"6",align:"right"},{default:t(()=>[l(a).age&&z.value.length>0?(_(),x(f,{key:0},{default:t(({isHovering:n,props:c})=>[e(F,y({onClick:Z},c,{color:n?"accent":"primary"}),{default:t(()=>[v(" Ampel-Bewertung ")]),_:2},1040,["color"])]),_:1})):D("",!0)]),_:1})]),_:1}))]),_:1})]),e(G,{modelValue:h.value,"onUpdate:modelValue":u[2]||(u[2]=n=>h.value=n),width:"95vw"},{default:t(()=>[e(q,{height:"95vh"},{default:t(()=>[e($,null,{default:t(()=>[e(b,null,{default:t(()=>[e(d,{class:"result-evaluation-domains"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(f,null,{default:t(({isHovering:n,props:c})=>[p("div",ie,[e(T,y(c,{size:"small",class:"tw-me-2",onClick:R,title:"Fenster schließen"}),{default:t(()=>[v("mdi-close")]),_:2},1040)])]),_:1})]),_:1})]),_:1}),e(d,{class:"result-evaluation-domains"},{default:t(()=>[e(r,{cols:"8",offset:"2"},{default:t(()=>[p("div",ue,[p("h1",de," Ampelergebnis im Bereich "+te(E.value),1),e(f,null,{default:t(({isHovering:n,props:c})=>[e(C,{href:o.route("screening.pdf",l(a)),class:"tw-px-2 tw-py-3 tw-mb-4 tw-mr-4 tw-normal-case",color:n?"primary":"accent"},{default:t(()=>[v(" Einschätzung als PDF downloaden ")]),_:2},1032,["href","color"])]),_:1})])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(N,{ratings:B.value,age:l(a).age,domains:g.domains,disabled:!0},null,8,["ratings","age","domains"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(H),e(f,null,{default:t(({isHovering:n,props:c})=>[e(F,y({onClick:R},c,{color:n?"accent":"primary"}),{default:t(()=>[v("Abbrechen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["errors"])],64)}}};export{we as default};
