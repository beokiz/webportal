import{d as Le}from"./index-6a80f4b7.js";import{k as i,m as A,r as u,o as x,f as z,a as t,K as Be,l as Me,h as ke,T as C,n as qe,u as m,w as e,F as ue,Z as Ze,b as s,p as d,d as _,t as E,q as De,c as I,i as Fe,x as Ee,g as Ye,O as Re}from"./app-2cbbc384.js";import{_ as Ge}from"./AuthenticatedLayout-51fcc5c7.js";import{b as ee,c as Pe,f as Je}from"./common-1f9d3448.js";import"./sortable.esm-0d19b1d3.js";import"./ApplicationLogo-3ca3eb93.js";const We={class:"vuetify-pro-tiptap-wrap"},Ke={__name:"TiptapEditor",props:{modelValue:{type:String},label:{type:String,default:null},minHeight:{type:Number,default:200},maxHeight:{type:Number,default:465},maxWidth:{type:Number,default:900}},emits:["update:modelValue"],setup(S,{emit:g}){const V=i(S.modelValue);return A(V,L=>{g("update:modelValue",L)}),(L,B)=>{const le=u("VuetifyTiptap");return x(),z("div",We,[t(le,{modelValue:V.value,"onUpdate:modelValue":B[0]||(B[0]=ae=>V.value=ae),label:S.label,"min-height":S.minHeight,"max-height":S.maxHeight,"max-width":S.maxWidth},null,8,["modelValue","label","min-height","max-height","max-width"])])}}},Qe=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einstellungen",-1),Xe={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},et={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},tt=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Rückmeldungszeiträume",-1),lt={class:"tw-flex tw-items-center tw-justify-end"},at=s("span",{class:"tw-text-h5"},"Neuer Rückmeldezeitraum",-1),ot=["data-id","data-order"],nt={align:"center"},st=s("span",null,"Einstellungen bearbeiten",-1),rt=s("span",null,"Einstellungen löschen",-1),it=s("div",{class:"tw-py-6"},[s("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),dt={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},ut=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"E-Mail Einstellungen",-1),ct={class:"tw-flex tw-items-center tw-justify-start"},mt={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},_t={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},pt=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Dateien für den Downloadbereich",-1),vt={class:"tw-flex tw-items-center tw-justify-end"},ft=s("span",{class:"tw-text-h5"},"Neue Datei zum Downloadbereich hinzufügen",-1),gt=["data-id","data-order"],wt={align:"center"},bt=["href"],yt=s("span",null,"Datei herunterladen",-1),ht=s("span",null,"Datei bearbeiten",-1),xt=s("span",null,"Datei löschen",-1),Vt=s("div",{class:"tw-py-6"},[s("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),St={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},kt=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"Text auf Login Seite",-1),Dt={class:"tw-flex tw-items-center tw-justify-start"},Ct={__name:"Settings",props:{surveyTimePeriods:Array,downloadableFiles:Array,emailSettings:Object,loginSettings:Object,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(S){const g=S;Le.Inertia.on("success",n=>{let l=n.detail.page.props;n.detail.page.component==="SurveyTimePeriods/SurveyTimePeriods"&&l&&(te.value=l.currentPage,V.value=l.perPage,L.value=l.orderBy,B.value=l.sort,le.value=l.total,ae.value=l.lastPage,ce.value=l.filters.search??null)}),Be().props.auth.user;const te=i(g.currentPage),V=i(g.perPage),L=i(g.orderBy),B=i(g.sort),le=i(g.total),ae=i(g.lastPage),ce=i(g.filters.search??null),me=i(""),v=i(g.errors||{}),M=i(!1),oe=i(!1),ne=i(!1),q=i(!1),Z=i(!1),Y=i(!1),R=i(!1),_e=i(null),pe=i(null),se=i(null),re=i(null),P=i(),T=i(),ve=i({send_yearly_evaluation_reminder_ntf_before_days:"Anzahl der Tage vor Ende des Bewertungszeitraums für den Versand der Erinnerungsmails"}),Te=[{title:"Jahr",key:"year",width:"10%",sortable:!0},{title:"Erhebungsbeginn",key:"survey_start_date",width:"37.5%",sortable:!0},{title:"Erhebungsende",key:"survey_end_date",width:"37.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}],Ue=[{title:"Name",key:"name",width:"42.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"42.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}];Me(()=>{ge()});const Ne=ke(()=>fe(g.surveyTimePeriods)),Ce=ke(()=>fe(g.downloadableFiles));A(q,n=>{n||y()}),A(Z,n=>{n||y()});const fe=n=>n.map(l=>{const f={...l};for(const c in f)(f[c]===null||f[c]===void 0)&&(f[c]="-");return f}),ge=()=>{se.value=ee(new Date(new Date().getFullYear(),4,1)),re.value=ee(new Date(new Date().getFullYear(),5,30)),P.value=new Date(new Date().getFullYear(),4,1),T.value=new Date(new Date().getFullYear(),5,30)},y=()=>{q.value=!1,Z.value=!1,Y.value=!1,R.value=!1,ie(),v.value={}},ie=()=>{k.reset(),k.clearErrors(),b.reset(),b.clearErrors(),ge()},we=async({page:n,itemsPerPage:l,sortBy:f})=>{M.value=!0;let c={data:{page:n,per_page:l}};f&&f.length>0?(c.data.order_by=f[0].key,c.data.sort=f[0].order):(c.data.order_by=null,c.data.sort=null),c.data.search=ce.value,await Re.reload(c),te.value=n,V.value=l,M.value=!1};A(P,n=>{se.value=ee(n)}),A(T,n=>{re.value=ee(n)});const ze=n=>{j.id=n.id,_e.value=n.year,Y.value=!0},k=C({year:null,survey_start_date:null,survey_end_date:null}),j=C({id:null}),je=async()=>{k.processing=!0,k.survey_start_date=new Date(P.value).toLocaleString(),k.survey_end_date=new Date(T.value).toLocaleString(),k.post(route("survey_time_periods.store"),{onSuccess:n=>{y()},onError:n=>{v.value=n},onFinish:()=>{k.processing=!1}})},Oe=async()=>{j.processing=!0;let n={onSuccess:l=>{y()},onError:l=>{y(),v.value=l},onFinish:()=>{j.processing=!1}};j.delete(route("downloadable_files.destroy",{id:j.id}),n)},de=C({settings:g.emailSettings}),O=C({settings:g.loginSettings}),be=async n=>{let l=n==="login"?O:de;l.processing=!0;let f={preserveScroll:!0,preserveState:!0,onSuccess:c=>{},onError:c=>{v.value=c},onFinish:()=>{l.processing=!1}};l.post(route("settings.update"),f)},$e=n=>{U.id=n.id,pe.value=n.name,R.value=!0},b=C({name:null,file:null}),U=C({id:null}),He=async()=>{var n;U.processing=!0,b.file=(n=b.file)!=null&&n.length?b.file[0]:null,b.post(route("downloadable_files.store"),{forceFormData:!0,onSuccess:l=>{y()},onError:l=>{v.value=l},onFinish:()=>{b.processing=!1}})},Ie=async()=>{U.processing=!0;let n={onSuccess:l=>{y()},onError:l=>{y(),v.value=l},onFinish:()=>{U.processing=!1}};U.delete(route("downloadable_files.destroy",{id:U.id}),n)};return(n,l)=>{const f=u("v-card-title"),c=u("v-text-field"),h=u("v-col"),ye=u("v-date-picker"),he=u("v-menu"),xe=u("v-locale-provider"),D=u("v-row"),G=u("v-container"),J=u("v-card-text"),F=u("v-btn-primary"),w=u("v-hover"),W=u("v-spacer"),N=u("v-btn"),K=u("v-card-actions"),Q=u("v-card"),X=u("v-dialog"),$=u("v-icon"),H=u("v-tooltip"),Ve=u("v-data-table-server"),Ae=u("v-file-input"),Se=qe("sortable-data-table");return x(),z(ue,null,[t(m(Ze),{title:"Einstellungen"}),t(Ge,{errors:v.value},{header:e(()=>[Qe]),default:e(()=>[s("div",Xe,[s("div",et,[tt,s("div",lt,[t(w,null,{default:e(({isHovering:o,props:r})=>[t(N,d(r,{color:o?"accent":"primary",dark:""}),{default:e(()=>[_(" ZEITRAUM HINZUFÜGEN "),t(X,{modelValue:q.value,"onUpdate:modelValue":l[7]||(l[7]=a=>q.value=a),activator:"parent",width:"80vw"},{default:e(()=>[t(Q,{height:"80vh"},{default:e(()=>[t(f,null,{default:e(()=>[at]),_:1}),t(J,null,{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(h,{cols:"12",sm:"4"},{default:e(()=>[t(c,{modelValue:m(k).year,"onUpdate:modelValue":l[0]||(l[0]=a=>m(k).year=a),"error-messages":v.value.year,label:"Jahr*",required:""},null,8,["modelValue","error-messages"])]),_:1}),t(h,{cols:"12",sm:"4"},{default:e(()=>[t(xe,{locale:"de"},{default:e(()=>[t(he,{modelValue:oe.value,"onUpdate:modelValue":l[3]||(l[3]=a=>oe.value=a),"return-value":P.value,"close-on-content-click":!1},{activator:e(({props:a})=>[t(c,d({label:"Erhebungsbeginn*",class:"tw-cursor-pointer","model-value":se.value,"prepend-icon":"mdi-calendar",readonly:""},a,{"error-messages":v.value.survey_start_date}),null,16,["model-value","error-messages"])]),default:e(()=>[t(ye,{"onUpdate:modelValue":[l[1]||(l[1]=a=>oe.value=!1),l[2]||(l[2]=a=>P.value=a)],modelValue:P.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024),t(h,{cols:"12",sm:"4"},{default:e(()=>[t(xe,{locale:"de"},{default:e(()=>[t(he,{modelValue:ne.value,"onUpdate:modelValue":l[6]||(l[6]=a=>ne.value=a),"return-value":T.value,"close-on-content-click":!1},{activator:e(({props:a})=>[t(c,d({label:"Erhebungsende*",class:"tw-cursor-pointer","model-value":re.value,"prepend-icon":"mdi-calendar",readonly:""},a,{"error-messages":v.value.survey_end_date}),null,16,["model-value","error-messages"])]),default:e(()=>[t(ye,{"onUpdate:modelValue":[l[4]||(l[4]=a=>ne.value=!1),l[5]||(l[5]=a=>T.value=a)],modelValue:T.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(K,null,{default:e(()=>[t(w,null,{default:e(({isHovering:a,props:p})=>[t(F,d({onClick:ie},p,{color:a?"accent":"primary"}),{default:e(()=>[_("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(W),t(w,null,{default:e(({isHovering:a,props:p})=>[t(N,d({onClick:y},p,{color:a?"accent":"primary"}),{default:e(()=>[_("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(w,null,{default:e(({isHovering:a,props:p})=>[t(F,d({onClick:je},p,{color:a?"accent":"primary"}),{default:e(()=>[_("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),t(X,{modelValue:Y.value,"onUpdate:modelValue":l[8]||(l[8]=o=>Y.value=o),width:"20vw"},{default:e(()=>[t(Q,{height:"30vh"},{default:e(()=>[t(J,null,{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(h,{cols:"12"},{default:e(()=>[s("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+E(_e.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(W),t(w,null,{default:e(({isHovering:o,props:r})=>[t(N,d({onClick:y},r,{color:o?"accent":"primary"}),{default:e(()=>[_("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(w,null,{default:e(({isHovering:o,props:r})=>[t(F,d({onClick:Oe},r,{color:o?"accent":"primary"}),{default:e(()=>[_("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),De((x(),I(Ve,{"items-per-page":V.value,"onUpdate:itemsPerPage":l[9]||(l[9]=o=>V.value=o),headers:Te,items:Ne.value,search:me.value,loading:M.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":we},{item:e(({item:o})=>[s("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[s("td",null,E(o.selectable.year),1),s("td",null,E(m(Pe)(o.selectable.survey_start_date,"sv-SE")),1),s("td",null,E(m(Pe)(o.selectable.survey_end_date,"sv-SE")),1),s("td",nt,[t(H,{location:"top"},{activator:e(({props:r})=>[t(m(Fe),{href:n.route("survey_time_periods.show",{id:o.selectable.id})},{default:e(()=>[t($,d(r,{size:"small",class:"tw-me-2"}),{default:e(()=>[_("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[st]),_:2},1024),t(H,{location:"top"},{activator:e(({props:r})=>[t($,d(r,{size:"small",class:"tw-me-2",onClick:a=>ze(o.raw)}),{default:e(()=>[_("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[rt]),_:2},1024)])],8,ot)]),"no-data":e(()=>[it]),bottom:e(()=>[]),_:1},8,["items-per-page","items","search","loading"])),[[Se]])]),s("div",dt,[ut,t(D,null,{default:e(()=>[t(h,{cols:"12",md:"6"},{default:e(()=>[(x(!0),z(ue,null,Ee(S.emailSettings,(o,r)=>{var a;return x(),z("div",ct,[t(c,{modelValue:m(de).settings[r],"onUpdate:modelValue":p=>m(de).settings[r]=p,"error-messages":(a=v.value)!=null&&a.settings?v.value.settings[r]:!1,label:`${ve.value[r]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"])])}),256))]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(h,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:e(()=>[t(w,null,{default:e(({isHovering:o,props:r})=>[t(F,d({onClick:l[10]||(l[10]=a=>be("email"))},r,{color:o?"accent":"primary"}),{default:e(()=>[_("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),s("div",mt,[s("div",_t,[pt,s("div",vt,[t(w,null,{default:e(({isHovering:o,props:r})=>[t(N,d(r,{color:o?"accent":"primary",dark:""}),{default:e(()=>[_(" DATEI HINZUFÜGEN "),t(X,{modelValue:Z.value,"onUpdate:modelValue":l[13]||(l[13]=a=>Z.value=a),activator:"parent",width:"80vw"},{default:e(()=>[t(Q,{height:"80vh"},{default:e(()=>[t(f,null,{default:e(()=>[ft]),_:1}),t(J,null,{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(h,{cols:"12",sm:"6"},{default:e(()=>[t(c,{class:"required",type:"text",modelValue:m(b).name,"onUpdate:modelValue":l[11]||(l[11]=a=>m(b).name=a),"error-messages":v.value.name,label:"Name",required:"",disabled:m(b).processing},null,8,["modelValue","error-messages","disabled"])]),_:1}),t(h,{cols:"12",sm:"6"},{default:e(()=>[t(Ae,{modelValue:m(b).file,"onUpdate:modelValue":l[12]||(l[12]=a=>m(b).file=a),"error-messages":v.value.file,label:"File",accept:"*/*","prepend-icon":"mdi-upload",disabled:m(b).processing},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(w,null,{default:e(({isHovering:a,props:p})=>[t(F,d({onClick:ie},p,{color:a?"accent":"primary"}),{default:e(()=>[_("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(W),t(w,null,{default:e(({isHovering:a,props:p})=>[t(N,d({onClick:y},p,{color:a?"accent":"primary"}),{default:e(()=>[_("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(w,null,{default:e(({isHovering:a,props:p})=>[t(F,d({onClick:He},p,{color:a?"accent":"primary"}),{default:e(()=>[_("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),t(X,{modelValue:R.value,"onUpdate:modelValue":l[14]||(l[14]=o=>R.value=o),width:"20vw"},{default:e(()=>[t(Q,{height:"30vh"},{default:e(()=>[t(J,null,{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(h,{cols:"12"},{default:e(()=>[s("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+E(pe.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[t(W),t(w,null,{default:e(({isHovering:o,props:r})=>[t(N,d({onClick:y},r,{color:o?"accent":"primary"}),{default:e(()=>[_("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(w,null,{default:e(({isHovering:o,props:r})=>[t(F,d({onClick:Ie},r,{color:o?"accent":"primary"}),{default:e(()=>[_("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),De((x(),I(Ve,{"items-per-page":V.value,"onUpdate:itemsPerPage":l[15]||(l[15]=o=>V.value=o),headers:Ue,items:Ce.value,search:me.value,loading:M.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":we},{item:e(({item:o})=>{var r;return[s("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[s("td",null,E(o.selectable.name),1),s("td",null,E(m(Je)(o.selectable.created_at,"sv-SE")),1),s("td",wt,[(r=o.selectable)!=null&&r.path?(x(),I(H,{key:0,location:"top"},{activator:e(({props:a})=>[s("a",{href:o.selectable.path,download:""},[t($,d(a,{size:"small",class:"tw-me-2"}),{default:e(()=>[_("mdi-download")]),_:2},1040)],8,bt)]),default:e(()=>[yt]),_:2},1024)):Ye("",!0),t(H,{location:"top"},{activator:e(({props:a})=>[t(m(Fe),{href:n.route("downloadable_files.show",{id:o.selectable.id})},{default:e(()=>[t($,d(a,{size:"small",class:"tw-me-2"}),{default:e(()=>[_("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[ht]),_:2},1024),t(H,{location:"top"},{activator:e(({props:a})=>[t($,d(a,{size:"small",class:"tw-me-2",onClick:p=>$e(o.raw)}),{default:e(()=>[_("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[xt]),_:2},1024)])],8,gt)]}),"no-data":e(()=>[Vt]),bottom:e(()=>[]),_:1},8,["items-per-page","items","search","loading"])),[[Se]])]),s("div",St,[kt,t(D,null,{default:e(()=>[t(h,{cols:"12"},{default:e(()=>[(x(!0),z(ue,null,Ee(S.loginSettings,(o,r)=>{var a;return x(),z("div",Dt,[r==="login_form_additional_html"?(x(),I(Ke,{key:0,modelValue:m(O).settings[r],"onUpdate:modelValue":p=>m(O).settings[r]=p,minHeight:300},null,8,["modelValue","onUpdate:modelValue"])):(x(),I(c,{key:1,modelValue:m(O).settings[r],"onUpdate:modelValue":p=>m(O).settings[r]=p,"error-messages":(a=v.value)!=null&&a.settings?v.value.settings[r]:!1,label:`${ve.value[r]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"]))])}),256))]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(h,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:e(()=>[t(w,null,{default:e(({isHovering:o,props:r})=>[t(F,d({onClick:l[16]||(l[16]=a=>be("login"))},r,{color:o?"accent":"primary"}),{default:e(()=>[_("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Ct as default};
