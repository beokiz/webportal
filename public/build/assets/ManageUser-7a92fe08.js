import{d as S}from"./index-a1b09b95.js";import{K as T,j as V,k as j,T as y,r as d,o as U,f as z,a as e,u as r,w as l,F as M,Z as O,b as g,c as Z,m as h,h as A,i as L,d as B}from"./app-680a6f50.js";import{_ as R}from"./AuthenticatedLayout-07097d1d.js";import"./ApplicationLogo-f89ab80c.js";const $=g("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Benutzer verwalten",-1),I={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},K=g("span",null,"E-Mail wurde nicht verifiziert",-1),D={class:"tw-flex tw-justify-between"},W={__name:"ManageUser",props:{user:Object,errors:Object,roles:Array,from:String},setup(k){const v=k;S.Inertia.on("success",n=>{let s=n.detail.page.props;n.detail.page.component==="Users/Partials/ManageUser"&&s&&(t.value=s.user)}),T().props.auth.user;const t=V(v.user),u=V(v.errors||{});V(!1);const E=j(()=>{if(v.from){const n=v.from.split(";");if(n.length===2)return route(n[0],{kita:n[1]})}return route("users.index")}),x=()=>{a.reset(),a.clearErrors(),i.reset(),i.clearErrors(),u.value={}},a=y({id:t.value.id,first_name:t.value.first_name,last_name:t.value.last_name,email:t.value.email,password:null,password_confirmation:null,role:t.value.primary_role_id,two_factor_auth_enabled:t.value.two_factor_auth_enabled,phone_number:t.value.phone_number}),F=async()=>{a.processing=!0,a.put(route("users.update",{user:a.id}),{preserveState:!1,onSuccess:n=>{x()},onError:n=>{u.value=n},onFinish:()=>{a.processing=!1}})},i=y({id:t.value.id}),q=async n=>{i.processing=!0;let s={onSuccess:c=>{x()},onError:c=>{u.value=c},onFinish:()=>{i.processing=!1}};i.post(route("users.send_verification_link",{user:i.id}),s)};return(n,s)=>{const c=d("v-btn"),w=d("v-hover"),m=d("v-col"),p=d("v-row"),b=d("v-container"),_=d("v-text-field"),P=d("v-select"),C=d("v-checkbox"),N=d("v-btn-primary");return U(),z(M,null,[e(r(O),{title:"Benutzer verwalten"}),e(R,{errors:u.value},{header:l(()=>[$]),default:l(()=>[g("div",I,[e(b,null,{default:l(()=>[e(p,null,{default:l(()=>[e(m,{cols:"12",class:"text-right"},{default:l(()=>[!t.value.email_verified_at||t.value.email_verified_at==="-"?(U(),Z(w,{key:0},{default:l(({isHovering:o,props:f})=>[e(c,h({class:"tw-ml-4 tw-mb-4"},f,{color:o?"accent":"primary",dark:"",onClick:q,disabled:r(a).processing||r(i).processing}),{default:l(()=>[K]),_:2},1040,["color","disabled"])]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(p,null,{default:l(()=>[e(m,{cols:"12",sm:"4"},{default:l(()=>[e(_,{modelValue:r(a).first_name,"onUpdate:modelValue":s[0]||(s[0]=o=>r(a).first_name=o),"error-messages":u.value.first_name,label:"Vorname",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(m,{cols:"12",sm:"4"},{default:l(()=>[e(_,{modelValue:r(a).last_name,"onUpdate:modelValue":s[1]||(s[1]=o=>r(a).last_name=o),"error-messages":u.value.last_name,label:"Nachname",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(m,{cols:"12",sm:"4"},{default:l(()=>[e(_,{modelValue:r(a).email,"onUpdate:modelValue":s[2]||(s[2]=o=>r(a).email=o),"error-messages":u.value.email,label:"Email",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,{cols:"12",sm:"4"},{default:l(()=>[e(_,{modelValue:r(a).phone_number,"onUpdate:modelValue":s[3]||(s[3]=o=>r(a).phone_number=o),"error-messages":u.value.phone_number,label:"Telefonnummer"},null,8,["modelValue","error-messages"])]),_:1}),e(m,{cols:"12",sm:"4"},{default:l(()=>[e(_,{type:"password",autocomplete:"new-password",modelValue:r(a).password,"onUpdate:modelValue":s[4]||(s[4]=o=>r(a).password=o),"error-messages":u.value.password,label:"Passwort",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(m,{cols:"12",sm:"4"},{default:l(()=>[e(_,{type:"password",modelValue:r(a).password_confirmation,"onUpdate:modelValue":s[5]||(s[5]=o=>r(a).password_confirmation=o),"error-messages":u.value.password_confirmation,label:"Passwort Bestätigung",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,{cols:"12",sm:"4"},{default:l(()=>[e(P,{disabled:n.$page.props.auth.user.id===t.value.id,modelValue:r(a).role,"onUpdate:modelValue":s[6]||(s[6]=o=>r(a).role=o),items:k.roles,"error-messages":u.value.role,"item-title":"human_name","item-value":"id",label:"Rolle",required:""},null,8,["disabled","modelValue","items","error-messages"])]),_:1}),e(m,{cols:"12",sm:"4"},{default:l(()=>[e(C,{modelValue:r(a).two_factor_auth_enabled,"onUpdate:modelValue":s[7]||(s[7]=o=>r(a).two_factor_auth_enabled=o),label:"Zwei-Faktor-Authentifizierung",value:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(p,null,{default:l(()=>[e(m,{cols:"12",md:"3",sm:"4"},{default:l(()=>[g("div",D,[e(w,null,{default:l(({isHovering:o,props:f})=>[e(r(L),{href:E.value},{default:l(()=>[e(c,h(f,{color:o?"primary":"accent"}),{default:l(()=>[B("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(w,null,{default:l(({isHovering:o,props:f})=>[e(N,h({onClick:F},f,{color:o?"accent":"primary",disabled:r(a).processing||r(i).processing}),{default:l(()=>[B(" Speichern ")]),_:2},1040,["color","disabled"])]),_:1})])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{W as default};
