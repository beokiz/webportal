import{d as Se}from"./index-669f99da.js";import{K as Ve,k as r,h as j,m as J,T as oe,r as n,n as Pe,f as Z,a as e,u as p,w as t,F as ne,o as O,Z as Ee,b as u,p as v,d as f,t as x,q as xe,c as De,i as Ne,O as Te}from"./app-c1b78740.js";import{_ as Ue}from"./AuthenticatedLayout-3fec963a.js";import{a as Fe,c as se,b as re}from"./common-1f9d3448.js";import"./ApplicationLogo-bb68a240.js";const Ce=u("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einstellungen",-1),Oe={class:"tw-flex tw-items-center tw-justify-end"},Ae=u("span",{class:"tw-text-h5"},"Neuer Rückmeldezeitraum",-1),Be={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Ie=["data-id","data-order"],ze={align:"center"},$e=u("span",null,"Einstellungen bearbeiten",-1),je=u("span",null,"Einstellungen löschen",-1),Je={class:"tw-py-6"},Ze={key:0,class:"tw-mb-4"},Le=u("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),Ke={__name:"SurveyTimePeriods",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(ue){const _=ue;Se.Inertia.on("success",o=>{let l=o.detail.page.props;o.detail.page.component==="SurveyTimePeriods/SurveyTimePeriods"&&l&&(D.value=l.currentPage,w.value=l.perPage,ie.value=l.orderBy,de.value=l.sort,L.value=l.total,ce.value=l.lastPage,k.value=l.filters.search??null)}),Ve().props.auth.user;const D=r(_.currentPage),w=r(_.perPage),ie=r(_.orderBy),de=r(_.sort),L=r(_.total),ce=r(_.lastPage),k=r(_.filters.search??null),ve=r(""),g=r(_.errors||{}),A=r(!1),N=r(!1),T=r(!1),M=r(null),B=r(!1),I=r(!1),U=r(null),F=r(null),S=r(),V=r(),_e=[{title:"Jahr",key:"year",width:"10%",sortable:!1},{title:"Altersgruppe (Jahre)",key:"age",width:"15%",sortable:!1},{title:"Erhebungsbeginn",key:"survey_start_date",width:"15%",sortable:!1},{title:"Erhebungsende",key:"survey_end_date",width:"50%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],me=j(()=>_.items.map(o=>{const l={...o};for(const d in l)(l[d]===null||l[d]===void 0)&&(l[d]="-");return l})),R=j(()=>k.value===null),pe=j(()=>k.value!==null);J(N,o=>{o||y()}),J(S,o=>{U.value=re(o)}),J(V,o=>{F.value=re(o)});const q=async({page:o,itemsPerPage:l,sortBy:d,clearFilters:b})=>{if(b&&(k.value=null),o===D.value&&b||R||pe){A.value=!0;let c={data:{page:o,per_page:l}};d&&d.length>0&&(c.data.order_by=d[0].key,c.data.sort=d[0].order),c.data.search=k.value,await Te.reload(c),D.value=o,w.value=l,A.value=!1}},fe=o=>{M.value=o.year,P.id=o.id,T.value=!0},P=oe({id:null}),ge=async()=>{P.processing=!0;let o={onSuccess:l=>{y()},onError:l=>{y(),g.value=l},onFinish:()=>{P.processing=!1}};P.delete(route("survey_time_periods.destroy",{id:P.id}),o)},y=()=>{N.value=!1,T.value=!1,i.reset(),i.clearErrors(),U.value=null,F.value=null,g.value={}},ye=()=>{i.reset(),i.clearErrors(),U.value=null,F.value=null},i=oe({year:null,age:null,survey_start_date:null,survey_end_date:null}),be=async()=>{i.processing=!0,i.survey_start_date=new Date(S.value).toLocaleString(),i.survey_end_date=new Date(V.value).toLocaleString(),i.post(route("survey_time_periods.store"),{onSuccess:o=>{y()},onError:o=>{g.value=o},onFinish:()=>{i.processing=!1}})};return(o,l)=>{const d=n("v-card-title"),b=n("v-text-field"),c=n("v-col"),G=n("v-date-picker"),H=n("v-menu"),K=n("v-locale-provider"),z=n("v-row"),he=n("v-select"),Q=n("v-container"),W=n("v-card-text"),$=n("v-btn-primary"),h=n("v-hover"),X=n("v-spacer"),C=n("v-btn"),Y=n("v-card-actions"),ee=n("v-card"),te=n("v-dialog"),le=n("v-icon"),ae=n("v-tooltip"),we=n("v-data-table-server"),ke=Pe("sortable-data-table");return O(),Z(ne,null,[e(p(Ee),{title:"Einstellungen"}),e(Ue,{errors:g.value},{header:t(()=>[Ce,u("div",Oe,[e(h,null,{default:t(({isHovering:s,props:m})=>[e(C,v(m,{color:s?"accent":"primary",dark:""}),{default:t(()=>[f(" ZEITRAUM HINZUFÜGEN "),e(te,{modelValue:N.value,"onUpdate:modelValue":l[8]||(l[8]=a=>N.value=a),activator:"parent",width:"80vw"},{default:t(()=>[e(ee,{height:"80vh"},{default:t(()=>[e(d,null,{default:t(()=>[Ae]),_:1}),e(W,null,{default:t(()=>[e(Q,null,{default:t(()=>[e(z,null,{default:t(()=>[e(c,{cols:"12",sm:"6"},{default:t(()=>[e(b,{modelValue:p(i).year,"onUpdate:modelValue":l[0]||(l[0]=a=>p(i).year=a),"error-messages":g.value.year,label:"Jahr*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(c,{cols:"12",sm:"6"},{default:t(()=>[e(K,{locale:"de"},{default:t(()=>[e(H,{modelValue:B.value,"onUpdate:modelValue":l[3]||(l[3]=a=>B.value=a),"return-value":S.value,"close-on-content-click":!1},{activator:t(({props:a})=>[e(b,v({label:"Erhebungsbeginn*",class:"tw-cursor-pointer","model-value":U.value,"prepend-icon":"mdi-calendar",readonly:""},a),null,16,["model-value"])]),default:t(()=>[e(G,{"onUpdate:modelValue":[l[1]||(l[1]=a=>B.value=!1),l[2]||(l[2]=a=>S.value=a)],modelValue:S.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(z,null,{default:t(()=>[e(c,{cols:"12",sm:"6"},{default:t(()=>[e(he,{modelValue:p(i).age,"onUpdate:modelValue":l[4]||(l[4]=a=>p(i).age=a),items:p(Fe),"error-messages":g.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe (Jahre)*"},null,8,["modelValue","items","error-messages"])]),_:1}),e(c,{cols:"12",sm:"6"},{default:t(()=>[e(K,{locale:"de"},{default:t(()=>[e(H,{modelValue:I.value,"onUpdate:modelValue":l[7]||(l[7]=a=>I.value=a),"return-value":V.value,"close-on-content-click":!1},{activator:t(({props:a})=>[e(b,v({label:"Erhebungsende*",class:"tw-cursor-pointer","model-value":F.value,"prepend-icon":"mdi-calendar",readonly:""},a),null,16,["model-value"])]),default:t(()=>[e(G,{"onUpdate:modelValue":[l[5]||(l[5]=a=>I.value=!1),l[6]||(l[6]=a=>V.value=a)],modelValue:V.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[e(h,null,{default:t(({isHovering:a,props:E})=>[e($,v({onClick:ye},E,{color:a?"accent":"primary"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(X),e(h,null,{default:t(({isHovering:a,props:E})=>[e(C,v({onClick:y},E,{color:a?"accent":"primary"}),{default:t(()=>[f("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(h,null,{default:t(({isHovering:a,props:E})=>[e($,v({onClick:be},E,{color:a?"accent":"primary"}),{default:t(()=>[f("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})]),e(te,{modelValue:T.value,"onUpdate:modelValue":l[9]||(l[9]=s=>T.value=s),width:"20vw"},{default:t(()=>[e(ee,{height:"30vh"},{default:t(()=>[e(W,null,{default:t(()=>[e(Q,null,{default:t(()=>[e(z,null,{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[u("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+x(M.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(X),e(h,null,{default:t(({isHovering:s,props:m})=>[e(C,v({onClick:y},m,{color:s?"accent":"primary"}),{default:t(()=>[f("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(h,null,{default:t(({isHovering:s,props:m})=>[e($,v({onClick:ge},m,{color:s?"accent":"primary"}),{default:t(()=>[f("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:t(()=>[u("div",Be,[xe((O(),De(we,{"items-per-page":w.value,"onUpdate:itemsPerPage":l[11]||(l[11]=s=>w.value=s),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:_e,page:D.value,"items-length":L.value,items:me.value,search:ve.value,loading:A.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":q},{item:t(({item:s})=>[u("tr",{"data-id":s.selectable.id,"data-order":s.selectable.order},[u("td",null,x(s.selectable.year),1),u("td",null,x(s.selectable.age),1),u("td",null,x(p(se)(s.selectable.survey_start_date,"sv-SE")),1),u("td",null,x(p(se)(s.selectable.survey_end_date,"sv-SE")),1),u("td",ze,[e(ae,{location:"top"},{activator:t(({props:m})=>[e(p(Ne),{href:o.route("survey_time_periods.show",{id:s.selectable.id})},{default:t(()=>[e(le,v(m,{size:"small",class:"tw-me-2"}),{default:t(()=>[f("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[$e]),_:2},1024),e(ae,{location:"top"},{activator:t(({props:m})=>[e(le,v(m,{size:"small",class:"tw-me-2",onClick:a=>fe(s.raw)}),{default:t(()=>[f("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[je]),_:2},1024)])],8,Ie)]),"no-data":t(()=>[u("div",Je,[R.value?(O(),Z("h3",Ze,"Die Tabelle ist leer.")):(O(),Z(ne,{key:1},[Le,e(C,{color:"primary",onClick:l[10]||(l[10]=s=>q({page:1,itemsPerPage:w.value,clearFilters:!0}))},{default:t(()=>[f("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ke]])])]),_:1},8,["errors"])],64)}}};export{Ke as default};
