import{d as ae}from"./index-8603144b.js";import{K as oe,h,j as ne,k as se,s as re,T as U,r as i,o as ie,f as ue,a as e,u,w as t,F as de,Z as ce,b as c,t as z,m as p,d as f,i as K}from"./app-02fd3bc5.js";import{a as me}from"./common-b6d82cb9.js";import{S as _e}from"./sortable.esm-0d19b1d3.js";import{_ as pe}from"./AuthenticatedLayout-c1944133.js";import"./ApplicationLogo-7a9c53ba.js";const fe={class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},ve={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ge=c("h3",null,"Eigenschaften",-1),be=c("h3",null,"Zugeordnete Meilensteine",-1),he={class:"tw-flex tw-items-center tw-justify-end"},we=c("span",{class:"tw-text-h5"},"Neuer Meilenstein",-1),ye=["data-id","data-order"],Ve=c("span",null,"neu anordnen",-1),xe=c("span",null,"Meilenstein bearbeiten",-1),Se=c("span",null,"Meilenstein löschen",-1),ke=c("div",{class:"tw-py-6"},[c("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),De={__name:"ManageSubdomain",props:{subdomain:Object,errors:Object},setup(D){const q=D;ae.Inertia.on("success",o=>{let l=o.detail.page.props;o.detail.page.component==="Domains/Partials/ManageSubdomain"&&l&&(y.value=l.subdomain)}),oe().props.auth.user;const y=h(q.subdomain),_=h(q.errors||{}),P=h(!1),C=h(!1),G=h(null),M=h(!1),A=h(null),L=[{title:"Kürzel",key:"abbreviation",width:"10%",sortable:!1},{title:"Titel",key:"title",width:"20%",sortable:!1},{title:"Beschreibungstext",key:"text",width:"60%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],H=ne(()=>q.subdomain.milestones.map(o=>{const l={...o};for(const n in l)(l[n]===null||l[n]===void 0)&&(l[n]="-");return l}));se(M,o=>{o||w()}),re(()=>{const o={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(l){J(l)}};_e.create(document.querySelector(".v-data-table tbody"),o)});const w=()=>{M.value=!1,C.value=!1,r.reset(),r.clearErrors(),_.value={}},I=()=>{r.reset(),r.clearErrors(),v.reset(),v.clearErrors(),v.name=null},E=U({items:[]}),J=o=>{E.processing=!0;let l=[],n=0;[].forEach.call(o.from.querySelectorAll("tr"),function(m,g){m.setAttribute("data-order",n+g),l.push({id:m.getAttribute("data-id"),order:n+g})}),E.items=l,E.post(route("milestones.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:m=>{},onError:m=>{_.value=m},onFinish:()=>{E.processing=!1}})},Q=o=>{A.value=o.title,V.id=o.id,C.value=!0},V=U({id:null}),R=async()=>{V.processing=!0;let o={onSuccess:l=>{w()},onError:l=>{_.value=l},onFinish:()=>{V.processing=!1}};V.delete(route("milestones.destroy",{id:V.id}),o)},v=U({id:y.value.id,name:y.value.name}),W=async()=>{v.processing=!0;let o={preserveState:!1,onSuccess:l=>{w()},onError:l=>{_.value=l},onFinish:()=>{v.processing=!1}};v.put(route("subdomains.update",{subdomain:v.id}),o)},r=U({subdomain:y.value.id,abbreviation:null,title:null,text:null,emphasis:null,emphasis_daz:null,age:null}),X=async()=>{r.processing=!0,r.post(route("milestones.store"),{onSuccess:o=>{w()},onError:o=>{_.value=o},onFinish:()=>{r.processing=!1}})};return(o,l)=>{const n=i("v-col"),m=i("v-row"),g=i("v-container"),x=i("v-text-field"),S=i("v-btn"),b=i("v-hover"),F=i("v-btn-primary"),Y=i("v-card-title"),ee=i("v-select"),te=i("v-textarea"),Z=i("v-card-text"),B=i("v-spacer"),O=i("v-card-actions"),$=i("v-card"),j=i("v-dialog"),N=i("v-icon"),T=i("v-tooltip"),le=i("v-data-table-server");return ie(),ue(de,null,[e(u(ce),{title:`Verwalte Subdomäne ${D.subdomain.name}`},null,8,["title"]),e(pe,{errors:_.value},{header:t(()=>[c("h2",fe,z(`Verwalte Subdomäne ${D.subdomain.name}`),1)]),default:t(()=>[c("div",ve,[e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[ge]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(x,{modelValue:u(v).name,"onUpdate:modelValue":l[0]||(l[0]=a=>u(v).name=a),"error-messages":_.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(n,{cols:"12",sm:"6"},{default:t(()=>[e(b,null,{default:t(({isHovering:a,props:d})=>[e(S,p({onClick:I},d,{color:a?"primary":"accent"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:1})]),_:1}),e(n,{cols:"12",sm:"6",align:"right"},{default:t(()=>[e(b,null,{default:t(({isHovering:a,props:d})=>[e(u(K),{href:o.route("domains.show",{id:y.value.domain_id})},{default:t(()=>[e(S,p({class:"mr-2",variant:"text"},d,{color:a?"accent":"primary"}),{default:t(()=>[f("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(b,null,{default:t(({isHovering:a,props:d})=>[e(F,p({onClick:W},d,{color:a?"accent":"primary"}),{default:t(()=>[f("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(m,{class:"tw-border-t-8 tw-mt-8 tw-pt-8"},{default:t(()=>[e(n,{cols:"12",sm:"6"},{default:t(()=>[be]),_:1}),e(n,{cols:"12",sm:"6"},{default:t(()=>[c("div",he,[e(b,null,{default:t(({isHovering:a,props:d})=>[e(S,p(d,{color:a?"accent":"primary",dark:""}),{default:t(()=>[f(" Meilenstein hinzufügen "),e(j,{modelValue:M.value,"onUpdate:modelValue":l[7]||(l[7]=s=>M.value=s),activator:"parent",width:"80vw"},{default:t(()=>[e($,{height:"80vh"},{default:t(()=>[e(Y,null,{default:t(()=>[we]),_:1}),e(Z,null,{default:t(()=>[e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(n,{cols:"12",sm:"3"},{default:t(()=>[e(x,{modelValue:u(r).abbreviation,"onUpdate:modelValue":l[1]||(l[1]=s=>u(r).abbreviation=s),"error-messages":_.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:t(()=>[e(ee,{modelValue:u(r).age,"onUpdate:modelValue":l[2]||(l[2]=s=>u(r).age=s),items:u(me),"error-messages":_.value.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:t(()=>[e(x,{modelValue:u(r).emphasis,"onUpdate:modelValue":l[3]||(l[3]=s=>u(r).emphasis=s),"error-messages":_.value.emphasis,type:"number",label:"Gewichtung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"3"},{default:t(()=>[e(x,{modelValue:u(r).emphasis_daz,"onUpdate:modelValue":l[4]||(l[4]=s=>u(r).emphasis_daz=s),"error-messages":_.value.emphasis_daz,type:"number",label:"Gewichtung mit Daz*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(x,{modelValue:u(r).title,"onUpdate:modelValue":l[5]||(l[5]=s=>u(r).title=s),"error-messages":_.value.title,label:"Titel*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(te,{modelValue:u(r).text,"onUpdate:modelValue":l[6]||(l[6]=s=>u(r).text=s),"error-messages":_.value.text,label:"Beschreibungstext*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(b,null,{default:t(({isHovering:s,props:k})=>[e(F,p({onClick:I},k,{color:s?"primary":"accent"}),{default:t(()=>[f("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(B),e(b,null,{default:t(({isHovering:s,props:k})=>[e(S,p({onClick:w},k,{color:s?"accent":"primary"}),{default:t(()=>[f("Zurück")]),_:2},1040,["color"])]),_:2},1024),e(b,null,{default:t(({isHovering:s,props:k})=>[e(F,p({onClick:X},k,{color:s?"accent":"primary"}),{default:t(()=>[f("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(j,{modelValue:C.value,"onUpdate:modelValue":l[8]||(l[8]=a=>C.value=a),width:"20vw"},{default:t(()=>[e($,{height:"30vh"},{default:t(()=>[e(Z,null,{default:t(()=>[e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[c("p",null,"Sind Sie sicher, dass Sie den Meilenstein "+z(A.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(B),e(b,null,{default:t(({isHovering:a,props:d})=>[e(S,p({onClick:w},d,{color:a?"accent":"primary"}),{default:t(()=>[f("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(b,null,{default:t(({isHovering:a,props:d})=>[e(F,p({onClick:R},d,{color:a?"accent":"primary"}),{default:t(()=>[f("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(le,{"items-per-page":-1,headers:L,items:H.value,loading:P.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:t(({item:a})=>[c("tr",{"data-id":a.id,"data-order":a.order},[c("td",null,z(a.abbreviation),1),c("td",null,z(a.title),1),c("td",null,z(a.text),1),c("td",null,[e(T,{location:"top"},{activator:t(({props:d})=>[e(N,p({draggable:"true",onDragstart:s=>G.value=a,color:"primary"},d,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:t(()=>[f("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:t(()=>[Ve]),_:2},1024),e(T,{location:"top"},{activator:t(({props:d})=>[e(u(K),{href:o.route("milestones.show",{id:a.id})},{default:t(()=>[e(N,p(d,{size:"small",class:"tw-me-2"}),{default:t(()=>[f("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[xe]),_:2},1024),e(T,{location:"top"},{activator:t(({props:d})=>[e(N,p(d,{size:"small",class:"tw-me-2",onClick:s=>Q(a)}),{default:t(()=>[f("mdi-delete ")]),_:2},1040,["onClick"])]),default:t(()=>[Se]),_:2},1024)])],8,ye)]),"no-data":t(()=>[ke]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{De as default};
