import{d as F}from"./index-532baf4b.js";import{K as P,l as f,h as E,T as N,r as m,o as T,f as j,a as e,u as r,w as a,F as z,Z as A,b as v,i as C,A as V,d as x}from"./app-e3b52d3a.js";import{_ as O}from"./AuthenticatedLayout-be37f04c.js";import"./ApplicationLogo-8cab8e64.js";const S=v("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Benutzer verwalten",-1),Z={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},I={class:"tw-flex tw-justify-between"},D={__name:"ManageUser",props:{user:Object,errors:Object,roles:Array},setup(w){const p=w;F.Inertia.on("success",u=>{let l=u.detail.page.props;u.detail.page.component==="Users/Partials/ManageUser"&&l&&(d.value=l.user)}),P().props.auth.user;const d=f(p.user),n=f(p.errors||{});f(!1),E(()=>p.items.map(u=>{const l={...u};for(const t in l)(l[t]===null||l[t]===void 0)&&(l[t]="-");return l}));const y=()=>{o.reset(),o.clearErrors(),n.value={}},o=N({id:d.value.id,first_name:d.value.first_name,last_name:d.value.last_name,email:d.value.email,role:d.value.primary_role_id,two_factor_auth_enabled:d.value.two_factor_auth_enabled}),h=async()=>{o.processing=!0;let u={preserveState:!1,onSuccess:l=>{y()},onError:l=>{n.value=l},onFinish:()=>{o.processing=!1}};o.put(route("users.update",{user:o.id}),u)};return(u,l)=>{const t=m("v-text-field"),i=m("v-col"),_=m("v-row"),U=m("v-select"),k=m("v-checkbox"),g=m("v-container"),q=m("v-btn"),b=m("v-hover"),B=m("v-btn-primary");return T(),j(z,null,[e(r(A),{title:"Benutzer verwalten"}),e(O,{errors:n.value},{header:a(()=>[S]),default:a(()=>[v("div",Z,[e(g,null,{default:a(()=>[e(_,null,{default:a(()=>[e(i,{cols:"12",sm:"4"},{default:a(()=>[e(t,{modelValue:r(o).first_name,"onUpdate:modelValue":l[0]||(l[0]=s=>r(o).first_name=s),"error-messages":n.value.first_name,label:"Vorname",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",sm:"4"},{default:a(()=>[e(t,{modelValue:r(o).last_name,"onUpdate:modelValue":l[1]||(l[1]=s=>r(o).last_name=s),"error-messages":n.value.last_name,label:"Nachname",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",sm:"4"},{default:a(()=>[e(t,{modelValue:r(o).email,"onUpdate:modelValue":l[2]||(l[2]=s=>r(o).email=s),"error-messages":n.value.email,label:"Email",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:a(()=>[e(i,{cols:"12",sm:"4"},{default:a(()=>[e(t,{type:"password",autocomplete:"new-password",modelValue:r(o).password,"onUpdate:modelValue":l[3]||(l[3]=s=>r(o).password=s),"error-messages":n.value.password,label:"Passwort",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",sm:"4"},{default:a(()=>[e(t,{type:"password",modelValue:r(o).password_confirmation,"onUpdate:modelValue":l[4]||(l[4]=s=>r(o).password_confirmation=s),"error-messages":n.value.password_confirmation,label:"Passwort Bestätigung",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",sm:"4"},{default:a(()=>[e(U,{disabled:u.$page.props.auth.user.id===d.value.id,modelValue:r(o).role,"onUpdate:modelValue":l[5]||(l[5]=s=>r(o).role=s),items:w.roles,"error-messages":n.value.role,"item-title":"human_name","item-value":"id",label:"Rolle",required:""},null,8,["disabled","modelValue","items","error-messages"])]),_:1})]),_:1}),e(_,null,{default:a(()=>[e(i,{cols:"12",sm:"4"},{default:a(()=>[e(k,{modelValue:r(o).two_factor_auth_enabled,"onUpdate:modelValue":l[6]||(l[6]=s=>r(o).two_factor_auth_enabled=s),label:"Zwei-Faktor-Authentifizierung",value:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,null,{default:a(()=>[e(i,{cols:"12",md:"3",sm:"4"},{default:a(()=>[v("div",I,[e(b,null,{default:a(({isHovering:s,props:c})=>[e(r(C),{href:u.route("users.index")},{default:a(()=>[e(q,V(c,{color:s?"primary":"accent"}),{default:a(()=>[x("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(b,null,{default:a(({isHovering:s,props:c})=>[e(B,V({onClick:h},c,{color:s?"accent":"primary"}),{default:a(()=>[x("Speichern")]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{D as default};
