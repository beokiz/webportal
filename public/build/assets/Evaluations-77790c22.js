import{d as te}from"./index-351153f0.js";import{K as ae,k as r,h as le,m as oe,T as z,r as n,n as se,o as P,f as ne,a,u,w as t,F as re,Z as ie,b as s,i as A,d as v,t as m,p as w,q as ce,c as F,g as de,O as ue}from"./app-a335d2ee.js";import{f as x}from"./common-ba477221.js";import{_ as _e}from"./AuthenticatedLayout-e27e28a1.js";import"./ApplicationLogo-89424e05.js";const pe=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Evaluationen",-1),ve={class:"tw-flex tw-items-center tw-justify-end"},me={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},fe=["data-id","data-order"],ge={align:"center"},he=s("span",null,"Einrichtung bearbeiten",-1),be=s("span",null,"Einrichtung löschen",-1),we=s("div",{class:"tw-py-6"},[s("template",null,[s("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.")])],-1),De={__name:"Evaluations",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(I){const c=I;te.Inertia.on("success",l=>{let e=l.detail.page.props;l.detail.page.component==="Evaluations/Evaluations"&&e&&(f.value=e.currentPage,g.value=e.perPage,O.value=e.orderBy,U.value=e.sort,S.value=e.total,j.value=e.lastPage)}),ae().props.auth.user;const f=r(c.currentPage),g=r(c.perPage),O=r(c.orderBy),U=r(c.sort),S=r(c.total),j=r(c.lastPage),$=r(""),y=r(c.errors||{}),k=r(!1),D=r(!1),h=r(!1),N=r(null);r(null);const Z=[{title:"UUID",key:"uuid",width:"40%",sortable:!1},{title:"Zullet bearbeitet",key:"updated_at",width:"15%",sortable:!1},{title:"Abgegeben am",key:"created_at",width:"15%",sortable:!1},{title:"Bearbetungszeit endet",key:"finished_at",width:"20%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],q=le(()=>c.items.map(l=>{const e={...l};for(const i in e)(e[i]===null||e[i]===void 0)&&(e[i]="-");return e}));oe(D,l=>{l||b()});const K=async({page:l,itemsPerPage:e,sortBy:i,clearFilters:E})=>{if(l===f.value&&E){k.value=!0;let p={data:{page:l,per_page:e}};i&&i.length>0&&(p.data.order_by=i[0].key,p.data.sort=i[0].order),await ue.reload(p),f.value=l,g.value=e,k.value=!1}},L=l=>{N.value=l.uuid,_.id=l.id,h.value=!0},_=z({id:null}),G=async()=>{_.processing=!0;let l={onSuccess:e=>{b()},onError:e=>{b(),y.value=e},onFinish:()=>{_.processing=!1}};_.delete(route("evaluations.destroy",{id:_.id}),l)},b=()=>{D.value=!1,h.value=!1,B.reset(),B.clearErrors(),y.value={}},B=z({age:null,uuid:null,is_daz:!1,ratings:[]});return(l,e)=>{const i=n("v-col"),E=n("v-row"),p=n("v-container"),H=n("v-card-text"),J=n("v-spacer"),M=n("v-btn"),C=n("v-hover"),Q=n("v-btn-primary"),R=n("v-card-actions"),W=n("v-card"),X=n("v-dialog"),T=n("v-icon"),V=n("v-tooltip"),Y=n("v-data-table-server"),ee=se("sortable-data-table");return P(),ne(re,null,[a(u(ie),{title:"Evaluationen"}),a(_e,{errors:y.value},{header:t(()=>[pe,s("div",ve,[a(u(A),{href:l.route("evaluations.create")},{default:t(()=>[v(" Anlegen ")]),_:1},8,["href"])]),a(X,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o),width:"20vw"},{default:t(()=>[a(W,{height:"30vh"},{default:t(()=>[a(H,null,{default:t(()=>[a(p,null,{default:t(()=>[a(E,null,{default:t(()=>[a(i,{cols:"12"},{default:t(()=>[s("p",null,"Sind Sie sicher, dass Sie die Einrichtung "+m(N.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),a(R,null,{default:t(()=>[a(J),a(C,null,{default:t(({isHovering:o,props:d})=>[a(M,w({onClick:b},d,{color:o?"accent":"primary"}),{default:t(()=>[v("Abbrechen")]),_:2},1040,["color"])]),_:1}),a(C,null,{default:t(({isHovering:o,props:d})=>[a(Q,w({onClick:G},d,{color:o?"accent":"primary"}),{default:t(()=>[v("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:t(()=>[s("div",me,[ce((P(),F(Y,{"items-per-page":g.value,"onUpdate:itemsPerPage":e[1]||(e[1]=o=>g.value=o),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:Z,page:f.value,"items-length":S.value,items:q.value,search:$.value,loading:k.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":K},{item:t(({item:o})=>[s("tr",{"data-id":o.selectable.id,"data-order":o.selectable.order},[s("td",null,m(o.selectable.uuid),1),s("td",null,m(u(x)(o.selectable.updated_at,"sv-SE")),1),s("td",null,m(u(x)(o.selectable.created_at,"sv-SE")),1),s("td",null,m(u(x)(o.selectable.finished_at,"sv-SE")),1),s("td",ge,[o.selectable.editable?(P(),F(V,{key:0,location:"top"},{activator:t(({props:d})=>[a(u(A),{href:l.route("evaluations.show",{id:o.selectable.id})},{default:t(()=>[a(T,w(d,{size:"small",class:"tw-me-2"}),{default:t(()=>[v("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[he]),_:2},1024)):de("",!0),a(V,{location:"top"},{activator:t(({props:d})=>[a(T,w(d,{size:"small",class:"tw-me-2",onClick:ye=>L(o.raw)}),{default:t(()=>[v("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[be]),_:2},1024)])],8,fe)]),"no-data":t(()=>[we]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])),[[ee]])])]),_:1},8,["errors"])],64)}}};export{De as default};
