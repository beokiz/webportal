import{d as pe}from"./index-1bf895f3.js";import{K as _e,j as n,k as B,l as me,T as H,r,o as x,f as E,a as t,u as h,w as e,F as M,Z as ve,b as s,c as Q,m as v,d as m,h as W,t as D,i as fe,O as ge}from"./app-3ecfff64.js";import{_ as he}from"./AuthenticatedLayout-94d66170.js";import"./ApplicationLogo-0e065a7f.js";const be=s("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Träger",-1),we={class:"tw-flex tw-items-center tw-justify-end"},ye=s("span",{class:"tw-text-h5"},"Verwalte Träger",-1),ke={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Pe=["data-id","data-order"],xe=s("span",null,"Träger bearbeiten",-1),Ve=s("span",null,"Träger löschen",-1),Se={class:"tw-py-6"},Ne={key:0,class:"tw-mb-4"},Oe=s("h3",{class:"tw-mb-4"},"Die Tabelle ist leer. Bitte setzen Sie die Suchfilter zurück.",-1),Ee={__name:"Operators",props:{items:Array,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(X){const p=X;pe.Inertia.on("success",l=>{let a=l.detail.page.props;l.detail.page.component==="Operators/Operators"&&a&&(V.value=a.currentPage,b.value=a.perPage,Y.value=a.orderBy,ee.value=a.sort,U.value=a.total,te.value=a.lastPage,w.value=a.filters.search??null)}),_e().props.auth.user;const V=n(p.currentPage),b=n(p.perPage),Y=n(p.orderBy),ee=n(p.sort),U=n(p.total),te=n(p.lastPage),w=n(p.filters.search??null),ae=n(""),y=n(p.errors||{}),C=n(!1),S=n(!1),N=n(!1),$=n(null),le=[{title:"Name",key:"name",width:"45%",sortable:!0},{title:"Selbstschulend",key:"self_training",width:"45%",sortable:!0},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],oe=B(()=>p.items.map(l=>{const a={...l};for(const u in a)(a[u]===null||a[u]===void 0)&&(a[u]="-");return a})),j=B(()=>w.value===null),re=B(()=>w.value!==null);me(S,l=>{l||f()});const z=async({page:l,itemsPerPage:a,sortBy:u,clearFilters:O})=>{if(O&&(w.value=null),l===V.value&&O||j||re){C.value=!0;let d={data:{page:l,per_page:a}};u&&u.length>0?(d.data.order_by=u[0].key,d.data.sort=u[0].order):(d.data.order_by=null,d.data.sort=null),d.data.search=w.value,await ge.reload(d),V.value=l,b.value=a,C.value=!1}},ne=l=>{$.value=l.name,k.id=l.id,N.value=!0},k=H({id:null}),se=async()=>{k.processing=!0;let l={onSuccess:a=>{f()},onError:a=>{f(),y.value=a},onFinish:()=>{k.processing=!1}};k.delete(route("operators.destroy",{id:k.id}),l)},f=()=>{S.value=!1,N.value=!1,c.reset(),c.clearErrors(),y.value={}},ie=()=>{c.reset(),c.clearErrors()},c=H({name:null,self_training:!1}),ce=async()=>{c.processing=!0,c.post(route("operators.store"),{onSuccess:l=>{f()},onError:l=>{y.value=l},onFinish:()=>{c.processing=!1}})};return(l,a)=>{const u=r("v-card-title"),O=r("v-text-field"),d=r("v-col"),ue=r("v-checkbox"),A=r("v-row"),I=r("v-container"),Z=r("v-card-text"),F=r("v-btn-primary"),g=r("v-hover"),q=r("v-spacer"),T=r("v-btn"),J=r("v-card-actions"),K=r("v-card"),L=r("v-dialog"),R=r("v-icon"),G=r("v-tooltip"),de=r("v-data-table-server");return x(),E(M,null,[t(h(ve),{title:"Träger"}),t(he,{errors:y.value},{header:e(()=>[be,s("div",we,[l.$page.props.auth.user.is_manager?W("",!0):(x(),Q(g,{key:0},{default:e(({isHovering:o,props:_})=>[t(T,v(_,{color:o?"accent":"primary",dark:""}),{default:e(()=>[m(" Anlegen "),t(L,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=i=>S.value=i),activator:"parent",width:"80vw"},{default:e(()=>[t(K,{height:"80vh"},{default:e(()=>[t(u,null,{default:e(()=>[ye]),_:1}),t(Z,null,{default:e(()=>[t(I,null,{default:e(()=>[t(A,null,{default:e(()=>[t(d,{cols:"12",sm:"6"},{default:e(()=>[t(O,{modelValue:h(c).name,"onUpdate:modelValue":a[0]||(a[0]=i=>h(c).name=i),"error-messages":y.value.name,label:"Name",required:""},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",sm:"6"},{default:e(()=>[t(ue,{modelValue:h(c).self_training,"onUpdate:modelValue":a[1]||(a[1]=i=>h(c).self_training=i),label:"Selbstschulend",value:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(J,null,{default:e(()=>[t(g,null,{default:e(({isHovering:i,props:P})=>[t(F,v({onClick:ie},P,{color:i?"accent":"primary"}),{default:e(()=>[m("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),t(q),t(g,null,{default:e(({isHovering:i,props:P})=>[t(T,v({onClick:f},P,{color:i?"accent":"primary"}),{default:e(()=>[m("Stornieren")]),_:2},1040,["color"])]),_:2},1024),t(g,null,{default:e(({isHovering:i,props:P})=>[t(F,v({onClick:ce},P,{color:i?"accent":"primary"}),{default:e(()=>[m("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1}))]),t(L,{modelValue:N.value,"onUpdate:modelValue":a[3]||(a[3]=o=>N.value=o),width:"20vw"},{default:e(()=>[t(K,{height:"30vh"},{default:e(()=>[t(Z,null,{default:e(()=>[t(I,null,{default:e(()=>[t(A,null,{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[s("p",null,"Sind Sie sicher, dass Sie die Träger "+D($.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(J,null,{default:e(()=>[t(q),t(g,null,{default:e(({isHovering:o,props:_})=>[t(T,v({onClick:f},_,{color:o?"accent":"primary"}),{default:e(()=>[m("Abbrechen")]),_:2},1040,["color"])]),_:1}),t(g,null,{default:e(({isHovering:o,props:_})=>[t(F,v({onClick:se},_,{color:o?"accent":"primary"}),{default:e(()=>[m("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[s("div",ke,[t(de,{"items-per-page":b.value,"onUpdate:itemsPerPage":a[5]||(a[5]=o=>b.value=o),"items-per-page-options":[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],"items-per-page-text":"Objekte pro Seite:",headers:le,page:V.value,"items-length":U.value,items:oe.value,search:ae.value,loading:C.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":z},{item:e(({item:o})=>[s("tr",{"data-id":o.id,"data-order":o.order},[s("td",null,D(o.name),1),s("td",null,D(o.self_training?"Ja":"Nein"),1),s("td",null,[t(G,{location:"top"},{activator:e(({props:_})=>[t(h(fe),{href:l.route("operators.show",{id:o.id})},{default:e(()=>[t(R,v(_,{size:"small",class:"tw-me-2"}),{default:e(()=>[m("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:e(()=>[xe]),_:2},1024),l.$page.props.auth.user.is_manager?W("",!0):(x(),Q(G,{key:0,location:"top"},{activator:e(({props:_})=>[t(R,v(_,{size:"small",class:"tw-me-2",onClick:i=>ne(o)}),{default:e(()=>[m("mdi-delete")]),_:2},1040,["onClick"])]),default:e(()=>[Ve]),_:2},1024))])],8,Pe)]),"no-data":e(()=>[s("div",Se,[j.value?(x(),E("h3",Ne,"Die Tabelle ist leer.")):(x(),E(M,{key:1},[Oe,t(T,{color:"primary",onClick:a[4]||(a[4]=o=>z({page:1,itemsPerPage:b.value,clearFilters:!0}))},{default:e(()=>[m("Reset")]),_:1})],64))])]),_:1},8,["items-per-page","items-per-page-options","page","items-length","items","search","loading"])])]),_:1},8,["errors"])],64)}}};export{Ee as default};
