import{d as F}from"./index-7faf7f99.js";import{K as T,k as z,l as j,T as K,r as v,o as y,f as k,a as n,u as h,w as o,F as f,Z,b as t,s as D,p as I,d as E,t as x}from"./app-dc053b14.js";import{_ as q}from"./AuthenticatedLayout-b0aa7ae5.js";import{a as H}from"./common-ba477221.js";import"./ApplicationLogo-5da015cb.js";let b;const L=new Uint8Array(16);function M(){if(!b&&(b=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!b))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(L)}const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function O(e,a=0){return i[e[a+0]]+i[e[a+1]]+i[e[a+2]]+i[e[a+3]]+"-"+i[e[a+4]]+i[e[a+5]]+"-"+i[e[a+6]]+i[e[a+7]]+"-"+i[e[a+8]]+i[e[a+9]]+"-"+i[e[a+10]]+i[e[a+11]]+i[e[a+12]]+i[e[a+13]]+i[e[a+14]]+i[e[a+15]]}const P=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),A={randomUUID:P};function W(e,a,w){if(A.randomUUID&&!a&&!e)return A.randomUUID();e=e||{};const d=e.random||(e.rng||M)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,a){w=w||0;for(let l=0;l<16;++l)a[w+l]=d[l];return a}return O(d)}const G=t("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},x("Create"),-1),J={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},Q=t("h3",null,"Eigenschaften",-1),X={class:"subdomains-list-head"},Y=t("div",{class:"radio-wrap radio-head"},[t("span",null,"Noch Nicht")],-1),ee=t("div",{class:"radio-wrap radio-head"},[t("span",null,"Ansatzweise")],-1),te=t("div",{class:"radio-wrap radio-head"},[t("span",null,"Weitgehend")],-1),ne=t("div",{class:"radio-wrap radio-head"},[t("span",null,"Zuverlassig")],-1),ae={class:"milestone-list-text"},oe={class:"radio-wrap radio-content"},le=["name","onClick"],se={class:"radio-wrap radio-content"},ie=["name","onClick"],re={class:"radio-wrap radio-content"},de=["name","onClick"],ce={class:"radio-wrap radio-content"},ue=["name","onClick"],he={__name:"CreateEvaluation",props:{errors:Object,kitas:Array,domains:Array},setup(e){F.Inertia.on("success",u=>{u.detail.page.props,u.detail.page.component});const a=T().props.auth.user??{},w=z(null);z(!1),j(()=>{w.value=W(),l.uuid=w.value});const d=(u,m,c)=>{let _=l.ratings.findIndex(function(g){return g.domain===u});if(_!==-1){let g=l.ratings[_].milestones.findIndex(function(U){return U.id===m});g!==-1?l.ratings[_].milestones[g].value=c:l.ratings[_].milestones.push({id:m,value:c})}else l.ratings.push({domain:u,milestones:[{id:m,value:c}]})},l=K({age:null,uuid:null,is_daz:!1,user_id:a.id,kita_id:null,ratings:[]}),N=async()=>{l.processing=!0,l.post(route("evaluations.store"),{onSuccess:u=>{close()},onError:u=>{errors.value=u},onFinish:()=>{l.processing=!1}})};return(u,m)=>{const c=v("v-col"),_=v("v-row"),g=v("v-container"),U=v("v-text-field"),B=v("v-select"),R=v("v-checkbox"),S=v("v-btn"),C=v("v-hover"),$=v("v-btn-primary");return y(),k(f,null,[n(h(Z),{title:"Create"}),n(q,{errors:e.errors},{header:o(()=>[G]),default:o(()=>[t("div",J,[n(g,null,{default:o(()=>[n(_,null,{default:o(()=>[n(c,{cols:"12"},{default:o(()=>[Q]),_:1})]),_:1})]),_:1}),n(g,null,{default:o(()=>[n(_,null,{default:o(()=>[n(c,{cols:"12",sm:"4"},{default:o(()=>[n(U,{modelValue:h(l).uuid,"onUpdate:modelValue":m[0]||(m[0]=s=>h(l).uuid=s),"error-messages":e.errors.uuid,readonly:"",label:"Bezeichner der Einschatzung",required:""},null,8,["modelValue","error-messages"])]),_:1}),n(c,{cols:"12",sm:"3"},{default:o(()=>[n(B,{modelValue:h(l).age,"onUpdate:modelValue":m[1]||(m[1]=s=>h(l).age=s),items:h(H),"error-messages":e.errors.age,"item-title":"age_name","item-value":"age_number",label:"Altersgruppe"},null,8,["modelValue","items","error-messages"])]),_:1}),n(c,{cols:"12",sm:"3"},{default:o(()=>[n(B,{modelValue:h(l).kita_id,"onUpdate:modelValue":m[2]||(m[2]=s=>h(l).kita_id=s),items:e.kitas,"error-messages":e.errors.kita_id,"item-title":"name","item-value":"id",label:"Kita"},null,8,["modelValue","items","error-messages"])]),_:1}),n(c,{cols:"12",sm:"2"},{default:o(()=>[n(R,{label:"Ist Daz"})]),_:1})]),_:1}),n(_,null,{default:o(()=>[(y(!0),k(f,null,D(e.domains,s=>(y(),k("div",{class:"domains-list-container",key:s.id},[t("h3",null,x(s.name),1),(y(!0),k(f,null,D(s.subdomains,p=>(y(),k("div",{class:"subdomains-list-container",key:p.id},[t("div",X,[t("h4",null,x(p.name),1),Y,ee,te,ne]),(y(!0),k(f,null,D(p.milestones,r=>(y(),k("div",{class:"milestone-list-container",key:r.id},[t("h5",null,x(r.abbreviation),1),t("div",ae,[t("span",null,x(r.title),1),t("p",null,x(r.text),1)]),t("fieldset",null,[t("div",oe,[t("input",{type:"radio",name:r.id+"check-radio",value:"1",onClick:V=>d(s.id,r.id,1)},null,8,le)]),t("div",se,[t("input",{type:"radio",name:r.id+"check-radio",value:"2",onClick:V=>d(s.id,r.id,2)},null,8,ie)]),t("div",re,[t("input",{type:"radio",name:r.id+"check-radio",value:"3",onClick:V=>d(s.id,r.id,3)},null,8,de)]),t("div",ce,[t("input",{type:"radio",name:r.id+"check-radio",value:"4",onClick:V=>d(s.id,r.id,4)},null,8,ue)])])]))),128))]))),128))]))),128))]),_:1})]),_:1}),n(g,null,{default:o(()=>[n(_,null,{default:o(()=>[n(c,{cols:"12",sm:"6"},{default:o(()=>[n(C,null,{default:o(({isHovering:s,props:p})=>[n(S,I({onClick:u.clear},p,{color:s?"primary":"accent"}),{default:o(()=>[E("Back")]),_:2},1040,["onClick","color"])]),_:1})]),_:1}),n(c,{cols:"12",sm:"6",align:"right"},{default:o(()=>[n(C,null,{default:o(({isHovering:s,props:p})=>[n(S,I({class:"mr-2",variant:"text"},p,{color:s?"accent":"primary"}),{default:o(()=>[E("Save")]),_:2},1040,["color"])]),_:1}),n(C,null,{default:o(({isHovering:s,props:p})=>[n($,I({onClick:N},p,{color:s?"accent":"primary"}),{default:o(()=>[E("Big save ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{he as default};
