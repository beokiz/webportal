import{d as se}from"./index-610258a2.js";import{K as ne,h as z,j as K,k as _e,s as ue,T as E,r as u,o as x,f as me,a as e,u as r,w as l,F as ie,Z as ce,b as m,t as $,c as N,g as F,m as h,d as p,i as L}from"./app-d6fa560e.js";import{S as he}from"./sortable.esm-0d19b1d3.js";import{_ as pe}from"./AuthenticatedLayout-3907ca41.js";import"./ApplicationLogo-17c3db88.js";const ge={class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},fe={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},ve=m("h3",null,"Eigenschaften",-1),we=m("p",null,"Schwellenwerte für Altersgruppe bis 2,5 Jahre",-1),be=m("p",null,"Schwellenwerte für Altersgruppe bis 4,5 Jahre",-1),ye=m("h3",null,"Zugeordnete Subdomänen",-1),ze={class:"tw-flex tw-items-center tw-justify-end"},Ve=m("span",{class:"tw-text-h5"},"Neue Subdomäne",-1),Se=["data-id","data-order"],ke=m("span",null,"Neu anordnen",-1),De=m("span",null,"Subdomäne bearbeiten",-1),xe=m("span",null,"Subdomäne löschen",-1),Ue=m("div",{class:"tw-py-6"},[m("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),Fe={__name:"ManageDomain",props:{domain:Object,errors:Object},setup(A){const I=A;se.Inertia.on("success",s=>{let o=s.detail.page.props;s.detail.page.component==="Domains/Partials/ManageDomain"&&o&&(c.value=o.domain)}),ne().props.auth.user;const c=z(I.domain),n=z(I.errors||{}),H=z(!1),U=z(!1),Q=z(null),C=z(!1),j=z(null),W=[{title:"Name",key:"first_name",width:"90%",sortable:!1},{title:"Aktion",key:"actions",width:"10%",sortable:!1,align:"center"}],y=K(()=>a.daz_dependent?3:6),X=K(()=>I.domain.subdomains.map(s=>{const o={...s};for(const d in o)(o[d]===null||o[d]===void 0)&&(o[d]="-");return o}));_e(C,s=>{s||V()}),ue(()=>{const s={handle:".v-data-table tbody .glyphicon-move",animation:150,onUpdate:function(o){Y(o)}};he.create(document.querySelector(".v-data-table tbody"),s)});const V=()=>{C.value=!1,U.value=!1,v.reset(),v.clearErrors(),n.value={}},G=()=>{v.reset(),v.clearErrors(),a.reset(),a.clearErrors(),a.daz_dependent=!1,a.name=null,a.abbreviation=null,a.age_2_red_threshold=null,a.age_2_red_threshold_daz=null,a.age_2_yellow_threshold=null,a.age_2_yellow_threshold_daz=null,a.age_4_red_threshold=null,a.age_4_red_threshold_daz=null,a.age_4_yellow_threshold=null,a.age_4_yellow_threshold_daz=null},q=E({items:[]}),Y=s=>{q.processing=!0;let o=[],d=0;[].forEach.call(s.from.querySelectorAll("tr"),function(i,w){i.setAttribute("data-order",d+w),o.push({id:i.getAttribute("data-id"),order:d+w})}),q.items=o,q.post(route("subdomains.reorder"),{preserveScroll:!0,preserveState:!1,onSuccess:i=>{},onError:i=>{n.value=i},onFinish:()=>{q.processing=!1}})},ee=s=>{j.value=s.name,S.id=s.id,U.value=!0},S=E({id:null}),le=async()=>{S.processing=!0;let s={onSuccess:o=>{V()},onError:o=>{n.value=o},onFinish:()=>{S.processing=!1}};S.delete(route("subdomains.destroy",{id:S.id}),s)},a=E({id:c.value.id,name:c.value.name,abbreviation:c.value.abbreviation,age_2_red_threshold:c.value.age_2_red_threshold,age_2_red_threshold_daz:c.value.age_2_red_threshold_daz,age_2_yellow_threshold:c.value.age_2_yellow_threshold,age_2_yellow_threshold_daz:c.value.age_2_yellow_threshold_daz,age_4_red_threshold:c.value.age_4_red_threshold,age_4_red_threshold_daz:c.value.age_4_red_threshold_daz,age_4_yellow_threshold:c.value.age_4_yellow_threshold,age_4_yellow_threshold_daz:c.value.age_4_yellow_threshold_daz,daz_dependent:c.value.daz_dependent}),ae=async()=>{a.processing=!0,a.daz_dependent||(a.age_2_red_threshold_daz=a.age_2_red_threshold,a.age_2_yellow_threshold_daz=a.age_2_yellow_threshold,a.age_4_red_threshold_daz=a.age_4_red_threshold,a.age_4_yellow_threshold_daz=a.age_4_yellow_threshold);let s={preserveState:!1,onSuccess:o=>{V()},onError:o=>{n.value=o},onFinish:()=>{a.processing=!1}};a.put(route("domains.update",{domain:a.id}),s)},v=E({name:null,domain:c.value.id}),oe=async()=>{v.processing=!0,v.post(route("subdomains.store"),{onSuccess:s=>{V()},onError:s=>{n.value=s},onFinish:()=>{v.processing=!1}})};return(s,o)=>{const d=u("v-col"),i=u("v-row"),w=u("v-container"),g=u("v-text-field"),te=u("v-switch"),Z=u("v-spacer"),k=u("v-btn"),b=u("v-hover"),B=u("v-btn-primary"),re=u("v-card-title"),R=u("v-card-text"),M=u("v-card-actions"),P=u("v-card"),J=u("v-dialog"),O=u("v-icon"),T=u("v-tooltip"),de=u("v-data-table-server");return x(),me(ie,null,[e(r(ce),{title:`Verwalte Domäne ${A.domain.name}`},null,8,["title"]),e(pe,{errors:n.value},{header:l(()=>[m("h2",ge,$(`Verwalte Domäne ${A.domain.name}`),1)]),default:l(()=>[m("div",fe,[e(w,null,{default:l(()=>[e(i,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[ve]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(i,null,{default:l(()=>[e(d,{cols:"12",sm:"3"},{default:l(()=>[e(g,{modelValue:r(a).abbreviation,"onUpdate:modelValue":o[0]||(o[0]=t=>r(a).abbreviation=t),"error-messages":n.value.abbreviation,label:"Kürzel*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:l(()=>[e(g,{modelValue:r(a).name,"onUpdate:modelValue":o[1]||(o[1]=t=>r(a).name=t),"error-messages":n.value.name,label:"Name der Domäne*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(d,{cols:"12",sm:"3"},{default:l(()=>[e(te,{modelValue:r(a).daz_dependent,"onUpdate:modelValue":o[2]||(o[2]=t=>r(a).daz_dependent=t),"defaults-target":r(a).daz_dependent,"hide-details":"",label:"Einstellen mit Daz"},null,8,["modelValue","defaults-target"])]),_:1})]),_:1}),e(i,{class:"mt-10"},{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[we]),_:1}),e(d,{cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_red_threshold,"onUpdate:modelValue":o[3]||(o[3]=t=>r(a).age_2_red_threshold=t),"error-messages":n.value.age_2_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(x(),N(d,{key:0,cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_red_threshold_daz,"onUpdate:modelValue":o[4]||(o[4]=t=>r(a).age_2_red_threshold_daz=t),"error-messages":n.value.age_2_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):F("",!0),e(d,{cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_yellow_threshold,"onUpdate:modelValue":o[5]||(o[5]=t=>r(a).age_2_yellow_threshold=t),"error-messages":n.value.age_2_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(x(),N(d,{key:1,cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_2_yellow_threshold_daz,"onUpdate:modelValue":o[6]||(o[6]=t=>r(a).age_2_yellow_threshold_daz=t),"error-messages":n.value.age_2_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):F("",!0)]),_:1}),e(i,null,{default:l(()=>[e(Z),e(d,{cols:"12"},{default:l(()=>[be]),_:1}),e(d,{cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_red_threshold,"onUpdate:modelValue":o[7]||(o[7]=t=>r(a).age_4_red_threshold=t),"error-messages":n.value.age_4_red_threshold,label:"Schwellwert Rot*",placeholder:"z.B. 5",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(x(),N(d,{key:0,cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_red_threshold_daz,"onUpdate:modelValue":o[8]||(o[8]=t=>r(a).age_4_red_threshold_daz=t),"error-messages":n.value.age_4_red_threshold_daz,label:"Schwellwert Rot mit Daz*",placeholder:"z.B. 3",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):F("",!0),e(d,{cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_yellow_threshold,"onUpdate:modelValue":o[9]||(o[9]=t=>r(a).age_4_yellow_threshold=t),"error-messages":n.value.age_4_yellow_threshold,label:"Schwellwert Gelb*",placeholder:"z.B. 10",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"]),r(a).daz_dependent?(x(),N(d,{key:1,cols:"12",sm:y.value},{default:l(()=>[e(g,{modelValue:r(a).age_4_yellow_threshold_daz,"onUpdate:modelValue":o[10]||(o[10]=t=>r(a).age_4_yellow_threshold_daz=t),"error-messages":n.value.age_4_yellow_threshold_daz,label:"Schwellwert Gelb mit Daz*",placeholder:"z.B. 8",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1},8,["sm"])):F("",!0)]),_:1}),e(i,null,{default:l(()=>[e(d,{cols:"12",sm:"6"},{default:l(()=>[e(b,null,{default:l(({isHovering:t,props:_})=>[e(k,h({onClick:G},_,{color:t?"primary":"accent"}),{default:l(()=>[p("Zurücksetzen")]),_:2},1040,["color"])]),_:1})]),_:1}),e(d,{cols:"12",sm:"6",align:"right"},{default:l(()=>[e(b,null,{default:l(({isHovering:t,props:_})=>[e(r(L),{href:s.route("domains.index")},{default:l(()=>[e(k,h({class:"mr-2",variant:"text"},_,{color:t?"accent":"primary"}),{default:l(()=>[p("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(b,null,{default:l(({isHovering:t,props:_})=>[e(B,h({onClick:ae},_,{color:t?"accent":"primary"}),{default:l(()=>[p("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(i,{class:"tw-border-t-8 tw-mt-8 tw-pt-8"},{default:l(()=>[e(d,{cols:"12",sm:"6"},{default:l(()=>[ye]),_:1}),e(d,{cols:"12",sm:"6"},{default:l(()=>[m("div",ze,[e(b,null,{default:l(({isHovering:t,props:_})=>[e(k,h(_,{color:t?"accent":"primary",dark:""}),{default:l(()=>[p(" Subdomäne hinzufügen "),e(J,{modelValue:C.value,"onUpdate:modelValue":o[12]||(o[12]=f=>C.value=f),activator:"parent",width:"80vw"},{default:l(()=>[e(P,{height:"80vh"},{default:l(()=>[e(re,null,{default:l(()=>[Ve]),_:1}),e(R,null,{default:l(()=>[e(w,null,{default:l(()=>[e(i,null,{default:l(()=>[e(d,{cols:"12",sm:"12"},{default:l(()=>[e(g,{modelValue:r(v).name,"onUpdate:modelValue":o[11]||(o[11]=f=>r(v).name=f),"error-messages":n.value.name,label:"Name der Subdomäne*",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(M,null,{default:l(()=>[e(b,null,{default:l(({isHovering:f,props:D})=>[e(B,h({onClick:G},D,{color:f?"primary":"accent"}),{default:l(()=>[p("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(Z),e(b,null,{default:l(({isHovering:f,props:D})=>[e(k,h({onClick:V},D,{color:f?"accent":"primary"}),{default:l(()=>[p("Zurück")]),_:2},1040,["color"])]),_:2},1024),e(b,null,{default:l(({isHovering:f,props:D})=>[e(B,h({onClick:oe},D,{color:f?"accent":"primary"}),{default:l(()=>[p("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(J,{modelValue:U.value,"onUpdate:modelValue":o[13]||(o[13]=t=>U.value=t),width:"20vw"},{default:l(()=>[e(P,{height:"30vh"},{default:l(()=>[e(R,null,{default:l(()=>[e(w,null,{default:l(()=>[e(i,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[m("p",null,"Sind Sie sicher, dass Sie die Subdomäne "+$(j.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(M,null,{default:l(()=>[e(Z),e(b,null,{default:l(({isHovering:t,props:_})=>[e(k,h({onClick:V},_,{color:t?"accent":"primary"}),{default:l(()=>[p("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(b,null,{default:l(({isHovering:t,props:_})=>[e(B,h({onClick:le},_,{color:t?"accent":"primary"}),{default:l(()=>[p("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(i,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(de,{"items-per-page":-1,headers:W,items:X.value,loading:H.value,class:"data-table-container data-table-container-hide-footer elevation-1","item-value":"name"},{item:l(({item:t})=>[m("tr",{"data-id":t.id,"data-order":t.order},[m("td",null,$(t.name),1),m("td",null,[e(T,{location:"top"},{activator:l(({props:_})=>[e(O,h({draggable:"true",onDragstart:f=>Q.value=t,color:"primary"},_,{size:"small",class:"tw-me-2 glyphicon-move"}),{default:l(()=>[p("mdi-arrow-collapse-vertical ")]),_:2},1040,["onDragstart"])]),default:l(()=>[ke]),_:2},1024),e(T,{location:"top"},{activator:l(({props:_})=>[e(r(L),{href:s.route("subdomains.show",{id:t.id})},{default:l(()=>[e(O,h(_,{size:"small",class:"tw-me-2"}),{default:l(()=>[p("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:l(()=>[De]),_:2},1024),e(T,{location:"top"},{activator:l(({props:_})=>[e(O,h(_,{size:"small",class:"tw-me-2",onClick:f=>ee(t)}),{default:l(()=>[p("mdi-delete ")]),_:2},1040,["onClick"])]),default:l(()=>[xe]),_:2},1024)])],8,Se)]),"no-data":l(()=>[Ue]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Fe as default};
