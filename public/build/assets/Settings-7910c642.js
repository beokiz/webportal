import{d as Ie}from"./index-7e9b5cd6.js";import{h as d,k as I,r as i,o as k,f as z,a as e,K as Ae,s as Le,j as Se,T as C,u as m,w as t,F as ue,Z as Be,b as r,m as u,d as _,t as E,i as ke,l as De,c as ie,g as Me,O as Ze}from"./app-d87e99e6.js";import{_ as qe}from"./AuthenticatedLayout-d9f6604b.js";import{c as X,f as Fe,b as Ye}from"./common-b6d82cb9.js";import"./sortable.esm-0d19b1d3.js";import"./ApplicationLogo-7729fd5c.js";const Re={class:"vuetify-pro-tiptap-wrap"},Ge={__name:"TiptapEditor",props:{modelValue:{type:String},label:{type:String,default:null},minHeight:{type:Number,default:200},maxHeight:{type:Number,default:465},maxWidth:{type:Number,default:900}},emits:["update:modelValue"],setup(V,{emit:g}){const x=d(V.modelValue);return I(x,A=>{g("update:modelValue",A)}),(A,L)=>{const te=i("VuetifyTiptap");return k(),z("div",Re,[e(te,{modelValue:x.value,"onUpdate:modelValue":L[0]||(L[0]=le=>x.value=le),label:V.label,"min-height":V.minHeight,"max-height":V.maxHeight,"max-width":V.maxWidth},null,8,["modelValue","label","min-height","max-height","max-width"])])}}},Je=r("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Einstellungen",-1),We={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},Ke={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},Qe=r("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Rückmeldungszeiträume",-1),Xe={class:"tw-flex tw-items-center tw-justify-end"},et=r("span",{class:"tw-text-h5"},"Neuer Rückmeldezeitraum",-1),tt=["data-id","data-order"],lt={align:"center"},at=r("span",null,"Einstellungen bearbeiten",-1),ot=r("span",null,"Einstellungen löschen",-1),nt=r("div",{class:"tw-py-6"},[r("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),st={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},rt=r("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"E-Mail Einstellungen",-1),dt={class:"tw-flex tw-items-center tw-justify-start"},ut={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},it={class:"tw-flex tw-items-center tw-justify-between tw-max-w-full tw-mx-auto tw-pt-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-4"},ct=r("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},"Dateien für den Downloadbereich",-1),mt={class:"tw-flex tw-items-center tw-justify-end"},_t=r("span",{class:"tw-text-h5"},"Neue Datei zum Downloadbereich hinzufügen",-1),pt=["data-id","data-order"],vt={align:"center"},ft=["href"],gt=r("span",null,"Datei herunterladen",-1),wt=r("span",null,"Datei bearbeiten",-1),yt=r("span",null,"Datei löschen",-1),ht=r("div",{class:"tw-py-6"},[r("h3",{class:"tw-mb-4"},"Die Tabelle ist leer.")],-1),bt={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8 tw-mb-8"},xt=r("h2",{class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight tw-mb-4"},"Text auf Login Seite",-1),Vt={class:"tw-flex tw-items-center tw-justify-start"},Tt={__name:"Settings",props:{surveyTimePeriods:Array,downloadableFiles:Array,emailSettings:Object,loginSettings:Object,currentPage:Number,perPage:Number,lastPage:Number,total:Number,paging:Boolean,orderBy:String,sort:String,filters:Object,errors:Object},setup(V){const g=V;Ie.Inertia.on("success",s=>{let l=s.detail.page.props;s.detail.page.component==="SurveyTimePeriods/SurveyTimePeriods"&&l&&(ee.value=l.currentPage,x.value=l.perPage,A.value=l.orderBy,L.value=l.sort,te.value=l.total,le.value=l.lastPage,ce.value=l.filters.search??null)}),Ae().props.auth.user;const ee=d(g.currentPage),x=d(g.perPage),A=d(g.orderBy),L=d(g.sort),te=d(g.total),le=d(g.lastPage),ce=d(g.filters.search??null),me=d(""),v=d(g.errors||{}),B=d(!1),ae=d(!1),oe=d(!1),M=d(!1),Z=d(!1),q=d(!1),Y=d(!1),_e=d(null),pe=d(null),ne=d(null),se=d(null),P=d(),T=d(),ve=d({send_yearly_evaluation_reminder_ntf_before_days:"Anzahl der Tage vor Ende des Bewertungszeitraums für den Versand der Erinnerungsmails"}),Ee=[{title:"Jahr",key:"year",width:"10%",sortable:!0},{title:"Erhebungsbeginn",key:"survey_start_date",width:"37.5%",sortable:!0},{title:"Erhebungsende",key:"survey_end_date",width:"37.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}],Pe=[{title:"Name",key:"name",width:"42.5%",sortable:!0},{title:"Hinzugefügt am",key:"created_at",width:"42.5%",sortable:!0},{title:"Aktion",key:"actions",width:"15%",sortable:!1,align:"center"}];Le(()=>{ge()});const Te=Se(()=>fe(g.surveyTimePeriods)),Ue=Se(()=>fe(g.downloadableFiles));I(M,s=>{s||h()}),I(Z,s=>{s||h()});const fe=s=>s.map(l=>{const f={...l};for(const c in f)(f[c]===null||f[c]===void 0)&&(f[c]="-");return f}),ge=()=>{ne.value=X(new Date(new Date().getFullYear(),4,1)),se.value=X(new Date(new Date().getFullYear(),5,30)),P.value=new Date(new Date().getFullYear(),4,1),T.value=new Date(new Date().getFullYear(),5,30)},h=()=>{M.value=!1,Z.value=!1,q.value=!1,Y.value=!1,re(),v.value={}},re=()=>{S.reset(),S.clearErrors(),y.reset(),y.clearErrors(),ge()},we=async({page:s,itemsPerPage:l,sortBy:f})=>{B.value=!0;let c={data:{page:s,per_page:l}};f&&f.length>0?(c.data.order_by=f[0].key,c.data.sort=f[0].order):(c.data.order_by=null,c.data.sort=null),c.data.search=ce.value,await Ze.reload(c),ee.value=s,x.value=l,B.value=!1};I(P,s=>{ne.value=X(s)}),I(T,s=>{se.value=X(s)});const Ne=s=>{j.id=s.id,_e.value=s.year,q.value=!0},S=C({year:null,survey_start_date:null,survey_end_date:null}),j=C({id:null}),Ce=async()=>{S.processing=!0,S.survey_start_date=new Date(P.value).toLocaleString(),S.survey_end_date=new Date(T.value).toLocaleString(),S.post(route("survey_time_periods.store"),{onSuccess:s=>{h()},onError:s=>{v.value=s},onFinish:()=>{S.processing=!1}})},ze=async()=>{j.processing=!0;let s={onSuccess:l=>{h()},onError:l=>{h(),v.value=l},onFinish:()=>{j.processing=!1}};j.delete(route("downloadable_files.destroy",{id:j.id}),s)},de=C({settings:g.emailSettings}),O=C({settings:g.loginSettings}),ye=async s=>{let l=s==="login"?O:de;l.processing=!0;let f={preserveScroll:!0,preserveState:!0,onSuccess:c=>{},onError:c=>{v.value=c},onFinish:()=>{l.processing=!1}};l.post(route("settings.update"),f)},je=s=>{U.id=s.id,pe.value=s.name,Y.value=!0},y=C({name:null,file:null}),U=C({id:null}),Oe=async()=>{var s;U.processing=!0,y.file=(s=y.file)!=null&&s.length?y.file[0]:null,y.post(route("downloadable_files.store"),{forceFormData:!0,onSuccess:l=>{h()},onError:l=>{v.value=l},onFinish:()=>{y.processing=!1}})},$e=async()=>{U.processing=!0;let s={onSuccess:l=>{h()},onError:l=>{h(),v.value=l},onFinish:()=>{U.processing=!1}};U.delete(route("downloadable_files.destroy",{id:U.id}),s)};return(s,l)=>{const f=i("v-card-title"),c=i("v-text-field"),b=i("v-col"),he=i("v-date-picker"),be=i("v-menu"),xe=i("v-locale-provider"),D=i("v-row"),R=i("v-container"),G=i("v-card-text"),F=i("v-btn-primary"),w=i("v-hover"),J=i("v-spacer"),N=i("v-btn"),W=i("v-card-actions"),K=i("v-card"),Q=i("v-dialog"),$=i("v-icon"),H=i("v-tooltip"),Ve=i("v-data-table-server"),He=i("v-file-input");return k(),z(ue,null,[e(m(Be),{title:"Einstellungen"}),e(qe,{errors:v.value},{header:t(()=>[Je]),default:t(()=>[r("div",We,[r("div",Ke,[Qe,r("div",Xe,[e(w,null,{default:t(({isHovering:o,props:n})=>[e(N,u(n,{color:o?"accent":"primary",dark:""}),{default:t(()=>[_(" ZEITRAUM HINZUFÜGEN "),e(Q,{modelValue:M.value,"onUpdate:modelValue":l[7]||(l[7]=a=>M.value=a),activator:"parent",width:"80vw"},{default:t(()=>[e(K,{height:"80vh"},{default:t(()=>[e(f,null,{default:t(()=>[et]),_:1}),e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(D,null,{default:t(()=>[e(b,{cols:"12",sm:"4"},{default:t(()=>[e(c,{modelValue:m(S).year,"onUpdate:modelValue":l[0]||(l[0]=a=>m(S).year=a),"error-messages":v.value.year,label:"Jahr*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(b,{cols:"12",sm:"4"},{default:t(()=>[e(xe,{locale:"de"},{default:t(()=>[e(be,{modelValue:ae.value,"onUpdate:modelValue":l[3]||(l[3]=a=>ae.value=a),"return-value":P.value,"close-on-content-click":!1},{activator:t(({props:a})=>[e(c,u({label:"Erhebungsbeginn*",class:"tw-cursor-pointer","model-value":ne.value,"prepend-icon":"mdi-calendar",readonly:""},a,{"error-messages":v.value.survey_start_date}),null,16,["model-value","error-messages"])]),default:t(()=>[e(he,{"onUpdate:modelValue":[l[1]||(l[1]=a=>ae.value=!1),l[2]||(l[2]=a=>P.value=a)],modelValue:P.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024),e(b,{cols:"12",sm:"4"},{default:t(()=>[e(xe,{locale:"de"},{default:t(()=>[e(be,{modelValue:oe.value,"onUpdate:modelValue":l[6]||(l[6]=a=>oe.value=a),"return-value":T.value,"close-on-content-click":!1},{activator:t(({props:a})=>[e(c,u({label:"Erhebungsende*",class:"tw-cursor-pointer","model-value":se.value,"prepend-icon":"mdi-calendar",readonly:""},a,{"error-messages":v.value.survey_end_date}),null,16,["model-value","error-messages"])]),default:t(()=>[e(he,{"onUpdate:modelValue":[l[4]||(l[4]=a=>oe.value=!1),l[5]||(l[5]=a=>T.value=a)],modelValue:T.value},null,8,["modelValue"])]),_:2},1032,["modelValue","return-value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(W,null,{default:t(()=>[e(w,null,{default:t(({isHovering:a,props:p})=>[e(F,u({onClick:re},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(J),e(w,null,{default:t(({isHovering:a,props:p})=>[e(N,u({onClick:h},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(w,null,{default:t(({isHovering:a,props:p})=>[e(F,u({onClick:Ce},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),e(Q,{modelValue:q.value,"onUpdate:modelValue":l[8]||(l[8]=o=>q.value=o),width:"20vw"},{default:t(()=>[e(K,{height:"30vh"},{default:t(()=>[e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(D,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[r("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+E(_e.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(W,null,{default:t(()=>[e(J),e(w,null,{default:t(({isHovering:o,props:n})=>[e(N,u({onClick:h},n,{color:o?"accent":"primary"}),{default:t(()=>[_("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(w,null,{default:t(({isHovering:o,props:n})=>[e(F,u({onClick:ze},n,{color:o?"accent":"primary"}),{default:t(()=>[_("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ve,{"items-per-page":x.value,"onUpdate:itemsPerPage":l[9]||(l[9]=o=>x.value=o),headers:Ee,items:Te.value,search:me.value,loading:B.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":we},{item:t(({item:o})=>[r("tr",{"data-id":o.id,"data-order":o.order},[r("td",null,E(o.year),1),r("td",null,E(m(Fe)(o.survey_start_date,"sv-SE")),1),r("td",null,E(m(Fe)(o.survey_end_date,"sv-SE")),1),r("td",lt,[e(H,{location:"top"},{activator:t(({props:n})=>[e(m(ke),{href:s.route("survey_time_periods.show",{id:o.id})},{default:t(()=>[e($,u(n,{size:"small",class:"tw-me-2"}),{default:t(()=>[_("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[at]),_:2},1024),e(H,{location:"top"},{activator:t(({props:n})=>[e($,u(n,{size:"small",class:"tw-me-2",onClick:a=>Ne(o)}),{default:t(()=>[_("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[ot]),_:2},1024)])],8,tt)]),"no-data":t(()=>[nt]),bottom:t(()=>[]),_:1},8,["items-per-page","items","search","loading"])]),r("div",st,[rt,e(D,null,{default:t(()=>[e(b,{cols:"12",md:"6"},{default:t(()=>[(k(!0),z(ue,null,De(V.emailSettings,(o,n)=>{var a;return k(),z("div",dt,[e(c,{modelValue:m(de).settings[n],"onUpdate:modelValue":p=>m(de).settings[n]=p,"error-messages":(a=v.value)!=null&&a.settings?v.value.settings[n]:!1,label:`${ve.value[n]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"])])}),256))]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(b,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:t(()=>[e(w,null,{default:t(({isHovering:o,props:n})=>[e(F,u({onClick:l[10]||(l[10]=a=>ye("email"))},n,{color:o?"accent":"primary"}),{default:t(()=>[_("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),r("div",ut,[r("div",it,[ct,r("div",mt,[e(w,null,{default:t(({isHovering:o,props:n})=>[e(N,u(n,{color:o?"accent":"primary",dark:""}),{default:t(()=>[_(" DATEI HINZUFÜGEN "),e(Q,{modelValue:Z.value,"onUpdate:modelValue":l[13]||(l[13]=a=>Z.value=a),activator:"parent",width:"80vw"},{default:t(()=>[e(K,{height:"80vh"},{default:t(()=>[e(f,null,{default:t(()=>[_t]),_:1}),e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(D,null,{default:t(()=>[e(b,{cols:"12",sm:"6"},{default:t(()=>[e(c,{class:"required",type:"text",modelValue:m(y).name,"onUpdate:modelValue":l[11]||(l[11]=a=>m(y).name=a),"error-messages":v.value.name,label:"Name",required:"",disabled:m(y).processing},null,8,["modelValue","error-messages","disabled"])]),_:1}),e(b,{cols:"12",sm:"6"},{default:t(()=>[e(He,{modelValue:m(y).file,"onUpdate:modelValue":l[12]||(l[12]=a=>m(y).file=a),"error-messages":v.value.file,label:"File",accept:"*/*","prepend-icon":"mdi-upload",disabled:m(y).processing},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(W,null,{default:t(()=>[e(w,null,{default:t(({isHovering:a,props:p})=>[e(F,u({onClick:re},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Zurücksetzen")]),_:2},1040,["color"])]),_:2},1024),e(J),e(w,null,{default:t(({isHovering:a,props:p})=>[e(N,u({onClick:h},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Stornieren")]),_:2},1040,["color"])]),_:2},1024),e(w,null,{default:t(({isHovering:a,props:p})=>[e(F,u({onClick:Oe},p,{color:a?"accent":"primary"}),{default:t(()=>[_("Speichern")]),_:2},1040,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1040,["color"])]),_:1})])]),e(Q,{modelValue:Y.value,"onUpdate:modelValue":l[14]||(l[14]=o=>Y.value=o),width:"20vw"},{default:t(()=>[e(K,{height:"30vh"},{default:t(()=>[e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(D,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[r("p",null,"Sind Sie sicher, dass Sie die Einstellungen "+E(pe.value)+" löschen möchten?",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(W,null,{default:t(()=>[e(J),e(w,null,{default:t(({isHovering:o,props:n})=>[e(N,u({onClick:h},n,{color:o?"accent":"primary"}),{default:t(()=>[_("Abbrechen")]),_:2},1040,["color"])]),_:1}),e(w,null,{default:t(({isHovering:o,props:n})=>[e(F,u({onClick:$e},n,{color:o?"accent":"primary"}),{default:t(()=>[_("Löschen")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ve,{"items-per-page":x.value,"onUpdate:itemsPerPage":l[15]||(l[15]=o=>x.value=o),headers:Pe,items:Ue.value,search:me.value,loading:B.value,class:"data-table-container elevation-1","item-value":"name","onUpdate:options":we},{item:t(({item:o})=>[r("tr",{"data-id":o.id,"data-order":o.order},[r("td",null,E(o.name),1),r("td",null,E(m(Ye)(o.created_at,"sv-SE")),1),r("td",vt,[o!=null&&o.path?(k(),ie(H,{key:0,location:"top"},{activator:t(({props:n})=>[r("a",{href:o.path,download:""},[e($,u(n,{size:"small",class:"tw-me-2"}),{default:t(()=>[_("mdi-download")]),_:2},1040)],8,ft)]),default:t(()=>[gt]),_:2},1024)):Me("",!0),e(H,{location:"top"},{activator:t(({props:n})=>[e(m(ke),{href:s.route("downloadable_files.show",{id:o.id})},{default:t(()=>[e($,u(n,{size:"small",class:"tw-me-2"}),{default:t(()=>[_("mdi-pencil")]),_:2},1040)]),_:2},1032,["href"])]),default:t(()=>[wt]),_:2},1024),e(H,{location:"top"},{activator:t(({props:n})=>[e($,u(n,{size:"small",class:"tw-me-2",onClick:a=>je(o)}),{default:t(()=>[_("mdi-delete")]),_:2},1040,["onClick"])]),default:t(()=>[yt]),_:2},1024)])],8,pt)]),"no-data":t(()=>[ht]),bottom:t(()=>[]),_:1},8,["items-per-page","items","search","loading"])]),r("div",bt,[xt,e(D,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[(k(!0),z(ue,null,De(V.loginSettings,(o,n)=>{var a;return k(),z("div",Vt,[n==="login_form_additional_html"?(k(),ie(Ge,{key:0,modelValue:m(O).settings[n],"onUpdate:modelValue":p=>m(O).settings[n]=p,minHeight:300},null,8,["modelValue","onUpdate:modelValue"])):(k(),ie(c,{key:1,modelValue:m(O).settings[n],"onUpdate:modelValue":p=>m(O).settings[n]=p,"error-messages":(a=v.value)!=null&&a.settings?v.value.settings[n]:!1,label:`${ve.value[n]}*`,required:""},null,8,["modelValue","onUpdate:modelValue","error-messages","label"]))])}),256))]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(b,{cols:"12",class:"tw-flex tw-items-center tw-justify-start"},{default:t(()=>[e(w,null,{default:t(({isHovering:o,props:n})=>[e(F,u({onClick:l[16]||(l[16]=a=>ye("login"))},n,{color:o?"accent":"primary"}),{default:t(()=>[_("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["errors"])],64)}}};export{Tt as default};
