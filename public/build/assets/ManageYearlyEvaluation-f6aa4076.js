import{d as P}from"./index-669f99da.js";import{K as W,k as y,h as j,T as G,r as o,f as w,a as e,u as n,w as a,F as $,o as h,Z as L,b as p,t as g,c as K,g as v,i as Q,p as A,d as x}from"./app-c1b78740.js";import{_ as X}from"./AuthenticatedLayout-3fec963a.js";import{W as E}from"./WarningEvaluationTooltip-c796a7ec.js";import"./ApplicationLogo-bb68a240.js";const ee={class:"tw-font-semibold tw-text-xl tw-text-gray-800 tw-leading-tight"},ae={class:"tw-table-block tw-max-w-full tw-mx-auto tw-py-6 tw-px-4 sm:tw-px-6 lg:tw-px-8"},le=p("h3",null,"Rückmeldung betrifft",-1),re=p("h3",null,"Angaben zur Rückmeldung",-1),te=p("h5",null,"Kinder bis 2,5 Jahre",-1),ne=p("h5",null,"Kinder bis 4,5 Jahre",-1),_e=p("h4",null,"Wir haben eine Abweichung zwischen der Anzahl der von Ihnen gemeldeten Kinder und der Anzahl über die BeoKiz-Ampel erfassten Kindern festgestellt:",-1),oe={class:"tw-flex tw-items-center tw-mt-2"},ie={style:{"list-style-type":"disc","margin-left":"25px"}},se={key:0},ue={key:1},de={key:2},me={key:3},fe={__name:"ManageYearlyEvaluation",props:{yearlyEvaluation:Object,errors:Object,kitas:Array},setup(b){const z=b;P.Inertia.on("success",u=>{let r=u.detail.page.props;u.detail.page.component==="YearlyEvaluations/Partials/ManageYearlyEvaluation"&&r&&(i.value=r.yearlyEvaluation)}),W().props.auth.user;const i=y(z.yearlyEvaluation),s=y(z.errors||{});y(!1);const V=y(!1),D=y(!1),S=y(!1);j(()=>z.yearlyEvaluation.map(u=>{const r={...u};for(const _ in r)(r[_]===null||r[_]===void 0)&&(r[_]="-");return r}));const l=G({id:i.value.id,year:i.value.year,kita_id:i.value.kita_id,children_2_born_per_year:i.value.children_2_born_per_year,children_2_with_german_lang:i.value.children_2_with_german_lang,evaluations_with_daz_2_total_per_year:i.value.evaluations_with_daz_2_total_per_year,children_2_with_foreign_lang:i.value.children_2_with_foreign_lang,evaluations_without_daz_2_total_per_year:i.value.evaluations_without_daz_2_total_per_year,children_4_born_per_year:i.value.children_4_born_per_year,children_4_with_german_lang:i.value.children_4_with_german_lang,evaluations_with_daz_4_total_per_year:i.value.evaluations_with_daz_4_total_per_year,children_4_with_foreign_lang:i.value.children_4_with_foreign_lang,evaluations_without_daz_4_total_per_year:i.value.evaluations_without_daz_4_total_per_year}),I=()=>{V.value=!1},Y=()=>{D.value=!0,I()},C=async()=>{(d("2_german")||d("2_foreign")||d("4_german")||d("4_foreign"))&&!D.value?V.value=!0:await F()},d=u=>{if(u==="2_german")return parseInt(l.evaluations_with_daz_2_total_per_year)!==parseInt(l.children_2_with_german_lang);if(u==="2_foreign")return parseInt(l.evaluations_without_daz_2_total_per_year)!==parseInt(l.children_2_with_foreign_lang);if(u==="4_german")return parseInt(l.evaluations_with_daz_4_total_per_year)!==parseInt(l.children_4_with_german_lang);if(u==="4_foreign")return parseInt(l.evaluations_without_daz_4_total_per_year)!==parseInt(l.children_4_with_foreign_lang)},F=async()=>{l.processing=!0;let u={preserveState:!1,onSuccess:r=>{},onError:r=>{s.value=r},onFinish:()=>{l.processing=!1}};l.put(route("yearly_evaluations.update",{id:l.id}),u)};return(u,r)=>{const _=o("v-col"),c=o("v-text-field"),R=o("v-select"),m=o("v-row"),U=o("v-card"),B=o("v-btn"),k=o("v-hover"),q=o("v-btn-primary"),J=o("v-container"),T=o("v-icon"),Z=o("v-checkbox"),H=o("v-card-text"),M=o("v-spacer"),N=o("v-card-actions"),O=o("v-dialog");return h(),w($,null,[e(n(L),{title:`Verwalte Jährliche Rückmeldung ${b.yearlyEvaluation.year}`},null,8,["title"]),e(X,{errors:s.value},{header:a(()=>[p("h2",ee,"Jährliche Rückmeldung "+g(b.yearlyEvaluation.year),1)]),default:a(()=>[p("div",ae,[e(J,null,{default:a(()=>[e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"12"},{default:a(()=>[le]),_:1}),e(_,{cols:"12",sm:"4"},{default:a(()=>[e(c,{modelValue:n(l).year,"onUpdate:modelValue":r[0]||(r[0]=t=>n(l).year=t),"error-messages":s.value.year,label:"Jahr der Rückmeldung*",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"4"},{default:a(()=>[e(R,{modelValue:n(l).kita_id,"onUpdate:modelValue":r[1]||(r[1]=t=>n(l).kita_id=t),items:b.kitas,"error-messages":s.value.kita_id,"item-title":"name","item-value":"id",label:"Kita*"},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"12"},{default:a(()=>[re]),_:1}),e(_,{cols:"12",sm:"6"},{default:a(()=>[e(U,{class:"tw-p-6"},{default:a(()=>[te,e(c,{modelValue:n(l).children_2_born_per_year,"onUpdate:modelValue":r[2]||(r[2]=t=>n(l).children_2_born_per_year=t),"error-messages":s.value.children_2_born_per_year,label:"Gesamtzahl der im Zeitraum [Survey DateStart-2,5 years] - [Survey DateEnd-2,5 years] geborenen Kinder",type:"number",required:""},null,8,["modelValue","error-messages"]),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"7"},{default:a(()=>[e(c,{modelValue:n(l).children_2_with_german_lang,"onUpdate:modelValue":r[3]||(r[3]=t=>n(l).children_2_with_german_lang=t),"error-messages":s.value.children_2_with_german_lang,label:"Kinder mit deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"5"},{default:a(()=>[e(m,null,{default:a(()=>[d("2_german")?(h(),K(E,{key:0})):v("",!0),e(_,{cols:"12",sm:"10"},{default:a(()=>[e(c,{modelValue:n(l).evaluations_with_daz_2_total_per_year,"onUpdate:modelValue":r[4]||(r[4]=t=>n(l).evaluations_with_daz_2_total_per_year=t),"error-messages":s.value.evaluations_with_daz_2_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"7"},{default:a(()=>[e(c,{modelValue:n(l).children_2_with_foreign_lang,"onUpdate:modelValue":r[5]||(r[5]=t=>n(l).children_2_with_foreign_lang=t),"error-messages":s.value.children_2_with_foreign_lang,label:"Kinder mit nicht deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"5"},{default:a(()=>[e(m,null,{default:a(()=>[d("2_foreign")?(h(),K(E,{key:0})):v("",!0),e(_,{cols:"12",sm:"10"},{default:a(()=>[e(c,{modelValue:n(l).evaluations_without_daz_2_total_per_year,"onUpdate:modelValue":r[6]||(r[6]=t=>n(l).evaluations_without_daz_2_total_per_year=t),"error-messages":s.value.evaluations_without_daz_2_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{cols:"12",sm:"6"},{default:a(()=>[e(U,{class:"tw-p-6"},{default:a(()=>[ne,e(c,{modelValue:n(l).children_4_born_per_year,"onUpdate:modelValue":r[7]||(r[7]=t=>n(l).children_4_born_per_year=t),"error-messages":s.value.children_4_born_per_year,label:"Gesamtzahl der im Zeitraum [Survey DateStart -4,5 years] - [Survey DateEnd-4,5 years] geborenen Kinder",type:"number",required:""},null,8,["modelValue","error-messages"]),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"7"},{default:a(()=>[e(c,{modelValue:n(l).children_4_with_german_lang,"onUpdate:modelValue":r[8]||(r[8]=t=>n(l).children_4_with_german_lang=t),"error-messages":s.value.children_4_with_german_lang,label:"Kinder mit deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"5"},{default:a(()=>[e(m,null,{default:a(()=>[d("4_german")?(h(),K(E,{key:0})):v("",!0),e(_,{cols:"12",sm:"10"},{default:a(()=>[e(c,{modelValue:n(l).evaluations_with_daz_4_total_per_year,"onUpdate:modelValue":r[9]||(r[9]=t=>n(l).evaluations_with_daz_4_total_per_year=t),"error-messages":s.value.evaluations_with_daz_4_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"7"},{default:a(()=>[e(c,{modelValue:n(l).children_4_with_foreign_lang,"onUpdate:modelValue":r[10]||(r[10]=t=>n(l).children_4_with_foreign_lang=t),"error-messages":s.value.children_4_with_foreign_lang,label:"Kinder mit nicht deutscher Herkunftssprache*",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",sm:"5"},{default:a(()=>[e(m,null,{default:a(()=>[d("4_foreign")?(h(),K(E,{key:0})):v("",!0),e(_,{cols:"12",sm:"10"},{default:a(()=>[e(c,{modelValue:n(l).evaluations_without_daz_4_total_per_year,"onUpdate:modelValue":r[11]||(r[11]=t=>n(l).evaluations_without_daz_4_total_per_year=t),"error-messages":s.value.evaluations_without_daz_4_total_per_year,label:"Bisher eingereichte Einschätzungen",type:"number",disabled:"",required:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(_,{cols:"12",sm:"12",align:"right"},{default:a(()=>[e(k,null,{default:a(({isHovering:t,props:f})=>[e(n(Q),{href:u.route("yearly_evaluations.index")},{default:a(()=>[e(B,A({class:"mr-2",variant:"text"},f,{color:t?"accent":"primary"}),{default:a(()=>[x("Zurück")]),_:2},1040,["color"])]),_:2},1032,["href"])]),_:1}),e(k,null,{default:a(({isHovering:t,props:f})=>[e(q,A({onClick:C},f,{color:t?"accent":"primary"}),{default:a(()=>[x("Speichern ")]),_:2},1040,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{modelValue:V.value,"onUpdate:modelValue":r[13]||(r[13]=t=>V.value=t),width:"80vw"},{default:a(()=>[e(U,{height:"50vh"},{default:a(()=>[e(H,null,{default:a(()=>[e(J,null,{default:a(()=>[e(m,null,{default:a(()=>[e(_,{cols:"12"},{default:a(()=>[_e,p("div",oe,[e(T,A(z,{icon:"mdi-alert",color:"orange"}),null,16),p("ul",ie,[d("2_german")?(h(),w("li",se," Die Anzahl der Kinder im Alter bis 2,5 Jahre welche Deutsch als Fremdsprache haben Sie mit "+g(n(l).children_2_with_german_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(n(l).evaluations_with_daz_2_total_per_year),1)):v("",!0),d("2_foreign")?(h(),w("li",ue," Die Anzahl der Kinder im Alter bis 2,5 Jahre welche Deutsch als Muttersprache haben Sie mit "+g(n(l).children_2_with_foreign_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(n(l).evaluations_without_daz_2_total_per_year),1)):v("",!0),d("4_german")?(h(),w("li",de," Die Anzahl der Kinder im Alter bis 4,5 Jahre welche Deutsch als Fremdsprache haben Sie mit "+g(n(l).children_4_with_german_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(n(l).evaluations_with_daz_2_total_per_year),1)):v("",!0),d("4_foreign")?(h(),w("li",me," Die Anzahl der Kinder im Alter bis 4,5 Jahre welche Deutsch als Muttersprache haben Sie mit "+g(n(l).children_4_with_foreign_lang)+" angegeben, die Anzahl der über die BeoKiz-Ampel erfassten Kindern beträgt "+g(n(l).evaluations_without_daz_4_total_per_year),1)):v("",!0)])]),e(Z,{modelValue:S.value,"onUpdate:modelValue":r[12]||(r[12]=t=>S.value=t),label:"Ich habe verstanden, dass es Unstimmigkeiten bei dem Abgelich der gemelden Zahlen gibt, Statusmeldung dennoch absenden."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(N,null,{default:a(()=>[e(M),e(k,null,{default:a(({isHovering:t,props:f})=>[e(B,{onClick:I,color:t?"accent":"primary"},{default:a(()=>[x("Abbrechen")]),_:2},1032,["color"])]),_:1}),e(k,null,{default:a(({isHovering:t,props:f})=>[e(q,A({disabled:!S.value,onClick:Y},f,{color:t?"accent":"primary"}),{default:a(()=>[x("Speichern")]),_:2},1040,["disabled","color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["errors"])],64)}}};export{fe as default};
